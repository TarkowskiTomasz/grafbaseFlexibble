"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[159],{2966:(f,l,e)=>{e.d(l,{_:()=>p});var d=e(5e3),h=e(9783);let p=(()=>{class a{constructor(n){this.messageService=n}success(n,i){this.showToast(n,"success",i)}info(n,i){this.showToast(n,"info",i)}warning(n,i){this.showToast(n,"warn",i)}error(n,i){this.showToast(n,"error",i)}showToast(n,i,g=!1){this.messageService.add({severity:i,detail:n,sticky:g})}clear(){this.messageService.clear()}}return a.\u0275fac=function(n){return new(n||a)(d.LFG(h.ez))},a.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},4159:(f,l,e)=>{e.r(l),e.d(l,{LockModule:()=>b});var d=e(5084),h=e(4521),p=e(7575),a=e(9808),t=e(5e3),n=e(520);let i=(()=>{class o{constructor(s){this.http=s}startLock(){return this.http.post("api/tests/start-lock",{})}}return o.\u0275fac=function(s){return new(s||o)(t.LFG(n.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var g=e(2966),x=e(2313),S=e(9777),v=e(1062),L=e(4063),k=e(97),u=e(3075),y=e(6042),C=e(2643),T=e(2683),M=e(2874),Z=e(385);const O=[{path:"",component:(()=>{class o{constructor(s,r,m,z,A,U,w,E,Y){this.lockService=s,this.toastr=r,this.titleService=m,this.appLoadService=z,this.translate=A,this.modalService=U,this.settingsGeneralSystemService=w,this.document=E,this.renderer=Y,this.saving=!1,this.year=(new Date).getFullYear(),this.aliveLog=!0}ngOnInit(){this.titleService.setTitle(`SCU200${this.appLoadService.user.isWifi?"-W":""} - Lock`),this.renderer.removeClass(this.document.body,"dark-mode"),this.renderer.removeClass(this.document.body,"light-mode"),this.renderer.addClass(this.document.body,"light-mode"),this.isWifi=this.appLoadService.user.isWifi,this.version=this.appLoadService.user.version}startLock(){this.saving=!0,this.result="",this.lockService.startLock().subscribe(s=>{this.result=s.data,this.result.indexOf("Device successfully locked")>-1?this.shutdownConfirm():this.toastr.error("Device lock error, check log and try again.",!0),this.saving=!1},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.saving=!1})}shutdownConfirm(){this.modalService.showConfirm(this.translate.instant("Device successfully locked. Please confirm that the system has to be shutdown."),()=>{this.modalService.setLoading(!0),this.settingsGeneralSystemService.shutdown().subscribe(()=>{this.modalService.showInfo(this.translate.instant("SYSTEM_SHUT_OK"),()=>{this.modalService.hide()})})})}}return o.\u0275fac=function(s){return new(s||o)(t.Y36(i),t.Y36(g._),t.Y36(x.Dx),t.Y36(S.V),t.Y36(v.sK),t.Y36(L.Z),t.Y36(k.p),t.Y36(a.K0),t.Y36(t.Qsj))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-lock"]],decls:18,vars:10,consts:[[1,"lock-container"],[1,"lock-content"],["alt","logo","src","/assets/logo_abb_login.png",1,"logo"],[1,"product-name"],[1,"product-subname"],[1,"form-group"],["nz-button","","nzType","primary",3,"nzLoading","disabled","click"],["id","test_result"],[1,"lock-footer"]],template:function(s,r){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"h1",3),t._uU(4),t.qZA(),t.TgZ(5,"h2",4),t._uU(6),t.qZA(),t.TgZ(7,"form"),t.TgZ(8,"div",5),t.TgZ(9,"button",6),t.NdJ("click",function(){return r.startLock()}),t._uU(10,"Start Device Lock"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",7),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t._UZ(16,"app-toastr"),t._UZ(17,"app-modal")),2&s&&(t.xp6(4),t.hij("SCU200",r.isWifi?"-W":"",""),t.xp6(2),t.AsE("SCU200",r.isWifi?"-W":"",", v",r.version,""),t.xp6(3),t.Q6J("nzLoading",r.saving)("disabled",r.saving),t.xp6(3),t.Oqu(r.result),t.xp6(2),t.AsE(" ",t.lcZ(15,8,"RIGHTS_RESERVED")," ",r.year," "))},directives:[u._Y,u.JL,u.F,y.ix,C.dQ,T.w,M.l,Z.z],pipes:[v.X$],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100vh;background:#fafafa;display:flex;align-items:center;justify-content:center;flex-direction:column}.lock-container[_ngcontent-%COMP%]{box-shadow:0 0 10px 1px #0000001a;background:url(/assets/login_background.png) no-repeat top;width:720px;min-height:320px;display:flex;flex-direction:column;justify-content:space-between}.lock-content[_ngcontent-%COMP%]{position:relative;padding:64px 32px 0}.lock-footer[_ngcontent-%COMP%]{border-top:1px solid silver;padding:12px 16px;font-size:12px;text-align:right}.logo[_ngcontent-%COMP%]{position:absolute;height:22px;top:38px;right:32px;width:61px}.product-name[_ngcontent-%COMP%]{margin:0;font-size:32px;line-height:1;min-height:64px;font-weight:700;letter-spacing:-2px}.product-name[_ngcontent-%COMP%]:before{content:"\\2014";font-size:inherit;color:#ff000f;display:block}.product-subname[_ngcontent-%COMP%]{margin:12px 0 0;min-height:20px;font-size:14px;font-weight:700}#test_result[_ngcontent-%COMP%]{margin-top:20px;white-space:pre;text-align:left;height:200px;overflow:auto;background:#fff;border:1px solid #bababa;padding:10px;margin-bottom:10px}form[_ngcontent-%COMP%]{display:flex;justify-content:center}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:20px 0 10px}@media (max-width: 991px){.lock-container[_ngcontent-%COMP%]{max-width:100%}}']}),o})(),canActivate:[p.u]}];let P=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[p.u],imports:[[h.Bz.forChild(O)],h.Bz]}),o})(),b=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.m,P]]}),o})()}}]);