"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[324],{6324:(M,T,l)=>{l.r(T),l.d(T,{DiagnosticModule:()=>Rt});var v=l(4521),m=l(5724),t=l(5e3),d=l(1062),p=l(2966),h=l(4063),A=l(520);let C=(()=>{class o{constructor(e){this.http=e}toggleEventStatus(e,a,n){return this.http.put("api/events/toggle-event-status",{ids:e,deviceTypes:a,action:n},{responseType:"text"})}getEventsConfiguration(){return this.http.get("api/events/configuration")}saveEvent(e){return this.http.post("api/events",e,{responseType:"text"})}setEvent(e){return this.http.put("api/events",e,{responseType:"text"})}remove(e,a){return this.http.post("api/events/remove",{ids:e,deviceTypes:a},{responseType:"text"})}getHistoricalValues(e){return this.http.post("api/events/history",e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(A.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var x=l(408),L=l(6042),N=l(2643),z=l(2683),E=l(9808),y=l(8868),O=l(9767),_=l(2364),w=l(7003),F=l(6462),Z=l(3075),Q=l(6695),Y=l(2374),B=l(656),W=l(7815),q=l(442),G=l(83);const K=["eventDrawer"];function j(o,r){1&o&&t._UZ(0,"app-loader")}function $(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",29),t.TgZ(1,"span",30),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",31),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(2);return t.oxw().removeEvent(n)}),t._UZ(5,"i",32),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"button",33),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(2);return t.oxw().toggleEnableDisable(n,"enable")}),t._UZ(9,"span",34),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"button",35),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(2);return t.oxw().toggleEnableDisable(n,"disable")}),t._UZ(13,"span",36),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA()}if(2&o){t.oxw();const e=t.MAs(2);t.xp6(2),t.AsE("",e.nrOfSelected," ",t.lcZ(3,5,"SELECTED"),""),t.xp6(4),t.Oqu(t.lcZ(7,7,"REMOVE")),t.xp6(4),t.Oqu(t.lcZ(11,9,"ENABLE_SELECTED")),t.xp6(4),t.Oqu(t.lcZ(15,11,"DISABLE_SELECTED"))}}function X(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",37),t.NdJ("nzCheckedChange",function(n){const s=t.CHM(e).$implicit;return t.oxw(),t.MAs(2).onItemSelected(s,n)}),t.qZA(),t.TgZ(2,"td",21),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td",38),t._uU(12),t.ALo(13,"valueFromId"),t.qZA(),t.TgZ(14,"td",38),t._uU(15),t.ALo(16,"toUnit"),t.qZA(),t.TgZ(17,"td",38),t._uU(18),t.qZA(),t.TgZ(19,"td",38),t._uU(20),t.ALo(21,"valueFromId"),t.qZA(),t.TgZ(22,"td",38),t._uU(23),t.ALo(24,"valueFromId"),t.qZA(),t.TgZ(25,"td"),t.TgZ(26,"nz-switch",39),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.status=n})("click",function(){const i=t.CHM(e).$implicit;return t.oxw(2).toggleEnabled(i)}),t.qZA(),t._uU(27),t.ALo(28,"valueFromId"),t.qZA(),t.TgZ(29,"td",40),t.TgZ(30,"button",41),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw(2).addEventDrawer(i)}),t.ALo(31,"translate"),t._UZ(32,"i",42),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,a=r.index;t.oxw();const n=t.MAs(2),i=t.oxw();t.xp6(1),t.MGl("id","table_item_checkbox_",a,""),t.Q6J("nzLeft",n.allowNzLeft)("nzChecked",e.selected),t.xp6(1),t.Q6J("nzLeft",n.allowNzLeft),t.xp6(1),t.Oqu(e.id),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.device_names),t.xp6(2),t.Oqu(t.lcZ(10,18,e.variable||"-")),t.xp6(3),t.Oqu(t.Dn7(13,20,e.event_type,i.eventTypesAll,"text")),t.xp6(3),t.Oqu(e.event_type<3?e.threshold+" "+t.lcZ(16,24,e.unit):"-"),t.xp6(3),t.Oqu(e.time_delay),t.xp6(2),t.Oqu(t.Dn7(21,26,e.send_email,i.yesNo,"text")),t.xp6(3),t.Oqu(t.Dn7(24,30,e.raise_alarm,i.yesNo,"text")),t.xp6(3),t.Q6J("nzControl",!0)("ngModel",e.status),t.xp6(1),t.hij(" ",t.Dn7(28,34,e.status,i.enableDisable,"text"),""),t.xp6(3),t.MGl("id","edit_event_button_",a,""),t.s9C("nzTooltipTitle",t.lcZ(31,38,"EDIT"))}}const tt=function(){return{key:"id",value:"ascend"}},et=function(o,r){return{x:o,y:r}},f=function(){return["ascend","descend"]};function nt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"app-table",7,8),t.YNc(3,$,16,13,"div",9),t.TgZ(4,"nz-table",10,11),t.ALo(6,"translate"),t.TgZ(7,"thead",12),t.NdJ("nzSortOrderChange",function(n){return t.CHM(e),t.MAs(2).sort(n)}),t.TgZ(8,"tr"),t.TgZ(9,"th",13),t.NdJ("nzCheckedChange",function(n){return t.CHM(e),t.MAs(2).onAllSelected(n)}),t.qZA(),t.TgZ(10,"th",14),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",15),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",15),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th",15),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",15),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th",16),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"th",16),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"th",17),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"th",17),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"th",18),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"th",19),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.qZA(),t.TgZ(43,"tr",20),t._UZ(44,"th",21),t.TgZ(45,"th",22),t.TgZ(46,"input",23),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"id","contains")}),t.qZA(),t.qZA(),t.TgZ(47,"th",24),t.TgZ(48,"input",23),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"name","contains")}),t.qZA(),t.qZA(),t.TgZ(49,"th",24),t.TgZ(50,"input",23),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"device_names","contains")}),t.qZA(),t.qZA(),t.TgZ(51,"th",24),t.TgZ(52,"input",23),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"variable","contains")}),t.qZA(),t.qZA(),t.TgZ(53,"th"),t.TgZ(54,"app-select",25),t.NdJ("modelChange",function(n){return t.CHM(e),t.MAs(2).filtersModel.event_type=n})("callbackChange",function(){t.CHM(e);const n=t.MAs(2);return n.filter(n.filtersModel.event_type,"event_type","equals")}),t.qZA(),t.qZA(),t.TgZ(55,"th",24),t.TgZ(56,"input",23),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"threshold","contains",2)}),t.qZA(),t.qZA(),t.TgZ(57,"th",24),t.TgZ(58,"input",23),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"time_delay","contains",2)}),t.qZA(),t.qZA(),t.TgZ(59,"th"),t.TgZ(60,"app-select",26),t.NdJ("modelChange",function(n){return t.CHM(e),t.MAs(2).filtersModel.send_email=n})("callbackChange",function(){t.CHM(e);const n=t.MAs(2);return n.filter(n.filtersModel.send_email,"send_email","equals")}),t.qZA(),t.qZA(),t.TgZ(61,"th"),t.TgZ(62,"app-select",27),t.NdJ("modelChange",function(n){return t.CHM(e),t.MAs(2).filtersModel.raise_alarm=n})("callbackChange",function(){t.CHM(e);const n=t.MAs(2);return n.filter(n.filtersModel.raise_alarm,"raise_alarm","equals")}),t.qZA(),t.qZA(),t.TgZ(63,"th"),t.TgZ(64,"app-select",25),t.NdJ("modelChange",function(n){return t.CHM(e),t.MAs(2).filtersModel.status=n})("callbackChange",function(){t.CHM(e);const n=t.MAs(2);return n.filter(n.filtersModel.status,"status","equals")}),t.qZA(),t.qZA(),t._UZ(65,"th"),t.qZA(),t.qZA(),t.TgZ(66,"tbody"),t.YNc(67,X,33,40,"tr",28),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(2),a=t.MAs(5),n=t.oxw();t.xp6(1),t.Q6J("initSort",t.DdM(98,tt))("data",n.rows),t.xp6(2),t.Q6J("ngIf",e.nrOfSelected),t.xp6(1),t.Q6J("nzData",n.rows)("nzFrontPagination",!1)("nzScroll",t.WLB(99,et,e.tableWidth,e.tableHeight))("nzData",e.tableData)("nzNoResult",t.lcZ(6,74,"NO_EVENTS")),t.xp6(5),t.Q6J("nzLeft",e.allowNzLeft)("nzChecked",e.selected)("nzIndeterminate",e.indeterminate),t.xp6(1),t.Q6J("nzLeft",e.allowNzLeft)("nzColumnKey","id")("nzSortFn",!0)("nzSortDirections",t.DdM(102,f))("nzSortOrder","ascend"),t.xp6(1),t.Oqu(t.lcZ(12,76,"ID")),t.xp6(2),t.Q6J("nzColumnKey","name")("nzSortFn",!0)("nzSortDirections",t.DdM(103,f)),t.xp6(1),t.Oqu(t.lcZ(15,78,"NAME")),t.xp6(2),t.Q6J("nzColumnKey","device_names")("nzSortFn",!0)("nzSortDirections",t.DdM(104,f)),t.xp6(1),t.Oqu(t.lcZ(18,80,"DEVICE")),t.xp6(2),t.Q6J("nzColumnKey","variable")("nzSortFn",!0)("nzSortDirections",t.DdM(105,f)),t.xp6(1),t.Oqu(t.lcZ(21,82,"MEASURE")),t.xp6(2),t.Q6J("nzColumnKey","event_type")("nzSortFn",!0)("nzSortDirections",t.DdM(106,f)),t.xp6(1),t.Oqu(t.lcZ(24,84,"TYPE")),t.xp6(2),t.Q6J("nzColumnKey","threshold")("nzSortFn",!0)("nzSortDirections",t.DdM(107,f)),t.xp6(1),t.Oqu(t.lcZ(27,86,"THRESHOLD")),t.xp6(2),t.Q6J("nzColumnKey","time_delay")("nzSortFn",!0)("nzSortDirections",t.DdM(108,f)),t.xp6(1),t.Oqu(t.lcZ(30,88,"TIME_DELAY")),t.xp6(2),t.Q6J("nzColumnKey","send_email")("nzSortFn",!0)("nzSortDirections",t.DdM(109,f)),t.xp6(1),t.Oqu(t.lcZ(33,90,"EMAIL")),t.xp6(2),t.Q6J("nzColumnKey","raise_alarm")("nzSortFn",!0)("nzSortDirections",t.DdM(110,f)),t.xp6(1),t.Oqu(t.lcZ(36,92,"ALARM")),t.xp6(2),t.Q6J("nzColumnKey","status")("nzSortFn",!0)("nzSortDirections",t.DdM(111,f)),t.xp6(1),t.Oqu(t.lcZ(39,94,"STATUS")),t.xp6(3),t.Oqu(t.lcZ(42,96,"ACTION")),t.xp6(3),t.Q6J("nzLeft",e.allowNzLeft),t.xp6(1),t.Q6J("nzLeft",e.allowNzLeft),t.xp6(9),t.Q6J("options",n.eventTypesAllFilter)("showSearch",!1)("clearable",!0)("model",e.filtersModel.event_type),t.xp6(6),t.Q6J("options",n.yesNo)("showSearch",!1)("clearable",!0)("model",e.filtersModel.send_email),t.xp6(2),t.Q6J("options",n.yesNo)("showSearch",!1)("clearable",!0)("model",e.filtersModel.raise_alarm),t.xp6(2),t.Q6J("options",n.enableDisable)("showSearch",!1)("clearable",!0)("model",e.filtersModel.status),t.xp6(3),t.Q6J("ngForOf",a.data)("ngForTrackBy",n.trackByFun)}}const D=function(){return{required:!0}};function at(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",48),t.TgZ(1,"label",49),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",62),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editEvent.category=n})("callbackChange",function(){return t.CHM(e),t.oxw(2).categoryChanged()}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,4,"CATEGORY"),":"),t.xp6(2),t.Q6J("model",e.editEvent.category)("options",e.categories)("validators",t.DdM(6,D))}}function it(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",48),t.TgZ(1,"label",49),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",63),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editEvent.variable=n})("callbackChange",function(){return t.CHM(e),t.oxw(2).measureChanged()}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,4,"MEASURE"),":"),t.xp6(2),t.Q6J("model",e.editEvent.variable)("options",e.variables)("validators",t.DdM(6,D))}}function ot(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",48),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"toUnit"),t.qZA(),t.TgZ(5,"app-validate",50),t.TgZ(6,"nz-input-number",64,65),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editEvent.threshold=n}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(7),a=t.oxw(2);t.xp6(2),t.AsE("",t.lcZ(3,8,"THRESHOLD")," ",t.lcZ(4,10,a.editEvent.unit)," "),t.xp6(3),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",a.editEvent.threshold)("nzMin",0)("nzStep",.01)("nzMax",2147483647)("required",!0)}}function rt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",48),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-validate",50),t.TgZ(5,"nz-input-number",66,67),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editEvent.time_delay=n}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(6),a=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,7,"TIME_DELAY")," [s]:"),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",a.editEvent.time_delay)("nzMin",0)("nzStep",1)("nzMax",2147483647)("required",!0)}}function st(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",48),t.TgZ(1,"div",57),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"nz-switch",68),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editEvent.status=n}),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,3,"STATUS")),t.xp6(3),t.Q6J("ngModel",e.editEvent.status),t.xp6(2),t.Oqu(t.lcZ(9,5,e.editEvent.status?"ENABLED":"DISABLED"))}}const lt=function(){return["ThirdPartyRTU","ThirdPartyTCP","MeterWMbus"]};function ct(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",43),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",44),t.TgZ(4,"button",45),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDrawerClose()}),t._UZ(5,"i",46),t.qZA(),t.TgZ(6,"form",null,47),t.TgZ(8,"div",48),t.TgZ(9,"label",49),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"app-validate",50),t.TgZ(13,"input",51,52),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().editEvent.name=n}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",48),t.TgZ(16,"label",49),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"app-select",53),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().editEvent.device_type=n})("callbackChange",function(){return t.CHM(e),t.oxw().deviceTypeChanged()}),t.qZA(),t.qZA(),t.TgZ(20,"div",48),t.TgZ(21,"label",49),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"app-select",54),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().editEvent.object_ids=n})("callbackChange",function(){return t.CHM(e),t.oxw().deviceChanged()}),t.qZA(),t.qZA(),t.TgZ(25,"div",48),t.TgZ(26,"label",49),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"app-select",55),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().editEvent.event_type=n})("callbackChange",function(){return t.CHM(e),t.oxw().eventTypeChanged()}),t.qZA(),t.qZA(),t.YNc(30,at,5,7,"div",56),t.YNc(31,it,5,7,"div",56),t.YNc(32,ot,8,12,"div",56),t.YNc(33,rt,7,9,"div",56),t.TgZ(34,"div",48),t.TgZ(35,"div",57),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"div"),t.TgZ(40,"nz-switch",58),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().editEvent.raise_alarm=n}),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",48),t.TgZ(45,"div",57),t.TgZ(46,"label"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div"),t.TgZ(50,"nz-switch",59),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().editEvent.send_email=n}),t.qZA(),t.TgZ(51,"span"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(54,st,10,7,"div",56),t.TgZ(55,"div",48),t._UZ(56,"label"),t.TgZ(57,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDrawerClose(!0)}),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"button",61),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().saveEvent()}),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(7),a=t.MAs(14),n=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,37,n.editEvent.id?"EDIT_EVENT":"ADD_NEW_EVENT")," "),t.xp6(9),t.hij("",t.lcZ(11,39,"NAME"),":"),t.xp6(2),t.Q6J("field",a),t.xp6(1),t.Q6J("ngModel",n.editEvent.name),t.xp6(4),t.hij("",t.lcZ(18,41,"DEVICE_TYPE"),":"),t.xp6(2),t.Q6J("model",n.editEvent.device_type)("validators",t.DdM(59,D))("options",n.deviceTypes)("validators",t.DdM(60,D)),t.xp6(3),t.hij("",t.lcZ(23,43,"DEVICE"),":"),t.xp6(2),t.Q6J("model",n.editEvent.object_ids)("options",n.eventDevices)("multiple",!0)("clearable",!0)("validators",t.DdM(61,D)),t.xp6(3),t.hij("",t.lcZ(28,45,"EVENT_TYPE"),":"),t.xp6(2),t.Q6J("model",n.editEvent.event_type)("options",n.eventTypes)("validators",t.DdM(62,D)),t.xp6(1),t.Q6J("ngIf",4!==n.editEvent.event_type&&5!==n.editEvent.event_type&&t.DdM(63,lt).includes(n.editEvent.device_type)),t.xp6(1),t.Q6J("ngIf",4!==n.editEvent.event_type&&5!==n.editEvent.event_type),t.xp6(1),t.Q6J("ngIf",n.editEvent.event_type<3),t.xp6(1),t.Q6J("ngIf",3!==n.editEvent.event_type),t.xp6(4),t.Oqu(t.lcZ(38,47,"ALARM")),t.xp6(3),t.Q6J("ngModel",n.editEvent.raise_alarm),t.xp6(2),t.Oqu(t.lcZ(43,49,n.editEvent.raise_alarm?"ENABLED":"DISABLED")),t.xp6(5),t.Oqu(t.lcZ(48,51,"EMAIL_NOTIFICATION")),t.xp6(3),t.Q6J("ngModel",n.editEvent.send_email),t.xp6(2),t.Oqu(t.lcZ(53,53,n.editEvent.send_email?"ENABLED":"DISABLED")),t.xp6(2),t.Q6J("ngIf",!n.editEvent.id),t.xp6(3),t.uIk("id","drawer_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(59,55,"CANCEL")),t.xp6(2),t.Q6J("nzLoading",n.saving)("disabled",n.saving)("form",e),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(62,57,n.editEvent.id?"SAVE_EVENT":"ADD_EVENT_MODAL"))}}let _t=(()=>{class o{constructor(e,a,n,i,s){this.translate=e,this.toastr=a,this.modalService=n,this.eventsService=i,this.drawerService=s,this.id="diagnostic_configuration",this.loadingData=!0,this.saving=!1,this.editMode=!1,this.defaultEvent={name:"",device_type:"CurrentSensor",event_type:1,threshold:0,raise_alarm:0,send_email:0,time_delay:0,status:1}}ngOnInit(){this.getData(),this.deviceTypes=[{id:"CurrentSensor",text:"CURRENT_SENSORS"},{id:"IoModule",text:"IO_MODULES"},{id:"AuxiliaryContact",text:"SSD"},{id:"ThirdPartyRTU",text:"MODBUS_RTU_DEVICES"},{id:"ThirdPartyTCP",text:"MODBUS_TCP_DEVICES"},{id:"MeterWMbus",text:"WIRELESS_MBUS_METERS"},{id:"Group",text:"GROUPS"}],this.yesNo=[{id:0,text:"NO"},{id:1,text:"YES"}],this.enableDisable=[{id:0,text:"DISABLED"},{id:1,text:"ENABLED"}],this.eventTypesAll=m.uS,this.eventTypesAllFilter=this.eventTypesAll.filter(e=>!("System event"===e.text||"Automation"===e.text))}onDrawerClose(e){this.drawerService.hide(),e?this.tempEvent={}:this.editMode=!!this.tempEvent}toggleEnabled(e){let a;a=e.status?"disable":"enable";const n=this.rows,i=this.rows.findIndex(c=>c.id===e.id);n[i].status=n[i].status=Number(!n[i].status),this.modalService.showConfirm(this.translate.instant(e.status?"EVENT_DISABLE":"EVENT_ENABLE",{name:"<strong>"+e.name+"</strong>"}),()=>{this.modalService.setLoading(!0),e.status=Number(!e.status),this.eventsService.toggleEventStatus([e.id],[e.device_type],a).subscribe(()=>{this.toastr.success(this.translate.instant(e.status?"EVENT_ENABLE_CONFIRM_SUCCESS":"EVENT_DISABLE_CONFIRM_SUCCESS",{name:"<strong>"+e.name+"</strong>"})),this.modalService.hide()},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.modalService.hide()})})}toggleEnableDisable(e,a){const n=[],i=[];let s,c,u;e.tableData.forEach(g=>{g.selected&&(n.push(g.id),g.device_type&&(i.includes(g.device_type)||i.push(g.device_type)))}),n.length>1?(s=this.translate.instant("EVENT_CHANGE_STATUS_ALL",{action:"<strong>"+a+"</strong>"}),c=this.translate.instant("EVENT_STATUS_CHANGE_CONFIRM_SUCCESS_ALL",{action:"<strong>"+a+"d</strong>"})):(u=this.rows.findIndex(g=>g.id===n[0]),s=this.translate.instant("EVENT_STATUS_CHANGE",{name:"<strong>"+this.rows[u].name+"</strong>",action:"<strong>"+a+"</strong>"}),c=this.translate.instant("EVENT_STATUS_CHANGE_CONFIRM_SUCCESS",{name:"<strong>"+this.rows[u].name+"</strong>",action:"<strong>"+a+"d</strong>"})),this.modalService.showConfirm(this.translate.instant(s),()=>{this.modalService.setLoading(!0),this.eventsService.toggleEventStatus(n,i,a).subscribe(()=>{const g=this.rows;g.forEach(k=>k.selected=!1),n.forEach(k=>{const P=this.rows.findIndex(Ut=>Ut.id===k);g[P].status="enable"===a?1:0,this.rows=[...g],g[P].selected=!0}),this.toastr.success(this.translate.instant(c)),this.modalService.hide()},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.modalService.hide()})})}trackByFun(e,a){return a.id}getData(){this.loadingData=!0,this.eventsService.getEventsConfiguration().subscribe(e=>{this.rows=e.events,this.devices=e.devices,this.rows.forEach(a=>{const n=this.devices.find(s=>(a.object_ids||[]).includes(s.object_id));n&&(a.device_type="MeterABB"===n.device_type?"ThirdPartyRTU":n.device_type),a.device_names=this.devices.filter(s=>{var c;return null===(c=a.object_ids)||void 0===c?void 0:c.includes(s.object_id)}).map(s=>s.name).join(", ");const i=this.devices.find(s=>{var c;return null===(c=a.object_ids)||void 0===c?void 0:c.includes(s.object_id)});if(i&&i.variables){const s=i.variables.find(c=>a.variable===c.variable);s&&(a.unit=s.unit)}}),this.loadingData=!1},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR"))})}addEventDrawer(e){if(this.toastr.clear(),this.editMode&&!e)this.editEvent=0===Object.keys(this.tempEvent).length?Object.assign({},this.defaultEvent):this.tempEvent;else if(e){let a=null;if(e.device_type&&["ThirdPartyRTU","ThirdPartyTCP","MeterWMbus","Group"].includes(e.device_type)&&e.object_ids){const n=this.devices.filter(i=>{var s;return null===(s=e.object_ids)||void 0===s?void 0:s.includes(i.object_id)}).find(i=>i.variables.find(s=>s.variable===e.variable));n&&n.variables.filter(i=>i.variable===e.variable).forEach(i=>{a||(a=i.category)})}this.editEvent=Object.assign(Object.assign({},e),{category:a})}else this.editEvent=Object.assign({},this.defaultEvent),this.tempEvent=this.editEvent;this.checkEventDevices(),this.checkCategories(),this.checkEventTypes(),this.drawerService.showDrawer(this.eventDrawer).subscribe(a=>{this.editMode=!!this.tempEvent})}saveEvent(){let e,a;this.saving=!0,this.editEvent.id?(a="EVENTS_EDIT_SUCCESS",e=this.eventsService.setEvent(this.editEvent)):(a="EVENTS_ADD_SUCCESS",e=this.eventsService.saveEvent(this.editEvent)),e.subscribe(()=>{this.toastr.success(this.translate.instant(a,{name:"<strong>"+this.editEvent.name+"</strong>"})),this.getData(),this.saving=!1,this.drawerService.hide()},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.saving=!1}),this.tempEvent=Object.assign({},this.defaultEvent)}removeEvent(e){const a=[],n=[];let i,s,c;e.tableData.forEach(u=>{u.selected&&(a.push(u.id),u.device_type&&(n.includes(u.device_type)||n.push(u.device_type)))}),a.length>1?(i=this.translate.instant("EVENT_REMOVE_ALL"),s=this.translate.instant("EVENTS_REMOVE_SUCCESS")):(c=this.rows.findIndex(u=>u.id===a[0]),i=this.translate.instant("EVENT_REMOVE_ONE",{name:"<strong>"+this.rows[c].name+"</strong>"}),s=this.translate.instant("EVENT_REMOVE_SUCCESS",{name:"<strong>"+this.rows[c].name+"</strong>"})),this.modalService.showConfirm(i,()=>{this.modalService.setLoading(!0),this.eventsService.remove(a,n).subscribe(()=>{this.modalService.hide(),this.getData(),this.toastr.success(s)},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.modalService.hide()})})}deviceTypeChanged(){this.editEvent.object_ids=[],this.editEvent.category=null,this.editEvent.variable=null,this.categories=[],this.checkEventDevices(),this.checkEventTypes(),this.checkVariables()}checkCategories(){if(this.editEvent.object_ids){if(["ThirdPartyRTU","ThirdPartyTCP","MeterWMbus"].includes(this.editEvent.device_type)){const e=[];this.devices.filter(a=>{var n;return null===(n=this.editEvent.object_ids)||void 0===n?void 0:n.includes(a.object_id)}).forEach(a=>{a.variables.forEach(n=>{e.find(s=>s.id===n.category)||e.push({id:n.category,text:n.category})})}),this.categories=e}this.checkVariables()}}checkEventTypes(){this.eventTypes=[this.eventTypesAll[1],this.eventTypesAll[2]],"IoModule"!==this.editEvent.device_type&&"AuxiliaryContact"!==this.editEvent.device_type&&[3,6,7].includes(this.editEvent.event_type)&&(this.editEvent.event_type=1),"Group"===this.editEvent.device_type&&[4,5].includes(this.editEvent.event_type)&&(this.editEvent.event_type=1),("IoModule"===this.editEvent.device_type||"AuxiliaryContact"===this.editEvent.device_type)&&this.eventTypes.push(this.eventTypesAll[3],this.eventTypesAll[6],this.eventTypesAll[7]),"Group"!==this.editEvent.device_type&&this.eventTypes.push(this.eventTypesAll[4],this.eventTypesAll[5])}checkEventDevices(){const e=[this.editEvent.device_type];"ThirdPartyRTU"===this.editEvent.device_type&&e.push("MeterABB"),this.eventDevices=this.devices.filter(a=>e.includes(a.device_type)).map(a=>({id:a.object_id,name:a.name}))}deviceChanged(){this.editEvent.category=null,this.editEvent.variable=null,this.checkCategories()}eventTypeChanged(){("IoModule"===this.editEvent.device_type||"AuxiliaryContact"===this.editEvent.device_type)&&(this.checkVariables(),this.variables.find(a=>a.id===this.editEvent.variable)||(this.editEvent.variable=null)),3===this.editEvent.event_type&&(this.editEvent.time_delay=0)}categoryChanged(){this.editEvent.variable=null,this.checkVariables()}checkVariables(){if("CurrentSensor"===this.editEvent.device_type)this.variables=[{id:"currentTrms",text:"TRMS",unit_name:"A"},{id:"currentAc",text:"AC",unit_name:"A"},{id:"currentDc",text:"DC",unit_name:"A"},{id:"activePowerTotal",text:"ACTIVE_POWER",unit_name:"W"},{id:"activeEnergyImportTotal",text:"ENERGY",unit_name:"kWh"}];else if("IoModule"===this.editEvent.device_type){this.variables=[];const e=[],a=[],n=[];for(let i=1;i<=4;i++)e.push({id:`port${i}PulseCounterAccumulated`,text:this.translate.instant("PULSE_COUNTER")+" "+this.translate.instant("PORT")+" "+i}),a.push({id:`port${i}State`,text:this.translate.instant("TYPE_STATUS_CHANGE")+" "+this.translate.instant("PORT")+" "+i}),n.push({id:`port${i}PulseValue`,text:this.translate.instant("PULSE_VALUE")+" "+this.translate.instant("PORT")+" "+i});[1,2].includes(this.editEvent.event_type)?this.variables=[...e,...n]:[3,6,7].includes(this.editEvent.event_type)&&(this.variables=[...a])}else if("AuxiliaryContact"===this.editEvent.device_type){this.variables=[];const e=[],a=[],n=[{id:"inputVoltage",text:this.translate.instant("INPUT_VOLTAGE"),unit_name:"V"}];for(let i=1;i<=2;i++)a.push({id:`switch${i}`,text:this.translate.instant("SWITCH")+i});for(let i=1;i<=4;i++)e.push({id:`temperature${i}`,text:this.translate.instant("TEMPERATURE")+i,unit_name:"C"});[1,2].includes(this.editEvent.event_type)?this.variables=[...e,...n]:[3,6,7].includes(this.editEvent.event_type)&&(this.variables=[...a])}else if(["ThirdPartyRTU","ThirdPartyTCP","MeterWMbus"].includes(this.editEvent.device_type)){const e=[];this.devices.filter(a=>{var n;return null===(n=this.editEvent.object_ids)||void 0===n?void 0:n.includes(a.object_id)}).forEach(a=>{a.variables.filter(n=>n.category===this.editEvent.category).forEach(n=>{if(!e.find(s=>s.id===n.variable)){let s=!1;this.devices.filter(c=>{var u;return null===(u=this.editEvent.object_ids)||void 0===u?void 0:u.includes(c.object_id)}).forEach(c=>{c.variables.find(u=>"string"===u.dataType&&u.variable===n.variable)&&(s=!0)}),s||e.push({id:n.variable,text:n.variable,unit_name:n.unit})}})}),this.variables=e}else if(["Group"].includes(this.editEvent.device_type)){const e=[];this.devices.filter(a=>{var n;return null===(n=this.editEvent.object_ids)||void 0===n?void 0:n.includes(a.object_id)}).forEach(a=>{a.variables.forEach(n=>{e.find(s=>s.id===n.variable)||e.push({id:n.variable,text:n.variable,unit_name:n.unit})})}),this.variables=e}else this.variables=[];this.measureChanged()}measureChanged(){const e=this.variables.find(a=>a.id===this.editEvent.variable);this.editEvent.unit=e?e.unit_name:""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.sK),t.Y36(p._),t.Y36(h.Z),t.Y36(C),t.Y36(x.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-diagnostic-configuration"]],viewQuery:function(e,a){if(1&e&&t.Gf(K,5),2&e){let n;t.iGM(n=t.CRH())&&(a.eventDrawer=n.first)}},hostVars:1,hostBindings:function(e,a){2&e&&t.uIk("id",a.id)},decls:9,vars:5,consts:[[1,"section-header"],["nz-button","","nzType","primary","id","add_new_event_button",3,"click"],[1,"icon_abb_16","icon-abb_plus_16"],[4,"ngIf"],["class","section-content",4,"ngIf"],["eventDrawer",""],[1,"section-content"],[3,"initSort","data"],["table",""],["class","table-selected-buttons",4,"ngIf"],["nzTableLayout","fixed",3,"nzData","nzFrontPagination","nzScroll","nzNoResult"],["nzTable",""],[3,"nzSortOrderChange"],["nzWidth","50px","id","table_all_selected",3,"nzLeft","nzChecked","nzIndeterminate","nzCheckedChange"],["nzWidth","80px",3,"nzLeft","nzColumnKey","nzSortFn","nzSortDirections","nzSortOrder"],["nzWidth","200px",3,"nzColumnKey","nzSortFn","nzSortDirections"],["nzWidth","115px",3,"nzColumnKey","nzSortFn","nzSortDirections"],["nzWidth","100px",3,"nzColumnKey","nzSortFn","nzSortDirections"],["nzWidth","150px","nzWidth","150px",3,"nzColumnKey","nzSortFn","nzSortDirections"],["nzWidth","80px"],[1,"filters"],[3,"nzLeft"],[1,"input",3,"nzLeft"],["type","text",3,"input"],[1,"input"],["inputId","status_filter","inputClass","no-validate",3,"options","showSearch","clearable","model","modelChange","callbackChange"],["inputId","send_email_filter","inputClass","no-validate",3,"options","showSearch","clearable","model","modelChange","callbackChange"],["inputId","raise_alarm_filter","inputClass","no-validate",3,"options","showSearch","clearable","model","modelChange","callbackChange"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"table-selected-buttons"],["id","table_nr_of_selected"],["nz-button","","nzType","primary","id","table_selected_remove_button",1,"black",3,"click"],[1,"icon_abb_16","icon-abb_trash_16"],["nz-button","","nzType","default","id","table_selected_enable_button",3,"click"],[1,"enable-icon-button"],["nz-button","","nzType","text","id","table_selected_disable_button",3,"click"],[1,"disable-icon-button"],[3,"nzLeft","id","nzChecked","nzCheckedChange"],["nzEllipsis",""],["nzSize","small",3,"nzControl","ngModel","ngModelChange","click"],[1,"icons"],["nz-button","","nzTooltipPlacement","left","nz-tooltip","",3,"id","nzTooltipTitle","click"],[1,"icon_abb_16","icon-abb_edit_16"],[1,"drawer-title","text-line"],[1,"drawer-body"],["tabIndex","-1","nz-button","",1,"drawer-button-close",3,"click"],[1,"icon_abb_16","icon-abb_close_16"],["formAdd","ngForm"],[1,"form-group"],[1,"label-required"],[3,"field"],["type","text","maxlength","255","id","event_name_input","name","eventName","required","",3,"ngModel","ngModelChange"],["eventName","ngModel"],["inputId","device_type_select",3,"model","validators","options","modelChange","callbackChange"],["inputId","event_device_select",3,"model","options","multiple","clearable","validators","modelChange","callbackChange"],["inputId","event_type_select",3,"model","options","validators","modelChange","callbackChange"],["class","form-group",4,"ngIf"],[1,"switch-label-container"],["nzSize","small","id","raise_alarm_switch","name","raiseAlarmSwitch",3,"ngModel","ngModelChange"],["nzSize","small","id","send_email_switch","name","sendEmailSwitch",3,"ngModel","ngModelChange"],["type","button","nz-button","",3,"click"],["type","submit","nz-button","","nzType","primary",3,"nzLoading","disabled","form","appFormButtonClick"],["inputId","category_select",3,"model","options","validators","modelChange","callbackChange"],["inputId","variable_select",3,"model","options","validators","modelChange","callbackChange"],["name","thresholdInput","id","threshold_input_wrapper","nzId","threshold_input",3,"ngModel","nzMin","nzStep","nzMax","required","ngModelChange"],["thresholdInput","ngModel"],["name","timeDelayInput","id","time_delay_input_wrapper","nzId","time_delay_input",3,"ngModel","nzMin","nzStep","nzMax","required","ngModelChange"],["timeDelayInput","ngModel"],["nzSize","small","id","status_switch","name","statusSwitch",3,"ngModel","ngModelChange"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return a.addEventDrawer()}),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.YNc(5,j,1,0,"app-loader",3),t.YNc(6,nt,68,112,"div",4),t.YNc(7,ct,63,64,"ng-template",null,5,t.W1O)),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"ADD_NEW_EVENT")),t.xp6(2),t.Q6J("ngIf",a.loadingData),t.xp6(1),t.Q6J("ngIf",!a.loadingData))},directives:[L.ix,N.dQ,z.w,E.O5,y.R,O.a,_.N8,_.Om,_.$Z,_.Uo,_._C,_.qn,_.g6,_.qD,w.H,_.p0,E.sg,_.h7,_.ky,F.i,Z.JJ,Z.On,Q.SY,Z._Y,Z.JL,Z.F,Y.P,Z.Fj,Z.nD,Z.Q7,B._,W.b],pipes:[d.X$,q.h,G.Z],styles:[".section-content[_ngcontent-%COMP%]{overflow:hidden}"]}),o})();var R=l(6801),U=l(283);function dt(o,r){1&o&&t._UZ(0,"app-loader")}function pt(o,r){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"valueFromId"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"toLocaleString"),t.qZA(),t.qZA()),2&o){const e=r.$implicit,a=t.oxw(2);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.hij("",8!==e.event_type&&9!==e.event_type?e.device_name:"-"," "),t.xp6(2),t.Oqu(0!==e.event_type&&4!==e.event_type&&5!==e.event_type&&8!==e.event_type&&9!==e.event_type?t.lcZ(7,6,e.variable):"-"),t.xp6(3),t.Oqu(t.Dn7(10,8,e.event_type,a.types,"text")),t.xp6(3),t.Oqu(4!==e.event_type&&5!==e.event_type&&8!==e.event_type&&9!==e.event_type?e.value:"-"),t.xp6(2),t.Oqu(t.lcZ(15,12,e.timestamp))}}const ut=function(){return{key:"timestamp",value:"descend"}},gt=function(o,r){return{x:o,y:r}},H=function(){return["ascend","descend"]};function ht(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"app-table",7,8),t.TgZ(3,"nz-table",9,10),t.ALo(5,"translate"),t.TgZ(6,"thead",11),t.NdJ("nzSortOrderChange",function(n){return t.CHM(e),t.MAs(2).sort(n)}),t.TgZ(7,"tr"),t.TgZ(8,"th",12),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",13),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th",14),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.TgZ(26,"tr",15),t.TgZ(27,"th",16),t.TgZ(28,"input",17),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"name","contains")}),t.qZA(),t.qZA(),t.TgZ(29,"th",16),t.TgZ(30,"input",17),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"device_name","contains")}),t.qZA(),t.qZA(),t.TgZ(31,"th"),t.TgZ(32,"input",17),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"variable","contains")}),t.qZA(),t.qZA(),t.TgZ(33,"th"),t.TgZ(34,"app-select",18),t.NdJ("modelChange",function(n){return t.CHM(e),t.MAs(2).filtersModel.event_type=n})("callbackChange",function(){t.CHM(e);const n=t.MAs(2);return n.filter(n.filtersModel.event_type,"event_type","equals")}),t.qZA(),t.qZA(),t.TgZ(35,"th"),t.TgZ(36,"input",17),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"value","contains")}),t.qZA(),t.qZA(),t._UZ(37,"th"),t.qZA(),t.qZA(),t.TgZ(38,"tbody"),t.YNc(39,pt,16,14,"tr",19),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(2),a=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("initSort",t.DdM(37,ut))("data",n.rows),t.xp6(2),t.Q6J("nzData",e.tableData)("nzScroll",t.WLB(38,gt,e.tableWidth,e.tableHeight))("nzNoResult",t.lcZ(5,23,"NO_EVENTS")),t.xp6(5),t.Q6J("nzColumnKey","name")("nzSortFn",!0)("nzSortDirections",t.DdM(41,H)),t.xp6(1),t.Oqu(t.lcZ(10,25,"NAME")),t.xp6(3),t.Oqu(t.lcZ(13,27,"DEVICE")),t.xp6(3),t.Oqu(t.lcZ(16,29,"MEASURE")),t.xp6(3),t.Oqu(t.lcZ(19,31,"TYPE")),t.xp6(3),t.Oqu(t.lcZ(22,33,"VALUE")),t.xp6(2),t.Q6J("nzColumnKey","timestamp")("nzSortFn",!0)("nzSortDirections",t.DdM(42,H))("nzSortOrder","descend"),t.xp6(1),t.Oqu(t.lcZ(25,35,"DATE_AND_TIME")),t.xp6(10),t.Q6J("options",n.types)("showSearch",!1)("clearable",!0)("model",e.filtersModel.event_type),t.xp6(5),t.Q6J("ngForOf",a.data)}}let vt=(()=>{class o{constructor(e,a,n){this.translate=e,this.toastr=a,this.eventsService=n,this.id="diagnostic_events_log",this.loadingData=!0}ngOnInit(){this.types=m.uS}getHistoricalSamples(e,a){this.loadingData=!0;const n={startDate:Math.floor(new Date(e).getTime()/1e3),endDate:Math.floor(new Date(a).getTime()/1e3)};this.eventsService.getHistoricalValues(n).subscribe(i=>{this.rows=i,this.loadingData=!1},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR"))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.sK),t.Y36(p._),t.Y36(C))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-diagnostic-events-log"]],hostVars:1,hostBindings:function(e,a){2&e&&t.uIk("id",a.id)},decls:6,vars:4,consts:[[1,"section-header"],[1,"controls",3,"hidden"],["datesStorageKey","EventsHistoryDates",3,"callbackChange"],["pickRange",""],[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"initSort","data"],["table",""],[3,"nzData","nzScroll","nzNoResult"],["nzTable",""],[3,"nzSortOrderChange"],[3,"nzColumnKey","nzSortFn","nzSortDirections"],["nzWidth","200px"],[3,"nzColumnKey","nzSortFn","nzSortDirections","nzSortOrder"],[1,"filters"],[1,"input"],["type","text",3,"input"],["inputId","status_filter","inputClass","no-validate",3,"options","showSearch","clearable","model","modelChange","callbackChange"],[4,"ngFor","ngForOf"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"app-pick-range",2,3),t.qZA(),t.qZA(),t.YNc(4,dt,1,0,"app-loader",4),t.YNc(5,ht,40,43,"div",5)),2&e&&(t.xp6(1),t.Q6J("hidden",!a.rows),t.xp6(1),t.Q6J("callbackChange",a.getHistoricalSamples.bind(a)),t.xp6(2),t.Q6J("ngIf",a.loadingData),t.xp6(1),t.Q6J("ngIf",!a.loadingData))},directives:[R.P,E.O5,y.R,O.a,_.N8,_.Om,_.$Z,_.Uo,_._C,_.qD,w.H,_.p0,E.sg],pipes:[d.X$,q.h,U.U],styles:[".section-content[_ngcontent-%COMP%]{overflow:hidden;padding-bottom:0}"]}),o})();var I=l(868);function mt(o,r){1&o&&(t.TgZ(0,"a",4),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"INBOX")," "))}function At(o,r){1&o&&(t.TgZ(0,"a",5),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACKNOWLEDGED")," "))}let Tt=(()=>{class o{constructor(){this.id="diagnostic_alarms"}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-diagnostic-alarms"]],hostVars:1,hostBindings:function(e,a){2&e&&t.uIk("id",a.id)},decls:6,vars:1,consts:[["nzType","card","nzLinkRouter","",3,"nzAnimated"],["id","menu_diagnostic_alarms_inbox","nz-tab-link","","routerLink","/diagnostic/alarms/inbox",4,"nzTabLink"],["id","menu_diagnostic_alarms_acknowledged","nz-tab-link","","routerLink","/diagnostic/alarms/acknowledged",4,"nzTabLink"],[1,"router-outlet"],["id","menu_diagnostic_alarms_inbox","nz-tab-link","","routerLink","/diagnostic/alarms/inbox"],["id","menu_diagnostic_alarms_acknowledged","nz-tab-link","","routerLink","/diagnostic/alarms/acknowledged"]],template:function(e,a){1&e&&(t.TgZ(0,"nz-tabset",0),t.TgZ(1,"nz-tab"),t.YNc(2,mt,3,3,"a",1),t.qZA(),t.TgZ(3,"nz-tab"),t.YNc(4,At,3,3,"a",2),t.qZA(),t.qZA(),t._UZ(5,"router-outlet",3)),2&e&&t.Q6J("nzAnimated",!1)},directives:[I.xH,I.xw,I.Fx,I.Ao,v.yS,v.lC],pipes:[d.X$],styles:[""]}),o})(),J=(()=>{class o{constructor(e){this.http=e}getAlarms(e){return this.http.post("api/alarms",e)}acknowledgeAlarms(e){return this.http.post("api/alarms/acknowledge",e,{responseType:"text"})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(A.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Ct=["table"];function Et(o,r){1&o&&t._UZ(0,"app-loader")}function ft(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",21),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(2);return t.oxw().acknowledgeAlarms(n)}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA()}if(2&o){t.oxw();const e=t.MAs(2);t.xp6(2),t.AsE("",e.nrOfSelected," ",t.lcZ(3,3,"SELECTED"),""),t.xp6(3),t.Oqu(t.lcZ(6,5,"ACKNOWLEDGE"))}}function Zt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",22),t.NdJ("nzCheckedChange",function(n){const s=t.CHM(e).$implicit;return t.oxw(),t.MAs(2).onItemSelected(s,n)}),t.qZA(),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"valueFromId"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"toLocaleString"),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("nzChecked",e.selected),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.hij("",8!==e.event_type&&9!==e.event_type?e.device_name:"-"," "),t.xp6(2),t.Oqu(0!==e.event_type&&4!==e.event_type&&5!==e.event_type&&8!==e.event_type&&9!==e.event_type?t.lcZ(8,7,e.variable):"-"),t.xp6(3),t.Oqu(t.Dn7(11,9,e.event_type,a.types,"text")),t.xp6(3),t.Oqu(4!==e.event_type&&5!==e.event_type&&8!==e.event_type&&9!==e.event_type?e.value:"-"),t.xp6(2),t.Oqu(t.lcZ(16,13,e.timestamp))}}const xt=function(){return{key:"timestamp",value:"descend"}},Lt=function(o,r){return{x:o,y:r}},b=function(){return["ascend","descend"]};function yt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"app-table",7,8),t.YNc(3,ft,7,7,"div",4),t.TgZ(4,"nz-table",9,10),t.ALo(6,"translate"),t.TgZ(7,"thead",11),t.NdJ("nzSortOrderChange",function(n){return t.CHM(e),t.MAs(2).sort(n)}),t.TgZ(8,"tr"),t.TgZ(9,"th",12),t.NdJ("nzCheckedChange",function(n){return t.CHM(e),t.MAs(2).onAllSelected(n)}),t.qZA(),t.TgZ(10,"th",13),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",14),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",13),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th",13),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",13),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th",15),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"tr",16),t._UZ(29,"th"),t.TgZ(30,"th",17),t.TgZ(31,"input",18),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"name","contains")}),t.qZA(),t.qZA(),t.TgZ(32,"th",17),t.TgZ(33,"input",18),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"device_name","contains")}),t.qZA(),t.qZA(),t.TgZ(34,"th"),t.TgZ(35,"input",18),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"variable","contains")}),t.qZA(),t.qZA(),t.TgZ(36,"th"),t.TgZ(37,"app-select",19),t.NdJ("modelChange",function(n){return t.CHM(e),t.MAs(2).filtersModel.event_type=n})("callbackChange",function(){t.CHM(e);const n=t.MAs(2);return n.filter(n.filtersModel.event_type,"event_type","equals")}),t.qZA(),t.qZA(),t.TgZ(38,"th"),t.TgZ(39,"input",18),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"value","contains")}),t.qZA(),t.qZA(),t._UZ(40,"th"),t.qZA(),t.qZA(),t.TgZ(41,"tbody"),t.YNc(42,Zt,17,15,"tr",20),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(2),a=t.MAs(5),n=t.oxw();t.xp6(1),t.Q6J("initSort",t.DdM(52,xt))("data",n.rows),t.xp6(2),t.Q6J("ngIf",e.nrOfSelected>0),t.xp6(1),t.Q6J("nzData",e.tableData)("nzScroll",t.WLB(53,Lt,e.tableWidth,e.tableHeight))("nzNoResult",t.lcZ(6,38,"NO_ALARMS")),t.xp6(5),t.Q6J("nzChecked",e.selected)("nzIndeterminate",e.indeterminate),t.xp6(1),t.Q6J("nzColumnKey","name")("nzSortFn",!0)("nzSortDirections",t.DdM(56,b)),t.xp6(1),t.Oqu(t.lcZ(12,40,"NAME")),t.xp6(2),t.Q6J("nzColumnKey","device_name")("nzSortFn",!0)("nzSortDirections",t.DdM(57,b)),t.xp6(1),t.Oqu(t.lcZ(15,42,"DEVICE")),t.xp6(2),t.Q6J("nzColumnKey","variable")("nzSortFn",!0)("nzSortDirections",t.DdM(58,b)),t.xp6(1),t.Oqu(t.lcZ(18,44,"MEASURE")),t.xp6(2),t.Q6J("nzColumnKey","type")("nzSortFn",!0)("nzSortDirections",t.DdM(59,b)),t.xp6(1),t.Oqu(t.lcZ(21,46,"TYPE")),t.xp6(2),t.Q6J("nzColumnKey","value")("nzSortFn",!0)("nzSortDirections",t.DdM(60,b)),t.xp6(1),t.Oqu(t.lcZ(24,48,"VALUE")),t.xp6(2),t.Q6J("nzColumnKey","timestamp")("nzSortFn",!0)("nzSortDirections",t.DdM(61,b))("nzSortOrder","descend"),t.xp6(1),t.Oqu(t.lcZ(27,50,"DATE_AND_TIME")),t.xp6(11),t.Q6J("options",n.types)("showSearch",!1)("clearable",!0)("model",e.filtersModel.event_type),t.xp6(5),t.Q6J("ngForOf",a.data)}}let Dt=(()=>{class o{constructor(e,a,n,i){this.translate=e,this.toastr=a,this.alarmsService=n,this.modalService=i,this.id="diagnostic_alarms_inbox",this.loadingData=!0}ngOnInit(){this.types=m.uS}getAlarms(e,a){this.loadingData=!0;const n={startDate:Math.floor(new Date(e).getTime()/1e3),endDate:Math.floor(new Date(a).getTime()/1e3),acknowledged:!1};this.alarmsService.getAlarms(n).subscribe(i=>{this.rows=i,this.loadingData=!1},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR"))})}acknowledgeAlarms(e){const a=[];let n,i;e.tableData.forEach(s=>{s.selected&&a.push(s.name)}),a.length>1?(n=this.translate.instant("ALARMS_ACKNOWLEDGE_ALL"),i=this.translate.instant("ALARMS_ACKNOWLEDGE_ALL_SUCCESS")):(n=this.translate.instant("ALARMS_ACKNOWLEDGE",{name:"<strong>"+a[0]+"</strong>"}),i=this.translate.instant("ALARMS_ACKNOWLEDGE_SUCCESS",{name:"<strong>"+a[0]+"</strong>"})),this.toastr.clear(),this.modalService.showConfirm(n,()=>{this.modalService.setLoading(!0);const s=this.table._data.filter(c=>c.selected).map(c=>({object_id:8===c.event_type?"automation":c.object_id,entry_id:c.entry_id,timestamp:c.timestamp}));this.alarmsService.acknowledgeAlarms(s).subscribe(()=>{this.table._data.forEach(c=>{if(c.selected){c.selected=!1;const u=this.rows.find(g=>c.entry_id===g.entry_id&&c.object_id===g.object_id&&c.timestamp===g.timestamp);u&&(u.acknowledged=!0)}}),this.rows=[...this.rows.filter(c=>!c.acknowledged)],this.modalService.hide(),this.toastr.success(i),this.table.refreshSelectedStatus(),this.loadingData=!1},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.modalService.hide()})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.sK),t.Y36(p._),t.Y36(J),t.Y36(h.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-diagnostic-alarms-inbox"]],viewQuery:function(e,a){if(1&e&&t.Gf(Ct,5),2&e){let n;t.iGM(n=t.CRH())&&(a.table=n.first)}},hostVars:1,hostBindings:function(e,a){2&e&&t.uIk("id",a.id)},decls:6,vars:4,consts:[[1,"section-header"],[1,"controls",3,"hidden"],["datesStorageKey","AlarmsHistoryDates",3,"callbackChange"],["pickRange",""],[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"initSort","data"],["table",""],[3,"nzData","nzScroll","nzNoResult"],["nzTable",""],[3,"nzSortOrderChange"],["id","table_all_selected","nzWidth","50px",3,"nzChecked","nzIndeterminate","nzCheckedChange"],[3,"nzColumnKey","nzSortFn","nzSortDirections"],["nzWidth","200px",3,"nzColumnKey","nzSortFn","nzSortDirections"],[3,"nzColumnKey","nzSortFn","nzSortDirections","nzSortOrder"],[1,"filters"],[1,"input"],["type","text",3,"input"],["inputId","status_filter","inputClass","no-validate",3,"options","showSearch","clearable","model","modelChange","callbackChange"],[4,"ngFor","ngForOf"],["nz-button","","nzType","primary",3,"click"],[3,"nzChecked","nzCheckedChange"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"app-pick-range",2,3),t.qZA(),t.qZA(),t.YNc(4,Et,1,0,"app-loader",4),t.YNc(5,yt,43,62,"div",5)),2&e&&(t.xp6(1),t.Q6J("hidden",!a.rows),t.xp6(1),t.Q6J("callbackChange",a.getAlarms.bind(a)),t.xp6(2),t.Q6J("ngIf",a.loadingData),t.xp6(1),t.Q6J("ngIf",!a.loadingData))},directives:[R.P,E.O5,y.R,O.a,L.ix,N.dQ,z.w,_.N8,_.Om,_.$Z,_.Uo,_._C,_.g6,_.qD,w.H,_.p0,E.sg,_.h7],pipes:[d.X$,q.h,U.U],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.section-content[_ngcontent-%COMP%]{overflow:hidden}"]}),o})();function bt(o,r){1&o&&t._UZ(0,"app-loader")}function St(o,r){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"valueFromId"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"toLocaleString"),t.qZA(),t.qZA()),2&o){const e=r.$implicit,a=t.oxw(2);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.hij("",8!==e.event_type&&9!==e.event_type?e.device_name:"-"," "),t.xp6(2),t.Oqu(0!==e.event_type&&4!==e.event_type&&5!==e.event_type&&8!==e.event_type&&9!==e.event_type?t.lcZ(7,6,e.variable):"-"),t.xp6(3),t.Oqu(t.Dn7(10,8,e.event_type,a.types,"text")),t.xp6(3),t.Oqu(4!==e.event_type&&5!==e.event_type&&8!==e.event_type&&9!==e.event_type?e.value:"-"),t.xp6(2),t.Oqu(t.lcZ(15,12,e.timestamp))}}const Mt=function(){return{key:"timestamp",value:"descend"}},Nt=function(o,r){return{x:o,y:r}},V=function(){return["ascend","descend"]};function zt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"app-table",7,8),t.TgZ(3,"nz-table",9,10),t.ALo(5,"translate"),t.TgZ(6,"thead",11),t.NdJ("nzSortOrderChange",function(n){return t.CHM(e),t.MAs(2).sort(n)}),t.TgZ(7,"tr"),t.TgZ(8,"th",12),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",13),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th",14),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.TgZ(26,"tr",15),t.TgZ(27,"th",16),t.TgZ(28,"input",17),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"name","contains")}),t.qZA(),t.qZA(),t.TgZ(29,"th",16),t.TgZ(30,"input",17),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"device_name","contains")}),t.qZA(),t.qZA(),t.TgZ(31,"th"),t.TgZ(32,"input",17),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"variable","contains")}),t.qZA(),t.qZA(),t.TgZ(33,"th"),t.TgZ(34,"input",17),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"type","contains")}),t.qZA(),t.qZA(),t.TgZ(35,"th"),t.TgZ(36,"input",17),t.NdJ("input",function(n){return t.CHM(e),t.MAs(2).filter(n,"value","contains")}),t.qZA(),t.qZA(),t._UZ(37,"th"),t.qZA(),t.qZA(),t.TgZ(38,"tbody"),t.YNc(39,St,16,14,"tr",18),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(2),a=t.MAs(4),n=t.oxw();t.xp6(1),t.Q6J("initSort",t.DdM(33,Mt))("data",n.rows),t.xp6(2),t.Q6J("nzData",e.tableData)("nzScroll",t.WLB(34,Nt,e.tableWidth,e.tableHeight))("nzNoResult",t.lcZ(5,19,"NO_ALARMS")),t.xp6(5),t.Q6J("nzColumnKey","name")("nzSortFn",!0)("nzSortDirections",t.DdM(37,V)),t.xp6(1),t.Oqu(t.lcZ(10,21,"NAME")),t.xp6(3),t.Oqu(t.lcZ(13,23,"DEVICE")),t.xp6(3),t.Oqu(t.lcZ(16,25,"MEASURE")),t.xp6(3),t.Oqu(t.lcZ(19,27,"TYPE")),t.xp6(3),t.Oqu(t.lcZ(22,29,"VALUE")),t.xp6(2),t.Q6J("nzColumnKey","timestamp")("nzSortFn",!0)("nzSortDirections",t.DdM(38,V))("nzSortOrder","descend"),t.xp6(1),t.Oqu(t.lcZ(25,31,"DATE_AND_TIME")),t.xp6(15),t.Q6J("ngForOf",a.data)}}let Ot=(()=>{class o{constructor(e,a,n,i){this.translate=e,this.toastr=a,this.alarmsService=n,this.modalService=i,this.id="diagnostic_alarms_acknowledged",this.loadingData=!0}ngOnInit(){this.types=m.uS}getAlarms(e,a){this.loadingData=!0;const n={startDate:Math.floor(new Date(e).getTime()/1e3),endDate:Math.floor(new Date(a).getTime()/1e3),acknowledged:!0};this.alarmsService.getAlarms(n).subscribe(i=>{this.rows=i,this.loadingData=!1},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR"))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.sK),t.Y36(p._),t.Y36(J),t.Y36(h.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-diagnostic-alarms-acknowledged"]],hostVars:1,hostBindings:function(e,a){2&e&&t.uIk("id",a.id)},decls:6,vars:4,consts:[[1,"section-header"],[1,"controls",3,"hidden"],["datesStorageKey","AlarmsHistoryDates",3,"callbackChange"],["pickRange",""],[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"initSort","data"],["table",""],[3,"nzData","nzScroll","nzNoResult"],["nzTable",""],[3,"nzSortOrderChange"],[3,"nzColumnKey","nzSortFn","nzSortDirections"],["nzWidth","200px"],[3,"nzColumnKey","nzSortFn","nzSortDirections","nzSortOrder"],[1,"filters"],[1,"input"],["type","text",3,"input"],[4,"ngFor","ngForOf"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"app-pick-range",2,3),t.qZA(),t.qZA(),t.YNc(4,bt,1,0,"app-loader",4),t.YNc(5,zt,40,39,"div",5)),2&e&&(t.xp6(1),t.Q6J("hidden",!a.rows),t.xp6(1),t.Q6J("callbackChange",a.getAlarms.bind(a)),t.xp6(2),t.Q6J("ngIf",a.loadingData),t.xp6(1),t.Q6J("ngIf",!a.loadingData))},directives:[R.P,E.O5,y.R,O.a,_.N8,_.Om,_.$Z,_.Uo,_._C,_.qD,_.p0,E.sg],pipes:[d.X$,q.h,U.U],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.section-content[_ngcontent-%COMP%]{overflow:hidden}"]}),o})();var S=l(7618);const qt=[{path:"",redirectTo:"events-log"},{path:"alarms",redirectTo:"alarms/inbox"},{path:"events-log",component:vt,canActivate:[S.a],data:{activeMenu:"DIAGNOSTIC",activeSubMenu:"EVENTS_LOG",icon:"icon_abb_24 icon-abb_resistor_24"}},{path:"configuration",component:_t,canActivate:[S.a],data:{activeMenu:"DIAGNOSTIC",activeSubMenu:"CONFIGURATION",icon:"icon_abb_24 icon-abb_resistor_24"}},{path:"alarms",component:Tt,children:[{path:"inbox",component:Dt,canActivate:[S.a],data:{activeMenu:"DIAGNOSTIC",activeSubMenu:"ALARMS",icon:"icon_abb_24 icon-abb_resistor_24",activeTab:"INBOX"}},{path:"acknowledged",component:Ot,canActivate:[S.a],data:{activeMenu:"DIAGNOSTIC",activeSubMenu:"ALARMS",icon:"icon_abb_24 icon-abb_resistor_24",activeTab:"ACKNOWLEDGED"}}]}];let It=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[S.a],imports:[[v.Bz.forChild(qt)],v.Bz]}),o})();var wt=l(5084);let Rt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[wt.m,It]]}),o})()},283:(M,T,l)=>{l.d(T,{U:()=>m});var v=l(5e3);let m=(()=>{class t{transform(p){return isNaN(p)||null===p?"-":new Date(1e3*p).toLocaleString()}}return t.\u0275fac=function(p){return new(p||t)},t.\u0275pipe=v.Yjl({name:"toLocaleString",type:t,pure:!0}),t})()},442:(M,T,l)=>{l.d(T,{h:()=>t});var v=l(5e3),m=l(1062);let t=(()=>{class d{constructor(h){this.translate=h}transform(h,A,C="name"){if(null==h||!A)return"-";const x=A.find(L=>L.id===h);return x?this.translate.instant(x[C]):h}}return d.\u0275fac=function(h){return new(h||d)(v.Y36(m.sK,16))},d.\u0275pipe=v.Yjl({name:"valueFromId",type:d,pure:!0}),d})()},7618:(M,T,l)=>{l.d(T,{a:()=>d});var v=l(5e3),m=l(4521),t=l(9777);let d=(()=>{class p{constructor(A,C){this.router=A,this.appLoadService=C}canActivate(A,C){return!!this.appLoadService.user.logged||(this.router.navigate(["/login"],{queryParams:{returnUrl:C.url}}),!1)}}return p.\u0275fac=function(A){return new(A||p)(v.LFG(m.F0),v.LFG(t.V))},p.\u0275prov=v.Yz7({token:p,factory:p.\u0275fac}),p})()},5724:(M,T,l)=>{l.d(T,{vK:()=>v,dQ:()=>m,DJ:()=>t,tc:()=>d,wk:()=>p,Sw:()=>h,KS:()=>A,Dl:()=>C,ij:()=>x,Vs:()=>L,OC:()=>N,uS:()=>z,_5:()=>E,tW:()=>y});const v=["#0C74DA","#007A33","#A65033","#7A641B","#4B656A","#28B1B5","#973E82","#8664BF","#0aa","#48c","#944","#2bd","#fa4","#1a4","#323","#31c","#d97","#f5f","#922","#e3d","#137","#9dc","#767","#93c","#1de","#96a","#32c","#74f","#75f","#9ab","#73c","#a53","#4d3","#ba0","#985","#83c","#a14","#f99","#71b","#d8a","#592","#6a7","#0c6","#621","#771","#349","#4f4","#6a1","#e92","#7c5","#7c7","#802","#158","#c8d","#4ec","#b3a","#140","#32a","#041","#f65","#b03","#9f8","#683","#da7","#d2f","#90c","#5c7","#b90","#390","#fa6","#bc4","#420","#c14","#c73","#1ab","#8c1","#793","#d2c","#4a8","#e17","#3ab","#c51","#8d5","#fc2","#30a","#815","#b85","#124","#8a4","#796","#398","#29a","#c22","#8b2","#07f","#b4b"],m={"Energy Values":[{key:"ACTIVE_IMPORT",chart:!0,l1:"activeEnergyImportL1",l2:"activeEnergyImportL2",l3:"activeEnergyImportL3",total:"activeEnergyImportTotal"},{key:"ACTIVE_EXPORT",chart:!0,l1:"activeEnergyExportL1",l2:"activeEnergyExportL2",l3:"activeEnergyExportL3",total:"activeEnergyExportTotal"},{key:"ACTIVE_NET",chart:!0,l1:"activeEnergyNetL1",l2:"activeEnergyNetL2",l3:"activeEnergyNetL3",total:"activeEnergyNetTotal"},{key:"REACTIVE_IMPORT",chart:!0,l1:"reactiveEnergyImportL1",l2:"reactiveEnergyImportL2",l3:"reactiveEnergyImportL3",total:"reactiveEnergyImportTotal"},{key:"REACTIVE_EXPORT",chart:!0,l1:"reactiveEnergyExportL1",l2:"reactiveEnergyExportL2",l3:"reactiveEnergyExportL3",total:"reactiveEnergyExportTotal"},{key:"REACTIVE_NET",chart:!0,l1:"reactiveEnergyNetL1",l2:"reactiveEnergyNetL2",l3:"reactiveEnergyNetL3",total:"reactiveEnergyNetTotal"},{key:"APPARENT_IMPORT",chart:!0,l1:"apparentEnergyImportL1",l2:"apparentEnergyImportL2",l3:"apparentEnergyImportL3",total:"apparentEnergyImportTotal"},{key:"APPARENT_EXPORT",chart:!0,l1:"apparentEnergyExportL1",l2:"apparentEnergyExportL2",l3:"apparentEnergyExportL3",total:"apparentEnergyExportTotal"},{key:"APPARENT_NET",chart:!0,l1:"apparentEnergyNetL1",l2:"apparentEnergyNetL2",l3:"apparentEnergyNetL3",total:"apparentEnergyNetTotal"},{key:"activeImportTotal",chart:!1,total:"activeImportTotal"},{key:"activeExportTotal",chart:!1,total:"activeExportTotal"},{key:"reactiveImportTotal",chart:!1,total:"reactiveImportTotal"},{key:"reactiveExportTotal",chart:!1,total:"reactiveExportTotal"}],"Instantaneous Values":[{key:"ACTIVE_POWER",chart:!0,l1:"activePowerL1",l2:"activePowerL2",l3:"activePowerL3",total:"activePowerTotal"},{key:"threePhaseSysActivePower15AVER",chart:!0,total:"threePhaseSysActivePower15AVER"},{key:"REACTIVE_POWER",chart:!0,l1:"reactivePowerL1",l2:"reactivePowerL2",l3:"reactivePowerL3",total:"reactivePowerTotal"},{key:"APPARENT_POWER",chart:!0,l1:"apparentPowerL1",l2:"apparentPowerL2",l3:"apparentPowerL3",total:"apparentPowerTotal"},{key:"threePhaseSysApparentPower15AVER",chart:!0,total:"threePhaseSysApparentPower15AVER"},{key:"CURRENT",chart:!0,l1:"currentL1",l2:"currentL2",l3:"currentL3",n:"currentN"},{key:"VOLTAGE",chart:!0,l1:"voltageL1",l2:"voltageL2",l3:"voltageL3"},{key:"CURRENT_QUADRANT",chart:!0,l1:"currentQuadrantL1",l2:"currentQuadrantL2",l3:"currentQuadrantL3",total:"currentQuadrantTotal"},{key:"frequency",chart:!0,total:"frequency"},{key:"threePhaseSystemVoltage",chart:!0,total:"threePhaseSystemVoltage"},{key:"threePhaseSystemCurrent",chart:!0,total:"threePhaseSystemCurrent"},{key:"cosPhi3Phase",chart:!0,total:"cosPhi3Phase"},{key:"voltageL1L2",chart:!0,total:"voltageL1L2"},{key:"voltageL3L2",chart:!0,total:"voltageL3L2"},{key:"voltageL1L3",chart:!0,total:"voltageL1L3"}],"Power Quality Values":[{key:"THD_I",chart:!0,l1:"currentHarmonicsTHDL1",l2:"currentHarmonicsTHDL2",l3:"currentHarmonicsTHDL3",n:"currentHarmonicsTHDN"},{key:"THD_U",chart:!0,l1:"voltageHarmonicsTHDL1N",l2:"voltageHarmonicsTHDL2N",l3:"voltageHarmonicsTHDL3N"},{key:"POWER_FACTOR",chart:!0,l1:"powerFactorL1",l2:"powerFactorL2",l3:"powerFactorL3",total:"powerFactorTotal"},{key:"PHASE_ANGLE_POWER",chart:!0,l1:"phaseAnglePowerL1",l2:"phaseAnglePowerL2",l3:"phaseAnglePowerL3",total:"phaseAnglePowerTotal"},{key:"PHASE_ANGLE_VOLTAGE",chart:!0,l1:"phaseAngleVoltageL1",l2:"phaseAngleVoltageL2",l3:"phaseAngleVoltageL3"},{key:"PHASE_ANGLE_CURRENT",chart:!0,l1:"phaseAngleCurrentL1",l2:"phaseAngleCurrentL2",l3:"phaseAngleCurrentL3"},{key:"COS_PHI",chart:!0,l1:"cosPhiL1",l2:"cosPhiL2",l3:"cosPhiL3"},{key:"phaseAngleVoltageL1L2",chart:!0,total:"phaseAngleVoltageL1L2"},{key:"phaseAngleVoltageL3L2",chart:!0,total:"phaseAngleVoltageL3L2"},{key:"phaseAngleVoltageL1L3",chart:!0,total:"phaseAngleVoltageL1L3"}],"Maximum Values":[{key:"MAX_LINE_CURRENT",chart:!1,l1:"maxLineCurrentL1",l2:"maxLineCurrentL2",l3:"maxLineCurrentL3"},{key:"max3PhaseSysActivePower",chart:!1,total:"max3PhaseSysActivePower"},{key:"max3PhaseSysApparentPower",chart:!1,total:"max3PhaseSysApparentPower"},{key:"max3PhaseSysActivePower15Aver",chart:!1,total:"max3PhaseSysActivePower15Aver"},{key:"MAX_ACTIVE_POWER_AVG_15",chart:!1,l1:"maxActivePower15AverL1",l2:"maxActivePower15AverL2",l3:"maxActivePower15AverL3"},{key:"max3PhaseSysApparentPower15Aver",chart:!1,total:"max3PhaseSysApparentPower15Aver"},{key:"MAX_APPARENT_POWER_AVG_15",chart:!1,l1:"maxApparentPower15AverL1",l2:"maxApparentPower15AverL2",l3:"maxApparentPower15AverL3"}],Unbalances:[{key:"UNBALANCES",chart:!0,l1:"unbalancesPhaseVoltage",l2:"unbalancesLineVoltage",l3:"unbalancesCurrent"}]},t=[{id:"integer",text:"INTEGER"},{id:"float",text:"FLOAT"},{id:"string",text:"STRING"},{id:"boolean",text:"BOOLEAN"}],d=[{id:"ABCD",text:"BIG_ENDIAN"},{id:"DCBA",text:"LITTLE_ENDIAN"},{id:"BADC",text:"BIG_ENDIAN_BYTE_SWAP"},{id:"CDAB",text:"LITTLE_ENDIAN_BYTE_SWAP"}],p=[{id:1,text:"READ_COIL_STATUS"},{id:2,text:"READ_INPUT_STATUS"},{id:3,text:"READ_HOLDING_REGISTER"},{id:4,text:"READ_INPUT_REGISTER"}],h=[{id:"C",text:"C"},{id:"T",text:"T"}],A=[{id:0,text:"INTERNAL"},{id:1,text:"EXTERNAL"}],C=[{id:"%",name:"%"},{id:"-",name:"-"},{id:"A",name:"A"},{id:"CO2",name:"CO2"},{id:"Currency",name:"Currency"},{id:"Hz",name:"Hz"},{id:"N/A",name:"N/A"},{id:"V",name:"V"},{id:"VA",name:"VA"},{id:"W",name:"W"},{id:"deg",name:"deg"},{id:"kVAh",name:"kVAh"},{id:"kWh",name:"kWh"},{id:"kvarh",name:"kvarh"},{id:"mA",name:"mA"},{id:"text",name:"text"},{id:"var",name:"var"}],x=[{id:0,name:"NO"},{id:1,name:"YES"}],L=[{id:!1,name:"NO"},{id:!0,name:"YES"}],N=[{group:"VOLTAGE",phase:"L1",variable:"voltageL1"},{group:"VOLTAGE",phase:"L2",variable:"voltageL2"},{group:"VOLTAGE",phase:"L3",variable:"voltageL3"},{group:"CURRENT",phase:"L1",variable:"currentL1"},{group:"CURRENT",phase:"L2",variable:"currentL2"},{group:"CURRENT",phase:"L3",variable:"currentL3"},{group:"ACTIVE_POWER",phase:"L1",variable:"activePowerL1"},{group:"ACTIVE_POWER",phase:"L2",variable:"activePowerL2"},{group:"ACTIVE_POWER",phase:"L3",variable:"activePowerL3"},{group:"VOLTAGE_HARMONICS_THD_L_L",phase:"L1L2",variable:"voltageHarmonicsTHDL1L2"},{group:"VOLTAGE_HARMONICS_THD_L_L",phase:"L3L2",variable:"voltageHarmonicsTHDL3L2"},{group:"VOLTAGE_HARMONICS_THD_L_L",phase:"L1L3",variable:"voltageHarmonicsTHDL1L3"},{group:"CURRENT_HARMONICS_THD",phase:"L1",variable:"currentHarmonicsTHDL1"},{group:"CURRENT_HARMONICS_THD",phase:"L2",variable:"currentHarmonicsTHDL2"},{group:"CURRENT_HARMONICS_THD",phase:"L3",variable:"currentHarmonicsTHDL3"},{group:"CURRENT_HARMONICS_THD",phase:"N",variable:"currentHarmonicsTHDN"},{group:"VOLTAGES_L_L",phase:"L1L2",variable:"voltageL1L2"},{group:"VOLTAGES_L_L",phase:"L3L2",variable:"voltageL3L2"},{group:"VOLTAGES_L_L",phase:"L1L3",variable:"voltageL1L3"},{group:"CURRENT",phase:"N",variable:"currentN"},{group:"REACTIVE_POWER",phase:"L1",variable:"reactivePowerL1"},{group:"REACTIVE_POWER",phase:"L2",variable:"reactivePowerL2"},{group:"REACTIVE_POWER",phase:"L3",variable:"reactivePowerL3"},{group:"POWER_FACTOR",phase:"L1",variable:"powerFactorL1"},{group:"POWER_FACTOR",phase:"L2",variable:"powerFactorL2"},{group:"POWER_FACTOR",phase:"L3",variable:"powerFactorL3"},{group:"VOLTAGE_HARMONICS_THD_L_N",phase:"L1N",variable:"voltageHarmonicsTHDL1N"},{group:"VOLTAGE_HARMONICS_THD_L_N",phase:"L2N",variable:"voltageHarmonicsTHDL2N"},{group:"VOLTAGE_HARMONICS_THD_L_N",phase:"L3N",variable:"voltageHarmonicsTHDL3N"},{group:"COS_PHI",phase:"L1",variable:"cosPhiL1"},{group:"COS_PHI",phase:"L2",variable:"cosPhiL2"},{group:"COS_PHI",phase:"L3",variable:"cosPhiL3"}],z=[{id:0,text:"SYSTEM_EVENT"},{id:1,text:"TYPE_CROSSUP"},{id:2,text:"TYPE_CROSSDOWN"},{id:3,text:"TYPE_STATUS_CHANGE"},{id:4,text:"TYPE_COMMUNICATION_FAILURE"},{id:5,text:"TYPE_COMMUNICATION_RESTORE"},{id:6,text:"TYPE_STATUS_CHANGE_TO_CLOSE"},{id:7,text:"TYPE_STATUS_CHANGE_TO_OPEN"},{id:8,text:"TYPE_AUTOMATION_SUCCESS"},{id:9,text:"TYPE_AUTOMATION_FAILURE"}],E=[{id:"30s",text:"RESOLUTION_30SECONDS",range:3e7},{id:"15min",text:"RESOLUTION_QUARTER",range:9e8},{id:"1h",text:"RESOLUTION_HOUR",range:36e8},{id:"1d",text:"RESOLUTION_DAY",range:31536e6},{id:"1m",text:"RESOLUTION_MONTHS",range:31536e6}],y={"30s":3e4,"15min":9e5,"1h":36e5,"1d":864e5,"1m":2592e6}}}]);