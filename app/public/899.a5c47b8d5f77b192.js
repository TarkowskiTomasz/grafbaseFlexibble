"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[899],{3135:(tt,z,s)=>{s.r(z),s.d(z,{WizardModule:()=>sn});var S=s(5084),h=s(4521),y=s(4128),A=s(5963),M=s(8505),t=s(5e3),k=s(6912),et=s(2189),it=s(452),nt=s(3906),at=s(520);let W=(()=>{class i{constructor(e){this.http=e}getConfiguration(){return this.http.get("api/wizard/configuration")}saveConfiguration(e){return this.http.post("api/wizard/configuration",e,{responseType:"text"})}getSensorsConfiguration(){return this.http.get("api/wizard/configuration/current-sensors")}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(at.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var p=s(1062),w=s(2966),T=s(9808),q=s(9777),ot=s(2313),I=s(4063),l=s(6042),_=s(2643),u=s(2683),F=s(4401),N=s(493);const rt=["listOfDevicesTemplate"];function st(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"a",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().showModal()}),t._UZ(1,"i",7),t.TgZ(2,"b"),t._uU(3),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.hij("",e.configuration.devices.ThirdPartyRTU.length+e.configuration.devices.MeterWMbus.length+e.configuration.devices.ThirdPartyTCP.length+e.configuration.devices.IoModule.length+e.configuration.devices.AuxiliaryContact.length+e.configuration.devices.ModAriArh.length+e.configuration.devices.CurrentSensor.length," configured devices")}}function dt(i,o){1&i&&(t.TgZ(0,"button",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"GO_TO_DASHBOARD")))}function ct(i,o){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"span",19),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t._UZ(6,"span",20),t.qZA()),2&i){const e=o.$implicit;t.xp6(2),t.AsE(" ",t.lcZ(3,3,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name)}}function pt(i,o){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"span",19),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t._UZ(6,"span",20),t.qZA()),2&i){const e=o.$implicit;t.xp6(2),t.AsE(" ",t.lcZ(3,3,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name)}}function lt(i,o){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"span",19),t.TgZ(2,"b"),t._uU(3),t.qZA(),t.qZA(),t._UZ(4,"span",20),t.qZA()),2&i){const e=o.$implicit;t.xp6(3),t.Oqu(e.name)}}function _t(i,o){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"span",19),t.TgZ(2,"b"),t._uU(3),t.qZA(),t.qZA(),t._UZ(4,"span",20),t.qZA()),2&i){const e=o.$implicit;t.xp6(3),t.Oqu(e.name)}}function ut(i,o){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"span",19),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t._UZ(6,"span",20),t.qZA()),2&i){const e=o.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,3,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name)}}function gt(i,o){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"span",19),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t._UZ(6,"span",20),t.qZA()),2&i){const e=o.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,3,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name)}}function mt(i,o){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"span",19),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t._UZ(6,"span",20),t.qZA()),2&i){const e=o.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,3,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name)}}function ft(i,o){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"span",19),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t._UZ(6,"span",20),t.qZA()),2&i){const e=o.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,3,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name)}}function Tt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",10),t.TgZ(4,"div",11),t._uU(5),t.ALo(6,"translate"),t._UZ(7,"nz-badge",12),t.qZA(),t.TgZ(8,"div",13),t.YNc(9,ct,7,5,"div",14),t.qZA(),t.TgZ(10,"div",13),t.YNc(11,pt,7,5,"div",14),t.qZA(),t.TgZ(12,"div",11),t._uU(13),t.ALo(14,"translate"),t._UZ(15,"nz-badge",12),t.qZA(),t.TgZ(16,"div",13),t.YNc(17,lt,5,1,"div",14),t.qZA(),t.TgZ(18,"div",11),t._uU(19),t.ALo(20,"translate"),t._UZ(21,"nz-badge",12),t.qZA(),t.TgZ(22,"div",13),t.YNc(23,_t,5,1,"div",14),t.qZA(),t.TgZ(24,"div",11),t._uU(25),t.ALo(26,"translate"),t._UZ(27,"nz-badge",12),t.qZA(),t.TgZ(28,"div",13),t.YNc(29,ut,7,5,"div",14),t.qZA(),t.TgZ(30,"div",11),t._uU(31),t.ALo(32,"translate"),t._UZ(33,"nz-badge",12),t.qZA(),t.TgZ(34,"div",13),t.YNc(35,gt,7,5,"div",14),t.qZA(),t.TgZ(36,"div",11),t._uU(37),t.ALo(38,"translate"),t._UZ(39,"nz-badge",12),t.qZA(),t.TgZ(40,"div",13),t.YNc(41,mt,7,5,"div",14),t.qZA(),t.TgZ(42,"div",11),t._uU(43),t.ALo(44,"translate"),t._UZ(45,"nz-badge",12),t.qZA(),t.TgZ(46,"div",13),t.YNc(47,ft,7,5,"div",14),t.qZA(),t.qZA(),t.TgZ(48,"div",15),t.TgZ(49,"button",16),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.configuration.setupComplete=!1,n.goToStep("setup")}),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,27,"DEVICE_LIST")," "),t.xp6(4),t.hij(" ",t.lcZ(6,29,"FOUND_IN_RS485")," "),t.xp6(2),t.Q6J("nzCount",e.configuration.devices.ThirdPartyRTU.length),t.xp6(2),t.Q6J("ngForOf",e.configuration.devices.MeterABB),t.xp6(2),t.Q6J("ngForOf",e.configuration.devices.ThirdPartyRTU),t.xp6(2),t.hij(" ",t.lcZ(14,31,"FOUND_IN_WIRELESS_MBUS")," "),t.xp6(2),t.Q6J("nzCount",e.configuration.devices.MeterWMbus.length),t.xp6(2),t.Q6J("ngForOf",e.configuration.devices.MeterWMbus),t.xp6(2),t.hij(" ",t.lcZ(20,33,"MODBUS_TCP_DEVICES")," "),t.xp6(2),t.Q6J("nzCount",e.configuration.devices.ThirdPartyTCP.length),t.xp6(2),t.Q6J("ngForOf",e.configuration.devices.ThirdPartyTCP),t.xp6(2),t.hij(" ",t.lcZ(26,35,"IO_MODULES")," "),t.xp6(2),t.Q6J("nzCount",e.configuration.devices.IoModule.length),t.xp6(2),t.Q6J("ngForOf",e.configuration.devices.IoModule),t.xp6(2),t.hij(" ",t.lcZ(32,37,"SSD")," "),t.xp6(2),t.Q6J("nzCount",e.configuration.devices.AuxiliaryContact.length),t.xp6(2),t.Q6J("ngForOf",e.configuration.devices.AuxiliaryContact),t.xp6(2),t.hij(" ",t.lcZ(38,39,"MOD")," "),t.xp6(2),t.Q6J("nzCount",e.configuration.devices.ModAriArh.length),t.xp6(2),t.Q6J("ngForOf",e.configuration.devices.ModAriArh),t.xp6(2),t.hij(" ",t.lcZ(44,41,"CURRENT_SENSORS")," "),t.xp6(2),t.Q6J("nzCount",e.configuration.devices.CurrentSensor.length),t.xp6(2),t.Q6J("ngForOf",e.configuration.devices.CurrentSensor),t.xp6(2),t.uIk("id","modal_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(51,43,"CANCEL")),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(54,45,"EDIT_DEVICES"))}}let Zt=(()=>{class i{constructor(e){this.modalService=e}showModal(){this.modalService.showModal(this.listOfDevicesTemplate,()=>{})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(I.Z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-topbar"]],viewQuery:function(e,a){if(1&e&&t.Gf(rt,5),2&e){let n;t.iGM(n=t.CRH())&&(a.listOfDevicesTemplate=n.first)}},inputs:{currentStep:"currentStep",goToStep:"goToStep",configuration:"configuration"},decls:8,vars:2,consts:[[1,"container"],["id","logo"],["alt","logo","src","/assets/logo_abb.png",1,"logo"],["style","margin-right: 20px;",3,"click",4,"ngIf"],["nz-button","","nzType","default","class","dashboard-button","routerLink","/",4,"ngIf"],["listOfDevicesTemplate",""],[2,"margin-right","20px",3,"click"],[1,"icon_abb_24","icon-abb_edit_24",2,"margin-right","5px","font-size","16px"],["nz-button","","nzType","default","routerLink","/",1,"dashboard-button"],[1,"p-dialog-header"],[1,"p-dialog-body"],[1,"title"],["nzStandalone","",3,"nzCount"],[1,"item-list"],["class","item",4,"ngFor","ngForOf"],[1,"p-dialog-footer"],["nz-button","","appHideModal",""],["nz-button","","nzType","primary","appHideModal","",3,"click"],[1,"item"],[1,"text"],[1,"icons"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"a",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"div"),t.YNc(4,st,4,1,"a",3),t.YNc(5,dt,3,3,"button",4),t.qZA(),t.qZA(),t.YNc(6,Tt,55,47,"ng-template",null,5,t.W1O)),2&e&&(t.xp6(4),t.Q6J("ngIf",a.configuration.setup),t.xp6(1),t.Q6J("ngIf","password"!==a.currentStep.id))},directives:[T.O5,l.ix,_.dQ,u.w,h.rH,F.x7,T.sg,N.u],pipes:[p.X$],styles:["[_nghost-%COMP%]{display:flex;width:100%;flex-direction:column;position:relative;box-shadow:0 0 12px #0f0f0f59}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]   .dashboard-button[_ngcontent-%COMP%]{margin-right:20px}.container[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]{padding:0 17px;width:225px;height:61px;min-height:61px;display:flex;flex-direction:column;justify-content:center;background:#fff}.container[_ngcontent-%COMP%]   #logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:52px}.item-list[_ngcontent-%COMP%]{margin:0}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{min-height:36px}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-weight:600}.title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:5px;margin-top:20px}.title[_ngcontent-%COMP%]:first-of-type{margin-top:0}"]}),i})();var P=s(2013);function xt(i,o){1&i&&(t.TgZ(0,"span",9),t._uU(1,"1"),t.qZA())}function vt(i,o){1&i&&(t.TgZ(0,"span",9),t._uU(1,"2"),t.qZA())}function At(i,o){1&i&&(t.TgZ(0,"span",9),t._uU(1,"3"),t.qZA())}function ht(i,o){1&i&&(t.TgZ(0,"span",9),t._uU(1,"4"),t.qZA())}function Ct(i,o){1&i&&(t.TgZ(0,"span",9),t._uU(1,"5"),t.qZA())}let bt=(()=>{class i{constructor(){this.index=0,this.steps=["start","tariffs","scanning","setup","end"]}set currentStep(e){this.index=this.steps.indexOf(e.step)}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-sidebar"]],inputs:{currentStep:"currentStep"},decls:33,vars:44,consts:[[1,"container"],["nzDirection","vertical",1,"wizard-steps","wizard-steps-vertical",3,"nzStartIndex","nzCurrent"],["nzDisabled","true",3,"nzIcon","nzTitle"],["nzDirection","horizontal",1,"wizard-steps","wizard-steps-horizontal",3,"nzStartIndex","nzCurrent"],["step1",""],["step2",""],["step3",""],["step4",""],["step5",""],[1,"ant-steps-step"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"nz-steps",1),t._UZ(2,"nz-step",2),t.ALo(3,"translate"),t._UZ(4,"nz-step",2),t.ALo(5,"translate"),t._UZ(6,"nz-step",2),t.ALo(7,"translate"),t._UZ(8,"nz-step",2),t.ALo(9,"translate"),t._UZ(10,"nz-step",2),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"nz-steps",3),t._UZ(13,"nz-step",2),t.ALo(14,"translate"),t._UZ(15,"nz-step",2),t.ALo(16,"translate"),t._UZ(17,"nz-step",2),t.ALo(18,"translate"),t._UZ(19,"nz-step",2),t.ALo(20,"translate"),t._UZ(21,"nz-step",2),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.YNc(23,xt,2,0,"ng-template",null,4,t.W1O),t.YNc(25,vt,2,0,"ng-template",null,5,t.W1O),t.YNc(27,At,2,0,"ng-template",null,6,t.W1O),t.YNc(29,ht,2,0,"ng-template",null,7,t.W1O),t.YNc(31,Ct,2,0,"ng-template",null,8,t.W1O)),2&e){const n=t.MAs(24),r=t.MAs(26),d=t.MAs(28),g=t.MAs(30),x=t.MAs(32);t.xp6(1),t.Q6J("nzStartIndex",0)("nzCurrent",a.index),t.xp6(1),t.Q6J("nzIcon",n)("nzTitle",t.lcZ(3,24,"START_WIZARD")),t.xp6(2),t.Q6J("nzIcon",r)("nzTitle",t.lcZ(5,26,"TARIFFS")),t.xp6(2),t.Q6J("nzIcon",d)("nzTitle",t.lcZ(7,28,"SCANNING")),t.xp6(2),t.Q6J("nzIcon",g)("nzTitle",t.lcZ(9,30,"SETUP")),t.xp6(2),t.Q6J("nzIcon",x)("nzTitle",t.lcZ(11,32,"END")),t.xp6(2),t.Q6J("nzStartIndex",0)("nzCurrent",a.index),t.xp6(1),t.Q6J("nzIcon",n)("nzTitle",t.lcZ(14,34,"START_WIZARD")),t.xp6(2),t.Q6J("nzIcon",r)("nzTitle",t.lcZ(16,36,"TARIFFS")),t.xp6(2),t.Q6J("nzIcon",d)("nzTitle",t.lcZ(18,38,"SCANNING")),t.xp6(2),t.Q6J("nzIcon",g)("nzTitle",t.lcZ(20,40,"SETUP")),t.xp6(2),t.Q6J("nzIcon",x)("nzTitle",t.lcZ(22,42,"END"))}},directives:[P.iy,P.$W],pipes:[p.X$],styles:["[_nghost-%COMP%]{display:flex;width:225px;flex-direction:column;position:relative;box-shadow:0 6px 12px #0f0f0f59;height:100%;flex:1 0 auto;align-items:center;padding:25px 10px}#logo[_ngcontent-%COMP%]{padding:0 17px;height:61px;min-height:61px;display:flex;flex-direction:column;justify-content:center}#logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:52px}.sidebar-icon[_ngcontent-%COMP%]{margin-right:10px}ul[_ngcontent-%COMP%]{list-style:none}.wizard-steps-horizontal[_ngcontent-%COMP%]{display:none}@media (max-width: 640px){[_nghost-%COMP%]{height:auto;width:100%;padding:0}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;overflow:auto;display:flex;padding:25px 10px}.ant-steps-item[_ngcontent-%COMP%]{overflow:visible}.ant-steps-item[_ngcontent-%COMP%]   .ant-steps.ant-steps-horizontal[_ngcontent-%COMP%]   .ant-steps-item-title[_ngcontent-%COMP%]:after{display:none}.wizard-steps-vertical[_ngcontent-%COMP%]{display:none}.wizard-steps-horizontal[_ngcontent-%COMP%]{display:block}}"]}),i})();var E=s(8868),C=s(1777);const m=(0,C.X$)("enterAnimation",[(0,C.eR)(":enter",[(0,C.oB)({opacity:0}),(0,C.jt)(200,(0,C.oB)({opacity:1}))])]);var zt=s(4961),c=s(3075),Y=s(2374),St=s(552),D=s(7815);let wt=(()=>{class i{constructor(e){this.userService=e,this.user={id:0,username:"admin",pass:"admin",confirmPass:"admin",wizard:!0}}save(){this.userService.updateUser(this.user).subscribe(),this.goToStep("time")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(zt.Z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-password"]],inputs:{goToStep:"goToStep"},decls:41,vars:36,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_reset-user-data_32"],[1,"wizard-card"],["formAdd","ngForm"],[1,"wizard-card-title"],[1,"wizard-card-body"],[1,"form-group-item"],[1,"label-required"],[3,"field"],["type","text","maxlength","255","id","username_input","name","username","required","",3,"ngModel","ngModelChange"],["username","ngModel"],["type","password","maxlength","255","id","user_new_password","name","newPassword","required","",3,"ngModel","ngModelChange"],["newPassword","ngModel"],["type","text","maxlength","255","type","password","id","user_confirm_password","name","userConfirmPassword","required","",3,"ngModel","appValidateEqual","ngModelChange"],["confirmPassword","ngModel"],[1,"wizard-card-footer"],["nz-button","","type","submit","nzType","primary",3,"form","appFormButtonClick"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"form",2,3),t.TgZ(6,"div",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",5),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"p"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div",6),t.TgZ(17,"label",7),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"app-validate",8),t.TgZ(21,"input",9,10),t.NdJ("ngModelChange",function(r){return a.user.username=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",6),t.TgZ(24,"label",7),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"app-validate",8),t.TgZ(28,"input",11,12),t.NdJ("ngModelChange",function(r){return a.user.pass=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",6),t.TgZ(31,"label",7),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"app-validate",8),t.TgZ(35,"input",13,14),t.NdJ("ngModelChange",function(r){return a.user.confirmPass=r}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",15),t.TgZ(38,"button",16),t.NdJ("appFormButtonClick",function(){return a.save()}),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(5),r=t.MAs(22),d=t.MAs(29),g=t.MAs(36);t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,20,"CREDENTIALS"),"\n"),t.xp6(4),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(8,22,"NEW_CREDENTIALS")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij("",t.lcZ(12,24,"CHANGE_PASSWORD_TEXT"),"."),t.xp6(3),t.Oqu(t.lcZ(15,26,"VALIDATE_NEW_PASSWORD")),t.xp6(4),t.Oqu(t.lcZ(19,28,"USERNAME")),t.xp6(2),t.Q6J("field",r),t.xp6(1),t.Q6J("ngModel",a.user.username),t.xp6(4),t.Oqu(t.lcZ(26,30,"NEW_PASSWORD")),t.xp6(2),t.Q6J("field",d),t.xp6(1),t.Q6J("ngModel",a.user.pass),t.xp6(4),t.Oqu(t.lcZ(33,32,"CONFIRM_PASSWORD")),t.xp6(2),t.Q6J("field",g),t.xp6(1),t.Q6J("ngModel",a.user.confirmPass)("appValidateEqual",d),t.xp6(3),t.Q6J("form",n),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(40,34,"CONFIRM_AND_START"))}},directives:[c._Y,c.JL,c.F,Y.P,c.Fj,c.nD,c.Q7,c.JJ,c.On,St.G,l.ix,_.dQ,u.w,D.b],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();var qt=s(619);let It=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-update"]],inputs:{goToStep:"goToStep",data:"data",urlId:"urlId"},decls:14,vars:13,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_upload_32"],[1,"wizard-card"],[1,"wizard-card-title"],[1,"wizard-card-body"],["type","wizard",3,"data"],[1,"wizard-card-footer"],["nz-button","","type","button","nzType","default","id","skip_button",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",4),t._UZ(9,"app-general-firmware-update-update",5),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"button",7),t.NdJ("click",function(){return a.goToStep("region")}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,7,"FIRMWARE_UPDATE"),"\n"),t.xp6(3),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(7,9,"FIRMWARE_UPDATE_NEWEST")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.Q6J("data",a.data),t.xp6(3),t.Oqu(t.lcZ(13,11,"update"===a.urlId?"NEXT_STEP":"SKIP")))},directives:[qt.s,l.ix,_.dQ,u.w],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();var Dt=s(6782);let Ut=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-time"]],inputs:{goToStep:"goToStep",data:"data"},decls:18,vars:17,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_time_32"],[1,"wizard-card"],["form","ngForm"],[1,"wizard-card-title"],[1,"wizard-card-body"],[3,"data"],[1,"wizard-card-footer"],["nz-button","","type","submit","nzType","primary",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"form",2,3),t.TgZ(6,"div",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",5),t._UZ(13,"app-general-time-configuration",6),t.qZA(),t.TgZ(14,"div",7),t.TgZ(15,"button",8),t.NdJ("click",function(){return a.goToStep("update")}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,9,"WIZARD_TIME_CONFIGURATION"),"\n"),t.xp6(4),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(8,11,"WIZARD_SET_TIME")," "),t.xp6(3),t.Oqu(t.lcZ(11,13,"WIZARD_DEFAULT_TIME")),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.Q6J("data",a.data),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(17,15,"CONFIRM_AND_GO_STEP")))},directives:[c._Y,c.JL,c.F,Dt.B,l.ix,_.dQ,u.w],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();var yt=s(6681),Mt=s(4447);let Wt=(()=>{class i{constructor(e,a){this.settingsRegionService=e,this.appLoadService=a}ngOnInit(){this.data={language:this.appLoadService.user.language,currency:this.appLoadService.currency.value.id}}save(){this.settingsRegionService.setData({language:this.data.language,currency:this.data.currency}).subscribe();const e=this.currencies.find(a=>a.id===this.data.currency);e&&(console.log(e),this.appLoadService.currency.next(e)),this.goToStep("connection")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(yt.U),t.Y36(q.V))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-region"]],inputs:{goToStep:"goToStep",currencies:"currencies",languages:"languages"},decls:15,vars:18,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_globe_32"],[1,"wizard-card"],["form","ngForm"],[1,"wizard-card-title"],[1,"wizard-card-body"],["type","wizard",3,"data","currencies","languages","form"],[1,"wizard-card-footer"],["nz-button","","type","submit","nzType","primary",3,"form","appFormButtonClick"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"form",2,3),t.TgZ(6,"div",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",5),t._UZ(10,"app-general-region-configuration",6),t.qZA(),t.TgZ(11,"div",7),t.TgZ(12,"button",8),t.NdJ("appFormButtonClick",function(){return a.save()}),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(5);t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,12,"REGION_LANGUAGE"),"\n"),t.xp6(4),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(8,14,"SET_REGION")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.Q6J("data",a.data)("currencies",a.currencies)("languages",a.languages)("form",n),t.xp6(2),t.Q6J("form",n),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(14,16,"CONFIRM_AND_GO_STEP"))}},directives:[c._Y,c.JL,c.F,Mt.l,l.ix,_.dQ,u.w,D.b],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();function Nt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().goToStep("wifi-network")}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"USE_WIFI")))}const Et=function(i){return{productName:i}},Ot=function(i){return{"multiple-buttons":i}};let Jt=(()=>{class i{constructor(e){this.appLoadService=e}ngOnInit(){this.isWifi=this.appLoadService.user.isWifi}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.V))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-connection"]],inputs:{goToStep:"goToStep"},decls:17,vars:22,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_disconnect_32"],[1,"wizard-card"],[1,"wizard-card-title"],[1,"wizard-card-body"],[1,"wizard-card-footer",3,"ngClass"],["nz-button","","type","submit","nzType","primary",1,"black",3,"click"],["nz-button","","type","submit","nzType","primary",3,"click",4,"ngIf"],["nz-button","","type","submit","nzType","primary",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.TgZ(12,"div",5),t.TgZ(13,"button",6),t.NdJ("click",function(){return a.goToStep("ethernet")}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.YNc(16,Nt,3,3,"button",7),t.qZA(),t.qZA()),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.xi3(3,9,"SCU_NETWORK_CONN",t.VKq(18,Et,a.isWifi?"SCU200-W":"SCU200")),"\n"),t.xp6(3),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(7,12,a.isWifi?"WIFI_ETH_CONN":"ETHERNET_CONNECTION")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.Oqu(t.lcZ(11,14,"SELECT_CONNECTION")),t.xp6(2),t.Q6J("ngClass",t.VKq(20,Ot,a.isWifi)),t.xp6(2),t.Oqu(t.lcZ(15,16,"USE_ETHERNET")),t.xp6(2),t.Q6J("ngIf",a.isWifi))},directives:[T.mk,l.ix,_.dQ,u.w,T.O5],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();var Rt=s(3104);const Lt=["formConnect"];let Qt=(()=>{class i{constructor(){}ngOnInit(){this.wifiConnected=this.data.wifis?this.data.wifis.find(e=>e.connected):{},this.wifis=this.data.wifis?this.data.wifis.filter(e=>!e.connected):[]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-wifi-network"]],viewQuery:function(e,a){if(1&e&&t.Gf(Lt,5),2&e){let n;t.iGM(n=t.CRH())&&(a.formConnect=n.first)}},inputs:{goToStep:"goToStep",data:"data"},decls:19,vars:20,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_disconnect_32"],[1,"wizard-card"],[1,"wizard-card-body"],["formConnect","ngForm"],[3,"data","formConnect","wifiConnected","wifis"],[1,"wizard-card-footer","multiple-buttons"],["nz-button","","type","button","nzType","default",3,"click"],["nz-button","","type","submit","nzType","primary",3,"click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"form",null,4),t._UZ(11,"app-system-setup-communication-wifi-network",5),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.TgZ(13,"button",7),t.NdJ("click",function(){return a.goToStep("connection")}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return a.goToStep("wifi-ip")}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(10);t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,12,"WIFI_CONNECTION"),"\n"),t.xp6(3),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.Oqu(t.lcZ(8,14,"VIEW_LIST_OF_WIFI")),t.xp6(4),t.Q6J("data",a.data)("formConnect",n)("wifiConnected",a.wifiConnected)("wifis",a.wifis),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.hij("",t.lcZ(15,16,"GO_BACK"),"k"),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(18,18,"NEXT_STEP"))}},directives:[c._Y,c.JL,c.F,Rt.a,l.ix,_.dQ,u.w],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();var kt=s(9814);const Ft=["formIp"];let Pt=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-wifi-ip"]],viewQuery:function(e,a){if(1&e&&t.Gf(Ft,5),2&e){let n;t.iGM(n=t.CRH())&&(a.formIp=n.first)}},inputs:{goToStep:"goToStep",data:"data"},decls:18,vars:18,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_disconnect_32"],[1,"wizard-card"],["formIp","ngForm"],[1,"wizard-card-body"],[3,"data","formIp"],[1,"wizard-card-footer","multiple-buttons"],["nz-button","","type","button","nzType","primary",1,"black",3,"click"],["nz-button","","type","submit","nzType","primary",3,"click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"form",2,3),t.TgZ(6,"div",4),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"app-system-setup-communication-wifi-configuration",5),t.qZA(),t.TgZ(11,"div",6),t.TgZ(12,"button",7),t.NdJ("click",function(){return a.goToStep("wifi-network")}),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"button",8),t.NdJ("click",function(){return a.goToStep("connection-info","wifi-ip")}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(5);t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,10,"WIFI_CONNECTION"),"\n"),t.xp6(4),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.Oqu(t.lcZ(9,12,"WIZARD_WIFI_TEXT1")),t.xp6(2),t.Q6J("data",a.data)("formIp",n),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(14,14,"GO_BACK")),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(17,16,"CONFIRM_AND_GO_STEP"))}},directives:[c._Y,c.JL,c.F,kt.W,l.ix,_.dQ,u.w],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();var Yt=s(4085);const Ht=["form"];let jt=(()=>{class i{constructor(e){this.settingsCommunicationIpService=e}callbackSave(){this.settingsCommunicationIpService.getData().subscribe(e=>{this.data=Object.assign({},e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(k.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-ethernet"]],viewQuery:function(e,a){if(1&e&&t.Gf(Ht,5),2&e){let n;t.iGM(n=t.CRH())&&(a.form=n.first)}},inputs:{goToStep:"goToStep",data:"data"},decls:18,vars:19,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_disconnect_32"],[1,"wizard-card"],["form","ngForm"],[1,"wizard-card-title"],[1,"wizard-card-body"],["type","wizard",3,"form","data","callbackSave"],[1,"wizard-card-footer","multiple-buttons"],["nz-button","","type","button","nzType","default",3,"click"],["nz-button","","type","submit","nzType","primary",3,"click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"form",2,3),t.TgZ(6,"div",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",5),t.TgZ(10,"app-system-setup-communication-ip-configuration",6),t.NdJ("callbackSave",function(){return a.callbackSave()}),t.qZA(),t.qZA(),t.TgZ(11,"div",7),t.TgZ(12,"button",8),t.NdJ("click",function(){return a.goToStep("connection")}),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"button",9),t.NdJ("click",function(){return a.goToStep("connection-info","ethernet")}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(5);t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,11,"ETHERNET_CONNECTION"),"\n"),t.xp6(4),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(8,13,"SET_NEW_IP")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.Q6J("form",n)("data",a.data),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(14,15,"GO_BACK")),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(17,17,"CONFIRM_AND_GO_STEP"))}},directives:[c._Y,c.JL,c.F,Yt.k,l.ix,_.dQ,u.w],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();function Vt(i,o){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"a",9),t._uU(4),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("",t.lcZ(2,3,"WIZARD_ETH_ETH_STATIC_STEP3")," "),t.xp6(2),t.MGl("href","https://",e.ipData.address,":8000",t.LSH),t.xp6(1),t.hij("https://",e.ipData.address,":8000")}}function Bt(i,o){1&i&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"WIZARD_ETH_ETH_DHCP_STEP3")))}function Gt(i,o){1&i&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij("",t.lcZ(2,1,"WIZARD_ETH_ETH_DHCP_STEP4")," https://IP:8000"))}function $t(i,o){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.YNc(7,Vt,5,5,"p",5),t.YNc(8,Bt,3,3,"p",5),t.YNc(9,Gt,3,3,"p",5),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"WIZARD_ETH_ETH_STEP1")),t.xp6(3),t.Oqu(t.lcZ(6,7,"WIZARD_ETH_ETH_STEP2")),t.xp6(2),t.Q6J("ngIf","Static"===e.ipData.type),t.xp6(1),t.Q6J("ngIf","Static"!==e.ipData.type),t.xp6(1),t.Q6J("ngIf","Static"!==e.ipData.type)}}function Xt(i,o){1&i&&(t.TgZ(0,"p"),t.TgZ(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WIZARD_NO_WIFI_CONNECTION")))}function Kt(i,o){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"a",9),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"WIZARD_ETH_WIFI_STEP1")),t.xp6(3),t.hij("",t.lcZ(6,7,"WIZARD_ETH_WIFI_STEP2")," "),t.xp6(2),t.MGl("href","https://",e.wifiData.address,":8000",t.LSH),t.xp6(1),t.hij("https://",e.wifiData.address,":8000"),t.xp6(2),t.Oqu(t.lcZ(11,9,"WIZARD_ETH_WIFI_STEP3"))}}function te(i,o){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Xt,4,3,"p",5),t.YNc(2,Kt,12,11,"div",5),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.wifiData.address),t.xp6(1),t.Q6J("ngIf",e.wifiData.address)}}function ee(i,o){1&i&&(t.TgZ(0,"p"),t.TgZ(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WIZARD_NO_ETH_CONNECTION")))}function ie(i,o){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ee,4,3,"p",5),t.TgZ(2,"p"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"translate"),t.TgZ(8,"a",9),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.ipData.address),t.xp6(2),t.Oqu(t.lcZ(4,6,"WIZARD_WIFI_ETH_STEP1")),t.xp6(3),t.hij("",t.lcZ(7,8,"WIZARD_WIFI_ETH_STEP2")," "),t.xp6(2),t.MGl("href","https://",e.ipData.address,":8000",t.LSH),t.xp6(1),t.hij("https://",e.ipData.address,":8000"),t.xp6(2),t.Oqu(t.lcZ(12,10,"WIZARD_WIFI_ETH_STEP3"))}}function ne(i,o){1&i&&(t.TgZ(0,"p"),t.TgZ(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WIZARD_NO_WIFI_CONNECTION")))}function ae(i,o){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.TgZ(10,"a",9),t._uU(11),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"WIZARD_WIFI_WIFI_STEP1")),t.xp6(3),t.Oqu(t.lcZ(6,7,"WIZARD_WIFI_WIFI_STEP2")),t.xp6(3),t.hij("",t.lcZ(9,9,"WIZARD_WIFI_WIFI_STEP3"),": "),t.xp6(2),t.MGl("href","https://",e.wifiData.address,":8000",t.LSH),t.xp6(1),t.hij("https://",e.wifiData.address,":8000")}}function oe(i,o){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ne,4,3,"p",5),t.YNc(2,ae,12,11,"div",5),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.wifiData.address),t.xp6(1),t.Q6J("ngIf",e.wifiData.address)}}let re=(()=>{class i{constructor(){}ngOnInit(){this.ip=window.location.hostname}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-connection-info"]],inputs:{goToStep:"goToStep",prevStep:"prevStep",wifiData:"wifiData",ipData:"ipData"},decls:23,vars:23,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_reset-user-data_32"],[1,"wizard-card"],[1,"wizard-card-title"],[1,"wizard-card-body"],[4,"ngIf"],[1,"wizard-card-footer","multiple-buttons"],["nz-button","","type","button","nzType","default",3,"click"],["nz-button","","type","button","nzType","default","id","confirm_button",3,"click"],["target","_blank",3,"href"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,$t,10,9,"div",5),t.YNc(13,te,3,2,"div",5),t.YNc(14,ie,13,12,"div",5),t.YNc(15,oe,3,2,"div",5),t.qZA(),t.TgZ(16,"div",6),t.TgZ(17,"button",7),t.NdJ("click",function(){return a.goToStep(a.prevStep)}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"button",8),t.NdJ("click",function(){return a.goToStep("start-wizard")}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,13,"CONNECT_VIA_CONF_NETWORK"),"\n"),t.xp6(3),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(7,15,"SCU_CONNECTION")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.Oqu(t.lcZ(11,17,"CONNECTION_INSTRUCTION")),t.xp6(2),t.Q6J("ngIf",a.ip===a.ipData.address&&"ethernet"===a.prevStep),t.xp6(1),t.Q6J("ngIf",a.ip===a.ipData.address&&"wifi-ip"===a.prevStep),t.xp6(1),t.Q6J("ngIf",a.ip===a.wifiData.access_point_address&&"ethernet"===a.prevStep),t.xp6(1),t.Q6J("ngIf",a.ip===a.wifiData.access_point_address&&"wifi-ip"===a.prevStep),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(19,19,"GO_BACK")),t.xp6(3),t.Oqu(t.lcZ(22,21,"CONFIRM")))},directives:[T.O5,l.ix,_.dQ,u.w],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();const H=function(i){return{productName:i}};let se=(()=>{class i{constructor(e){this.appLoadService=e}ngOnInit(){this.isWifi=this.appLoadService.user.isWifi}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.V))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-start-wizard"]],inputs:{goToStep:"goToStep"},decls:19,vars:25,consts:[[1,"wizard-header","text-line"],[1,"wizard-card"],[1,"wizard-card-title"],[1,"wizard-card-body"],[1,"wizard-card-footer"],["nz-button","","type","submit","nzType","primary",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",3),t.TgZ(8,"p"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"p"),t.TgZ(12,"b"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"button",5),t.NdJ("click",function(){return a.goToStep("upload-configuration")}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.xi3(2,9,"ABB_SCU200",t.VKq(21,H,a.isWifi?"SCU200-W":"SCU200")),"\n"),t.xp6(3),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.xi3(6,12,"ABB_WELCOME_TEXT",t.VKq(23,H,a.isWifi?"SCU200-W":"SCU200"))," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.Oqu(t.lcZ(10,15,"START_WIZARD_TEXT")),t.xp6(4),t.hij("",t.lcZ(14,17,"START_WIZARD_SKIP_TEXT"),"."),t.xp6(3),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(18,19,"START_WIZARD")))},directives:[l.ix,_.dQ,u.w],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();const de=["uploadTemplate"];function ce(i,o){1&i&&(t.TgZ(0,"div",8),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",9),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",10),t.TgZ(7,"button",11),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",12),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,5,"UPLOAD_CONFIGURATION")," "),t.xp6(3),t.hij(" ",t.lcZ(5,7,"WIZARD_UPLOAD_TEXT3")," "),t.xp6(3),t.uIk("id","modal_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(9,9,"DONT_UPLOAD")),t.xp6(3),t.Oqu(t.lcZ(12,11,"SELECT_AND_UPLOAD")))}let pe=(()=>{class i{constructor(e){this.modalService=e}showModal(){this.modalService.showModal(this.uploadTemplate,()=>{})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(I.Z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-upload-configuration"]],viewQuery:function(e,a){if(1&e&&t.Gf(de,5),2&e){let n;t.iGM(n=t.CRH())&&(a.uploadTemplate=n.first)}},inputs:{goToStep:"goToStep"},decls:23,vars:23,consts:[[1,"wizard-header","text-line"],[1,"wizard-card"],[1,"wizard-card-title"],[1,"wizard-card-body"],[1,"wizard-card-footer","multiple-buttons"],["nz-button","","type","button","nzType","primary",1,"black",3,"click"],["nz-button","","type","submit","nzType","primary",3,"click"],["uploadTemplate",""],[1,"p-dialog-header"],[1,"p-dialog-body",2,"width","400px"],[1,"p-dialog-footer"],["nz-button","","appHideModal",""],["nz-button","","nzType","primary","appHideModal",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",3),t.TgZ(8,"p"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.TgZ(14,"div",4),t.TgZ(15,"button",5),t.NdJ("click",function(){return a.showModal()}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",6),t.NdJ("click",function(){return a.goToStep("tariffs")}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(21,ce,13,13,"ng-template",null,7,t.W1O)),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(2,11,"START_WIZARD"),"\n"),t.xp6(3),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(6,13,"BEFORE_START_CONFIGURATION")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.Oqu(t.lcZ(10,15,"WIZARD_UPLOAD_TEXT1")),t.xp6(3),t.Oqu(t.lcZ(13,17,"WIZARD_UPLOAD_TEXT2")),t.xp6(3),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(17,19,"UPLOAD_CONFIGURATION")),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(20,21,"START_FROM_SCRATCH")))},directives:[l.ix,_.dQ,u.w,N.u],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})(),le=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-tariffs"]],inputs:{goToStep:"goToStep"},decls:19,vars:20,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_label_32"],[1,"wizard-card"],[1,"wizard-card-title"],[1,"wizard-card-body"],[1,"wizard-card-footer","multiple-buttons"],["nz-button","","type","button","nzType","primary",1,"black",3,"click"],["nz-button","","type","submit","nzType","primary",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.TgZ(12,"div",5),t.TgZ(13,"button",6),t.NdJ("click",function(){return a.goToStep("scanning")}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"button",7),t.NdJ("click",function(){return a.goToStep("tariffs-configuration")}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,10,"TARIFFS"),"\n"),t.xp6(3),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(7,12,"SET_PLANT_TARIFFS_TEXT")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.Oqu(t.lcZ(11,14,"TARIFFS_WIZARD_TEXT")),t.xp6(3),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(15,16,"SKIP_TO_SCANNING")),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(18,18,"CONTINUE")))},directives:[l.ix,_.dQ,u.w],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();var O=s(408),J=s(6695),_e=s(2980);const ue=["addContractTemplate"];function ge(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",12),t.TgZ(1,"span",13),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"span",14),t.TgZ(7,"button",15),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().addContractDrawer(r)}),t.ALo(8,"translate"),t._UZ(9,"i",16),t.qZA(),t.TgZ(10,"button",15),t.NdJ("click",function(){const r=t.CHM(e).index,d=t.oxw();return d.removeContract(d.configuration.contracts,r)}),t.ALo(11,"translate"),t._UZ(12,"i",17),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,a=o.index;t.xp6(2),t.AsE("",t.lcZ(3,5,"CONTRACT")," ",a+1,""),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(8,7,"EDIT")),t.xp6(3),t.s9C("nzTooltipTitle",t.lcZ(11,9,"REMOVE"))}}function me(i,o){if(1&i&&t._UZ(0,"app-energy-monitoring-contracts-configuration",18),2&i){const e=t.oxw();t.Q6J("editContract",e.editContract)("contracts",e.configuration.contracts)}}let fe=(()=>{class i{constructor(e,a,n,r){this.translate=e,this.toastr=a,this.modalService=n,this.drawerService=r}removeContract(e,a){const n=this.configuration.contracts[a].name;this.modalService.showConfirm(this.translate.instant("CONTRACT_REMOVE",{name:"<strong>"+n+"</strong>"}),()=>{e.splice(a,1),this.modalService.hide(),this.toastr.success(this.translate.instant("CONTRACT_REMOVE_SUCCESS",{name:"<strong>"+n+"</strong>"}))})}addContractDrawer(e){this.toastr.clear(),this.editContract=e?Object.assign({},e):{type:1,tariffs:[],deviceIds:[]},this.drawerService.showDrawer(this.addContractTemplate).subscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.sK),t.Y36(w._),t.Y36(I.Z),t.Y36(O.z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-tariffs-configuration"]],viewQuery:function(e,a){if(1&e&&t.Gf(ue,5),2&e){let n;t.iGM(n=t.CRH())&&(a.addContractTemplate=n.first)}},inputs:{goToStep:"goToStep",configuration:"configuration"},decls:30,vars:28,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_label_32"],[1,"wizard-card"],[1,"wizard-card-title"],[1,"wizard-card-body"],[1,"item-list"],["class","item",4,"ngFor","ngForOf"],["nz-button","","type","button","nzType","default",3,"click"],[1,"icon_abb_16","icon-abb_plus_16"],[1,"wizard-card-footer","multiple-buttons"],["nz-button","","type","submit","nzType","primary",3,"click"],["addContractTemplate",""],[1,"item"],[1,"text"],[1,"icons"],["nz-button","","nzTooltipPlacement","left","nz-tooltip","",3,"nzTooltipTitle","click"],[1,"icon_abb_16","icon-abb_edit_16"],[1,"icon_abb_16","icon-abb_close_16"],["type","wizard",3,"editContract","contracts"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",5),t.YNc(16,ge,13,11,"div",6),t.qZA(),t.TgZ(17,"button",7),t.NdJ("click",function(){return a.addContractDrawer()}),t._UZ(18,"i",8),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"button",7),t.NdJ("click",function(){return a.goToStep("tariffs")}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"button",10),t.NdJ("click",function(){return a.goToStep("scanning")}),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(28,me,1,2,"ng-template",null,11,t.W1O)),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,14,"TARIFFS"),"\n"),t.xp6(3),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(7,16,"CONTRACTS")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.Oqu(t.lcZ(11,18,"BY_SELECTING_ADD_NEW_CONTRACT")),t.xp6(3),t.Oqu(t.lcZ(14,20,"EDIT_BUTTON_IS_USED_MODIFY_CONTRACT")),t.xp6(3),t.Q6J("ngForOf",a.configuration.contracts),t.xp6(1),t.uIk("id","modal_ok_button"),t.xp6(2),t.Oqu(t.lcZ(20,22,"ADD_NEW_CONTRACT")),t.xp6(3),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(24,24,"GO_BACK")),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(27,26,"CONTINUE")))},directives:[T.sg,l.ix,_.dQ,u.w,J.SY,_e.Z],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();var Te=s(9010),Ze=s(8494),xe=s(6093),ve=s(6462),j=s(7003);const Ae=["setupRtuDrawer"];function he(i,o){1&i&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SELECT_PORTS")," "))}function Ce(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",9),t.TgZ(5,"div",10),t.TgZ(6,"span",11),t.TgZ(7,"b"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"i",12),t.ALo(11,"translate"),t._uU(12),t.ALo(13,"translate"),t.TgZ(14,"span",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().openSetupRtuDrawer()}),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.TgZ(17,"span",14),t.TgZ(18,"nz-switch",15),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().scan.rs485=n}),t.qZA(),t.TgZ(19,"span"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",10),t.TgZ(23,"span",11),t.TgZ(24,"b"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"span",14),t.TgZ(30,"nz-switch",16),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().scan.wmbus=n}),t.qZA(),t.TgZ(31,"span"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",17),t.TgZ(35,"span",11),t.TgZ(36,"b"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"i",12),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.TgZ(41,"div",10),t.TgZ(42,"span",11),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.qZA(),t.TgZ(45,"div",10),t.TgZ(46,"span",11),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"span",14),t.TgZ(50,"nz-switch",15),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().scan.io=n}),t.qZA(),t.TgZ(51,"span"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(54,"div",10),t.TgZ(55,"span",11),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"span",14),t.TgZ(59,"nz-switch",15),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().scan.ssd=n}),t.qZA(),t.TgZ(60,"span"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"div",10),t.TgZ(64,"span",11),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"span",14),t.TgZ(68,"nz-switch",15),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().scan.mod=n}),t.qZA(),t.TgZ(69,"span"),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(72,"div",10),t.TgZ(73,"span",11),t.TgZ(74,"b"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("@enterAnimation",void 0),t.xp6(2),t.Oqu(t.lcZ(3,27,"LIST_PORTS_TEXT")),t.xp6(6),t.Oqu(t.lcZ(9,29,"RS485")),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(11,31,"WIZARD_RTU_TOOLTIP")),t.xp6(2),t.hij(" ",t.lcZ(13,33,"MODBUS_RTU_DEVICES"),""),t.xp6(3),t.Oqu(t.lcZ(16,35,"SETUP")),t.xp6(3),t.Q6J("ngModel",e.scan.rs485),t.xp6(2),t.Oqu(t.lcZ(21,37,e.scan.rs485?"ON":"OFF")),t.xp6(5),t.Oqu(t.lcZ(26,39,"WIRELESS_MBUS")),t.xp6(2),t.hij(" ",t.lcZ(28,41,"WIRELESS_MBUS_METERS")," "),t.xp6(3),t.Q6J("ngModel",e.scan.wmbus)("disabled",!0),t.xp6(2),t.Oqu(t.lcZ(33,43,e.scan.wmbus?"ON":"OFF")),t.xp6(5),t.Oqu(t.lcZ(38,45,"INSITE_BUS")),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(40,47,"WIZARD_INSITE_BUS_TOOLTIP")),t.xp6(4),t.Oqu(t.lcZ(44,49,"CURRENT_SENSOR_MANUALLY")),t.xp6(4),t.Oqu(t.lcZ(48,51,"IO_AUTO_ASSIGNMENT")),t.xp6(3),t.Q6J("ngModel",e.scan.io),t.xp6(2),t.Oqu(t.lcZ(53,53,e.scan.io?"ON":"OFF")),t.xp6(4),t.Oqu(t.lcZ(57,55,"SSD_AUTO_ASSIGNMENT")),t.xp6(3),t.Q6J("ngModel",e.scan.ssd),t.xp6(2),t.Oqu(t.lcZ(62,57,e.scan.ssd?"ON":"OFF")),t.xp6(4),t.Oqu(t.lcZ(66,59,"MOD_AUTO_ASSIGNMENT")),t.xp6(3),t.Q6J("ngModel",e.scan.mod),t.xp6(2),t.Oqu(t.lcZ(71,61,e.scan.mod?"ON":"OFF")),t.xp6(5),t.Oqu(t.lcZ(76,63,"MODBUS_TCP_DEVICES")),t.xp6(2),t.hij(" ",t.lcZ(78,65,"MUST_BE_ADDED_MANUALLY")," ")}}function be(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().goToStep("tariffs")}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().scanDevices()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(3,4,"GO_BACK")),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(6,6,"CONTINUE")))}function ze(i,o){1&i&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SCANNING_AUTO_ASSIGNMENT")," "))}function Se(i,o){if(1&i&&(t.TgZ(0,"div",8),t._UZ(1,"app-loader",21),t.qZA()),2&i){const e=t.oxw();t.Q6J("@enterAnimation",void 0),t.xp6(1),t.Q6J("text",e.activeScan)}}function we(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeDrawer()}),t._UZ(1,"i",23),t.qZA(),t.TgZ(2,"div",24),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",25),t.TgZ(6,"form",null,26),t.TgZ(8,"div",27),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"app-select",28),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().setupRtu.baudrate=n}),t.qZA(),t.qZA(),t.TgZ(13,"div",27),t.TgZ(14,"label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"app-select",29),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().setupRtu.databit=n}),t.qZA(),t.qZA(),t.TgZ(18,"div",27),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"app-select",30),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().setupRtu.parity=n}),t.qZA(),t.qZA(),t.TgZ(23,"div",27),t.TgZ(24,"label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"app-select",31),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().setupRtu.stopbit=n}),t.qZA(),t.qZA(),t.TgZ(28,"div",27),t._UZ(29,"label"),t.TgZ(30,"button",32),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().closeDrawer()}),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(7),a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,16,"SETUP")," "),t.xp6(7),t.hij("",t.lcZ(11,18,"BAUDRATE"),":"),t.xp6(2),t.Q6J("model",a.setupRtu.baudrate)("options",a.baudrates),t.xp6(3),t.hij("",t.lcZ(16,20,"BYTESIZE"),":"),t.xp6(2),t.Q6J("model",a.setupRtu.databit)("options",a.databits),t.xp6(3),t.hij("",t.lcZ(21,22,"PARITY"),":"),t.xp6(2),t.Q6J("model",a.setupRtu.parity)("options",a.parities),t.xp6(3),t.hij("",t.lcZ(26,24,"STOP_BITS"),":"),t.xp6(2),t.Q6J("model",a.setupRtu.stopbit)("options",a.stopbits),t.xp6(3),t.Q6J("form",e),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(32,26,"SAVE_SETUP"))}}let qe=(()=>{class i{constructor(e,a,n,r,d,g,x){this.drawerService=e,this.translate=a,this.cmmioconfService=n,this.modbusRtuDevicesService=r,this.wizardService=d,this.toastr=g,this.webSocketService=x,this.scan={rs485:!0,wmbus:!0,io:!0,ssd:!0,mod:!0},this.scans=[],this.scanning=!1,this.setupRtu={baudrate:19200,databit:8,parity:"E",stopbit:1},this.parities=[{id:"N",text:"NONE"},{id:"O",text:"ODD"},{id:"E",text:"EVEN"}],this.databits=[{id:5,text:"5"},{id:6,text:"6"},{id:7,text:"7"},{id:8,text:"8"}],this.stopbits=[{id:1,text:"1"},{id:2,text:"2"}],this.baudrates=[{id:1200,text:"1200"},{id:2400,text:"2400"},{id:4800,text:"4800"},{id:9600,text:"9600"},{id:19200,text:"19200"},{id:38400,text:"38400"},{id:57600,text:"57600"},{id:115200,text:"115200"}],this.autoassign=v=>{this.cmmioconfService.autoassign(v).subscribe(Q=>{this.initWatchProcess(Q.pid,"autoassign")},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR"))})},this.scanRtu=()=>{this.modbusRtuDevicesService.scan(this.setupRtu).subscribe(v=>{this.initWatchProcess(v.pid,"autoassign")},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR"))})},this.loadDevices=()=>{this.wizardService.getConfiguration().subscribe(v=>{this.configuration.devices=v.devices,this.proceedScan()},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.proceedScan()})}}ngOnInit(){}scanDevices(){this.scanning=!0,this.scans=[],Object.keys(this.scan).forEach(e=>{this.scan[e]&&("rs485"===e?this.scans.push({function:this.scanRtu,msg:this.translate.instant("SCANNING_RTU")}):"io"===e?this.scans.push({function:this.autoassign,msg:this.translate.instant("AUTOASSIGNING_IO"),type:"IoModule"}):"ssd"===e?this.scans.push({function:this.autoassign,msg:this.translate.instant("AUTOASSIGNING_SSD"),type:"AuxiliaryContact"}):"mod"===e&&this.scans.push({function:this.autoassign,msg:this.translate.instant("AUTOASSIGNING_MOD"),type:"ModAriArh"}))}),this.scans.length&&this.scans.push({function:this.loadDevices,msg:this.translate.instant("LOADING_DEVICES")}),this.proceedScan()}proceedScan(){if(!this.scans.length)return void this.scansFinished();const e=this.scans.shift();this.activeScan=e.msg,e.function(e.type)}initWatchProcess(e,a){this.subscriptionSocket&&this.subscriptionSocket.unsubscribe(),this.webSocketService.setCollectData({process_id:e}),this.subscriptionSocket=this.webSocketService.socket$Observable.subscribe(n=>{n.disconnected?this.toastr.error(this.translate.instant("REQUEST_ERROR"),!0):n.process_id&&n.process_id===e&&this.proceedScan()})}scansFinished(){this.subscriptionSocket&&this.subscriptionSocket.unsubscribe(),this.goToStep("setup")}openSetupRtuDrawer(){this.drawerService.showDrawer(this.setupRtuDrawer).subscribe()}closeDrawer(){this.drawerService.hide()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(O.z),t.Y36(p.sK),t.Y36(Te.I),t.Y36(Ze.r),t.Y36(W),t.Y36(w._),t.Y36(xe.l))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-scanning"]],viewQuery:function(e,a){if(1&e&&t.Gf(Ae,5),2&e){let n;t.iGM(n=t.CRH())&&(a.setupRtuDrawer=n.first)}},inputs:{goToStep:"goToStep",configuration:"configuration"},decls:12,vars:9,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_search_32"],[1,"wizard-card"],["class","wizard-card-title",4,"ngIf"],["class","wizard-card-body",4,"ngIf"],["class","wizard-card-footer multiple-buttons",4,"ngIf"],["setupRtuDrawer",""],[1,"wizard-card-title"],[1,"wizard-card-body"],[1,"ports-list"],[1,"item"],[1,"text"],["nz-tooltip","",1,"icon_abb_16","icon-abb_help-circle-2_16",3,"nzTooltipTitle"],[1,"red",3,"click"],[1,"icons"],["nzSize","small",3,"ngModel","ngModelChange"],["nzSize","small",3,"ngModel","disabled","ngModelChange"],[1,"item","header"],[1,"wizard-card-footer","multiple-buttons"],["nz-button","","type","button","nzType","default",3,"click"],["nz-button","","type","submit","nzType","primary",3,"click"],["type","custom",3,"text"],["tabIndex","-1","nz-button","","id","close_device_button",1,"drawer-button-close",3,"click"],[1,"icon_abb_16","icon-abb_close_16"],[1,"drawer-title","text-line"],[1,"drawer-body"],["formAdd","ngForm"],[1,"form-group"],["inputId","baudrate_select",3,"model","options","modelChange"],["inputId","databit_select",3,"model","options","modelChange"],["inputId","parity_select",3,"model","options","modelChange"],["inputId","stopbit_select",3,"model","options","modelChange"],["type","submit","nz-button","","nzType","primary",3,"form","appFormButtonClick"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,he,3,4,"div",3),t.YNc(6,Ce,79,67,"div",4),t.YNc(7,be,7,8,"div",5),t.YNc(8,ze,3,4,"div",3),t.YNc(9,Se,2,2,"div",4),t.qZA(),t.YNc(10,we,33,28,"ng-template",null,6,t.W1O)),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,7,"SCANNING_PORTS"),"\n"),t.xp6(3),t.Q6J("ngIf",!a.scanning),t.xp6(1),t.Q6J("ngIf",!a.scanning),t.xp6(1),t.Q6J("ngIf",!a.scanning),t.xp6(1),t.Q6J("ngIf",a.scanning),t.xp6(1),t.Q6J("ngIf",a.scanning))},directives:[T.O5,J.SY,ve.i,c.JJ,c.On,l.ix,_.dQ,u.w,E.R,c._Y,c.JL,c.F,j.H,D.b],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();var Z=s(5724),V=s(868),Ie=s(4639),De=s(656),Ue=s(3256),ye=s(161),Me=s(1688),We=s(2456),B=s(3868),Ne=s(2334),Ee=s(442);const Oe=["addDeviceTemplate"],Je=["addDeviceAssignTemplate"],Re=["addRegisterTemplate"];function Le(i,o){if(1&i&&(t._uU(0),t.ALo(1,"translate"),t._UZ(2,"nz-badge",23)),2&i){const e=t.oxw(2);t.hij("",t.lcZ(1,2,"DEVICE_LIST")," "),t.xp6(2),t.Q6J("nzCount",e.configuration.devices.ThirdPartyRTU.length+e.configuration.devices.MeterWMbus.length+e.configuration.devices.ThirdPartyTCP.length)}}function Qe(i,o){1&i&&(t._UZ(0,"i",31),t.ALo(1,"translate")),2&i&&t.s9C("nzTooltipTitle",t.lcZ(1,1,"WIZARD_DEVICE_NOT_RECOGNIZED_TOOLTIP"))}function ke(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"span",25),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.YNc(6,Qe,2,3,"i",26),t.qZA(),t.TgZ(7,"span",27),t.TgZ(8,"app-select",28),t.NdJ("modelChange",function(n){return t.CHM(e).$implicit.contract=n}),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"app-select",28),t.NdJ("modelChange",function(n){return t.CHM(e).$implicit.device_category=n}),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"button",29),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).addDeviceDrawer(r,"ThirdPartyRTU")}),t.ALo(13,"translate"),t._UZ(14,"i",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,a=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,17,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.unknown&&!e.model&&!e.variables),t.xp6(2),t.Q6J("small",!0)("showSearch",!1)("model",e.contract)("placeholder",t.lcZ(9,19,"CONTRACT"))("clearable",!0)("options",a.configuration.contracts),t.xp6(2),t.Q6J("small",!0)("showSearch",!1)("model",e.device_category)("placeholder",t.lcZ(11,21,"DEVICE_CATEGORY"))("clearable",!0)("options",a.deviceCategories),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(13,23,"SETUP"))}}function Fe(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"span",25),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"span",27),t.TgZ(7,"button",29),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).addDeviceDrawer(r,"WMBusModule")}),t.ALo(8,"translate"),t._UZ(9,"i",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit;t.xp6(2),t.AsE(" ",t.lcZ(3,4,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(8,6,"SETUP"))}}function Pe(i,o){1&i&&(t._UZ(0,"i",31),t.ALo(1,"translate")),2&i&&t.s9C("nzTooltipTitle",t.lcZ(1,1,"WIZARD_MBUS_KEY_TOOLTIP"))}function Ye(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"span",25),t.TgZ(2,"b"),t._uU(3),t.qZA(),t.YNc(4,Pe,2,3,"i",26),t.qZA(),t.TgZ(5,"span",27),t.TgZ(6,"app-select",28),t.NdJ("modelChange",function(n){return t.CHM(e).$implicit.contract=n}),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"app-select",28),t.NdJ("modelChange",function(n){return t.CHM(e).$implicit.device_category=n}),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",29),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).addDeviceDrawer(r,"MeterWMbus")}),t.ALo(11,"translate"),t._UZ(12,"i",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,a=t.oxw(2);t.xp6(3),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",!e.module_id),t.xp6(2),t.Q6J("small",!0)("showSearch",!1)("model",e.contract)("placeholder",t.lcZ(7,15,"CONTRACT"))("clearable",!0)("options",a.configuration.contracts),t.xp6(2),t.Q6J("small",!0)("showSearch",!1)("model",e.device_category)("placeholder",t.lcZ(9,17,"DEVICE_CATEGORY"))("clearable",!0)("options",a.deviceCategories),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(11,19,"SETUP"))}}function He(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"span",25),t.TgZ(2,"b"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"span",27),t.TgZ(5,"app-select",28),t.NdJ("modelChange",function(n){return t.CHM(e).$implicit.contract=n}),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"app-select",28),t.NdJ("modelChange",function(n){return t.CHM(e).$implicit.device_category=n}),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",29),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).addDeviceDrawer(r,"ThirdPartyTCP")}),t.ALo(10,"translate"),t._UZ(11,"i",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,a=t.oxw(2);t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Q6J("small",!0)("showSearch",!1)("model",e.contract)("placeholder",t.lcZ(6,14,"CONTRACT"))("clearable",!0)("options",a.configuration.contracts),t.xp6(2),t.Q6J("small",!0)("showSearch",!1)("model",e.device_category)("placeholder",t.lcZ(8,16,"DEVICE_CATEGORY"))("clearable",!0)("options",a.deviceCategories),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(10,18,"SETUP"))}}function je(i,o){if(1&i&&(t._uU(0),t.ALo(1,"translate"),t._UZ(2,"nz-badge",23)),2&i){const e=t.oxw(2);t.hij("",t.lcZ(1,2,"FOUND_IN_INSITE")," "),t.xp6(2),t.Q6J("nzCount",e.configuration.devices.IoModule.length+e.configuration.devices.AuxiliaryContact.length+e.configuration.devices.ModAriArh.length+e.configuration.devices.CurrentSensor.length)}}function Ve(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",33),t.TgZ(1,"span",25),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"span",27),t.TgZ(7,"app-select",34),t.NdJ("modelChange",function(n){return t.CHM(e).$implicit.contract=n}),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"app-select",34),t.NdJ("modelChange",function(n){return t.CHM(e).$implicit.device_category=n}),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",29),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).addDeviceDrawer(r,"IoModulePort")}),t.ALo(12,"translate"),t._UZ(13,"i",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,a=t.oxw(3);t.xp6(2),t.AsE("",t.lcZ(3,18,"PORT"),": ",e.port," "),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Q6J("small",!0)("showSearch",!1)("model",e.contract)("placeholder",t.lcZ(8,20,"CONTRACT"))("clearable",!0)("disabled",5!==e.connected_device_type)("options",a.configuration.contracts),t.xp6(2),t.Q6J("small",!0)("showSearch",!1)("model",e.device_category)("placeholder",t.lcZ(10,22,"DEVICE_CATEGORY"))("clearable",!0)("disabled",5!==e.connected_device_type)("options",a.deviceCategoriesIo),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(12,24,"SETUP"))}}function Be(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",24),t.TgZ(2,"span",25),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"valueFromId"),t.TgZ(6,"b"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"span",27),t.TgZ(9,"button",29),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).addDeviceDrawer(r,"IoModule")}),t.ALo(10,"translate"),t._UZ(11,"i",30),t.qZA(),t.qZA(),t.qZA(),t.YNc(12,Ve,14,26,"div",32),t.qZA()}if(2&i){const e=o.$implicit,a=t.oxw(2);t.xp6(3),t.lnq("",t.lcZ(4,6,"MODBUS_ID"),": ",e.modbus_id," (",t.xi3(5,8,e.type_id,a.configuration.ioModulesTypes),")"),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(10,11,"SETUP")),t.xp6(3),t.Q6J("ngForOf",e.ports)}}function Ge(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"span",25),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"span",27),t.TgZ(7,"button",29),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).addDeviceDrawer(r,"AuxiliaryContact")}),t.ALo(8,"translate"),t._UZ(9,"i",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,4,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(8,6,"SETUP"))}}function $e(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"span",25),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"span",27),t.TgZ(7,"button",29),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).addDeviceDrawer(r,"ModAriArh")}),t.ALo(8,"translate"),t._UZ(9,"i",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,4,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(8,6,"SETUP"))}}function Xe(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"span",25),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"span",27),t.TgZ(7,"app-select",28),t.NdJ("modelChange",function(n){return t.CHM(e).$implicit.contract=n}),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"app-select",28),t.NdJ("modelChange",function(n){return t.CHM(e).$implicit.device_category=n}),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",29),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).addDeviceDrawer(r,"CurrentSensor")}),t.ALo(12,"translate"),t._UZ(13,"i",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,a=t.oxw(2);t.xp6(2),t.AsE("",t.lcZ(3,16,"MODBUS_ID"),": ",e.modbus_id,""),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Q6J("small",!0)("showSearch",!1)("model",e.contract)("placeholder",t.lcZ(8,18,"CONTRACT"))("clearable",!0)("options",a.configuration.contracts),t.xp6(2),t.Q6J("small",!0)("showSearch",!1)("model",e.device_category)("placeholder",t.lcZ(10,20,"DEVICE_CATEGORY"))("clearable",!0)("options",a.deviceCategoriesSensors),t.xp6(2),t.s9C("nzTooltipTitle",t.lcZ(12,22,"SETUP"))}}function Ke(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nz-tabset",7),t.TgZ(1,"nz-tab",8),t.YNc(2,Le,3,4,"ng-template",null,9,t.W1O),t.TgZ(4,"div",10),t.TgZ(5,"div",11),t.TgZ(6,"div",12),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",13),t.YNc(10,ke,15,25,"div",14),t.qZA(),t.TgZ(11,"div",12),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",13),t.YNc(15,Fe,10,8,"div",14),t.qZA(),t.TgZ(16,"div",13),t.YNc(17,Ye,13,21,"div",14),t.qZA(),t.TgZ(18,"div",12),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",13),t.YNc(22,He,12,20,"div",14),t.TgZ(23,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().addDeviceDrawer(null,"ThirdPartyTCP")}),t._UZ(24,"i",16),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",17),t.TgZ(28,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveDevices("scanning","return")}),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"button",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.configuration.setupComplete=!0,n.configuration.setup=!0}),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"nz-tab",8),t.YNc(35,je,3,4,"ng-template",null,20,t.W1O),t.TgZ(37,"div",10),t.TgZ(38,"div",11),t.TgZ(39,"div",12),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",13),t.YNc(43,Be,13,13,"div",21),t.qZA(),t.TgZ(44,"div",12),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",13),t.YNc(48,Ge,10,8,"div",14),t.qZA(),t.TgZ(49,"div",12),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"div",13),t.YNc(53,$e,10,8,"div",14),t.qZA(),t.TgZ(54,"div",12),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",13),t.YNc(58,Xe,14,24,"div",14),t._UZ(59,"app-cmmioconf-add",22),t.qZA(),t.qZA(),t.TgZ(60,"div",17),t.TgZ(61,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveDevices("scanning","return")}),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"button",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.configuration.setupComplete=!0,n.configuration.setup=!0}),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(3),a=t.MAs(36),n=t.oxw();t.Q6J("nzAnimated",!1),t.xp6(1),t.Q6J("nzTitle",e),t.xp6(4),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(8,36,"FOUND_IN_RS485")," "),t.xp6(3),t.Q6J("ngForOf",n.configuration.devices.ThirdPartyRTU),t.xp6(2),t.hij(" ",t.lcZ(13,38,"FOUND_IN_WIRELESS_MBUS")," "),t.xp6(3),t.Q6J("ngForOf",n.configuration.devices.WMBusModule),t.xp6(2),t.Q6J("ngForOf",n.configuration.devices.MeterWMbus),t.xp6(2),t.hij(" ",t.lcZ(20,40,"MODBUS_TCP_DEVICES")," "),t.xp6(3),t.Q6J("ngForOf",n.configuration.devices.ThirdPartyTCP),t.xp6(1),t.uIk("id","modal_ok_button"),t.xp6(2),t.Oqu(t.lcZ(26,42,"ADD_NEW_MODBUS_TCP_DEVICE")),t.xp6(3),t.Q6J("nzLoading","return"===n.clickedButton)("disabled",n.saving),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(30,44,"SCAN_AGAIN")),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(33,46,"CONTINUE")),t.xp6(2),t.Q6J("nzTitle",a),t.xp6(4),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(41,48,"IO_MODULES")," "),t.xp6(3),t.Q6J("ngForOf",n.configuration.devices.IoModule),t.xp6(2),t.hij(" ",t.lcZ(46,50,"SSD")," "),t.xp6(3),t.Q6J("ngForOf",n.configuration.devices.AuxiliaryContact),t.xp6(2),t.hij(" ",t.lcZ(51,52,"MOD")," "),t.xp6(3),t.Q6J("ngForOf",n.configuration.devices.ModAriArh),t.xp6(2),t.hij(" ",t.lcZ(56,54,"CURRENT_SENSORS")," "),t.xp6(3),t.Q6J("ngForOf",n.configuration.devices.CurrentSensor),t.xp6(1),t.Q6J("existingDevices",n.existingDevices)("callbackChange",n.getCurrentSensors.bind(n)),t.xp6(2),t.Q6J("nzLoading","return"===n.clickedButton)("disabled",n.saving),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(63,56,"SCAN_AGAIN")),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(66,58,"CONTINUE"))}}function ti(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",35),t.TgZ(1,"div",36),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",11),t.TgZ(5,"p",37),t.TgZ(6,"b"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.ALo(14,"translate"),t.TgZ(15,"b"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",17),t.TgZ(19,"button",38),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveDevices("scanning","return")}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveDevices("end","continue")}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(3,17,"SELECT_NEXT")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(3),t.AsE("",e.configuration.devices.ThirdPartyRTU.length+e.configuration.devices.MeterWMbus.length+e.configuration.devices.ThirdPartyTCP.length+e.configuration.devices.IoModule.length+e.configuration.devices.AuxiliaryContact.length+e.configuration.devices.ModAriArh.length+e.configuration.devices.CurrentSensor.length," ",t.lcZ(8,19,"DEVICES_SUCCESFULLY_CONFIGURED"),"."),t.xp6(3),t.Oqu(t.lcZ(11,21,"WIZARD_SETUP_TEXT1")),t.xp6(3),t.hij("",t.lcZ(14,23,"WIZARD_SETUP_TEX2")," "),t.xp6(3),t.AsE("",e.configuration.devices.ThirdPartyRTU.length+e.configuration.devices.MeterWMbus.length+e.configuration.devices.ThirdPartyTCP.length+e.configuration.devices.IoModule.length+e.configuration.devices.AuxiliaryContact.length+e.configuration.devices.ModAriArh.length+e.configuration.devices.CurrentSensor.length," ",t.lcZ(17,25,"CONFIGURED_DEVICES"),"."),t.xp6(3),t.Q6J("nzLoading","return"===e.clickedButton)("disabled",e.saving),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(21,27,"RETURN_TO_SCAN_DEVICES")),t.xp6(2),t.Q6J("nzLoading","continue"===e.clickedButton)("disabled",e.saving),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(24,29,"CONTINUE"))}}function ei(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",56),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.connected_device_type=n})("callbackChange",function(){return t.CHM(e),t.oxw(2).portTypeChange()}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"SIGNAL_TYPE")),t.xp6(2),t.Q6J("model",e.editDevice.connected_device_type)("options",0===e.editDevice.type_id||2===e.editDevice.type_id&&(3===e.editDevice.port||4===e.editDevice.port)?e.deviceTypesInput:e.deviceTypesOutput)("clearable",!0)("clearable",!0)}}function ii(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",57),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.connected_accessory_type=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"DEVICE_TYPE")),t.xp6(2),t.Q6J("model",e.editDevice.connected_accessory_type)("options",e.getAccessoryTypes())("clearable",!0)("disabled",null===e.editDevice.connected_device_type)}}function ni(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",58),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.tag=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"TAG")),t.xp6(2),t.Q6J("model",e.editDevice.tag)("options",e.configuration.tags)("clearable",!0)("disabled",5!==e.editDevice.connected_device_type)}}function ai(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"nz-input-number",59),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.pulse_weight=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"IO_MODULES_PULSE_WEIGHT")),t.xp6(2),t.Q6J("ngModel",e.editDevice.pulse_weight)("nzMin",-9999)("nzMax",9999)("disabled",5!==e.editDevice.connected_device_type)}}function oi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",60),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.pulse_unit_id=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"PULSE_UNIT")),t.xp6(2),t.Q6J("model",e.editDevice.pulse_unit_id)("options",e.configuration.pulseUnits)("clearable",!0)("disabled",5!==e.editDevice.connected_device_type)}}const f=function(){return{required:!0}};function ri(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",46),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",61),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.module_id=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,4,"WIRELESS_MBUS_MODULE")),t.xp6(2),t.Q6J("model",e.editDevice.module_id)("options",e.editDevice.modules)("validators",t.DdM(6,f))}}function si(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"input",62),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.id=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"ID")),t.xp6(2),t.Q6J("ngModel",e.editDevice.id),t.uIk("readonly",!0)}}function di(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"input",63),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.manufacturer=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"MANUFACTURER")),t.xp6(2),t.Q6J("ngModel",e.editDevice.manufacturer),t.uIk("readonly",!0)}}function ci(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",46),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-validate",47),t.TgZ(5,"input",64,65),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.key=n}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(6),a=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,4,"KEY")),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",a.editDevice.key)("validLength",32)}}function pi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",66),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.antenna=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"ANTENNA")),t.xp6(2),t.Q6J("model",e.editDevice.antenna)("options",e.antennas)}}function li(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",46),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-validate",47),t.TgZ(5,"input",67,68),t.NdJ("change",function(){t.CHM(e),t.oxw();const n=t.MAs(7);return t.oxw().checkModbusId(n)})("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.ip_address=n}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(6),a=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,3,"IP_ADDRESS"),":"),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",a.editDevice.ip_address)}}function _i(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",46),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-validate",47),t.TgZ(5,"nz-input-number",69,70),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.modbus_id=n}),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(6),a=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,8,"MODBUS_ID"),":"),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",a.editDevice.modbus_id)("id","modbus_id_input_wrapper")("nzMin",0)("required",!0)("appInvalidValues",a.getTakenModbusIds())("appInvalidValuesMsg",t.lcZ(7,10,"MODBUS_TCP_DEVICES_UNIQUE_ERROR"))}}function ui(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",46),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-validate",47),t.TgZ(5,"nz-input-number",71,72),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.port=n}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(6),a=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,6,"PORT"),":"),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",a.editDevice.port)("nzMin",1)("nzMax",65535)("required",!0)}}function gi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",46),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",73),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.model=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,6,"DEVICE_MODEL"),":"),t.xp6(2),t.Q6J("model",e.editDevice.model)("options",e.deviceModels)("validators",t.DdM(8,f))("clearable",!0)("disabled",e.editDevice.model)}}function mi(i,o){1&i&&(t.TgZ(0,"a",74),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij("",t.lcZ(2,1,"CANT_FIND_DEVICE"),"."))}function fi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"nz-radio-group",75),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editDevice.predefined=n}),t.TgZ(5,"label",76),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"label",77),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,6,"UPLOAD_DESCRIPTOR")),t.xp6(2),t.Q6J("ngModel",e.editDevice.predefined),t.xp6(1),t.Q6J("nzValue",!0),t.xp6(1),t.Oqu(t.lcZ(7,8,"YES")),t.xp6(2),t.Q6J("nzValue",!1),t.xp6(1),t.Oqu(t.lcZ(10,10,"NO"))}}function Ti(i,o){if(1&i&&(t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"SELECTED_DESCRIPTOR_FILE")),t.xp6(2),t.hij(" ",e.editDevice.fileName," ")}}function Zi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-file-upload",78),t.NdJ("fileChange",function(n){return t.CHM(e),t.oxw(2).file=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"SELECT_DESCRIPTOR_FILE")),t.xp6(2),t.Q6J("smallUploader",!0)("file",e.file)}}function xi(i,o){1&i&&(t.TgZ(0,"span",79),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"REGISTERS")))}function vi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",80),t.TgZ(2,"span",81),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t._UZ(7,"i",82),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"span",83),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).addRegisterDrawer(r)}),t._UZ(12,"i",84),t.qZA(),t.TgZ(13,"span",83),t.NdJ("click",function(){const r=t.CHM(e).index;return t.oxw(2).removeRegister(r)}),t._UZ(14,"i",41),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,a=o.index;t.xp6(4),t.AsE("",t.lcZ(5,5,"ADDRESS"),": ",t.lcZ(6,7,e.address),""),t.xp6(5),t.Oqu(t.lcZ(10,9,e.variable)),t.xp6(2),t.MGl("id","edit_condition_button_",a,""),t.xp6(2),t.MGl("id","remove_condition_button_",a,"")}}function Ai(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addRegisterDrawer()}),t._UZ(1,"i",16),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.uIk("id","modal_ok_button"),t.xp6(2),t.Oqu(t.lcZ(3,2,"ADD_REGISTER")))}const b=function(){return["IoModulePort"]},U=function(){return["MeterWMbus"]},hi=function(){return["WMBusModule"]},R=function(){return["MeterABB","ThirdPartyRTU","ThirdPartyTCP"]};function Ci(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeDrawer()}),t._UZ(1,"i",41),t.qZA(),t.TgZ(2,"div",42),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",43),t.TgZ(6,"form",null,44),t.TgZ(8,"div",45),t.TgZ(9,"label",46),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"app-validate",47),t.TgZ(13,"input",48,49),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().editDevice.name=n}),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,ei,5,7,"div",50),t.YNc(16,ii,5,7,"div",50),t.YNc(17,ni,5,7,"div",50),t.YNc(18,ai,5,7,"div",50),t.YNc(19,oi,5,7,"div",50),t.YNc(20,ri,5,7,"div",50),t.YNc(21,si,5,5,"div",50),t.YNc(22,di,5,5,"div",50),t.YNc(23,ci,7,6,"div",50),t.YNc(24,pi,5,5,"div",50),t.YNc(25,li,7,5,"div",50),t.YNc(26,_i,8,12,"div",50),t.YNc(27,ui,7,8,"div",50),t.YNc(28,gi,5,9,"div",50),t.YNc(29,mi,3,3,"a",51),t.YNc(30,fi,11,12,"div",50),t.YNc(31,Ti,5,4,"div",50),t.YNc(32,Zi,5,5,"div",50),t.YNc(33,xi,3,3,"span",52),t.YNc(34,vi,15,11,"div",21),t.YNc(35,Ai,4,4,"button",53),t.TgZ(36,"div",45),t._UZ(37,"label"),t.TgZ(38,"button",54),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeDrawer()}),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"button",55),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().saveDevice()}),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(7),a=t.MAs(14),n=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,32,"SETUP")," "),t.xp6(7),t.Oqu(t.lcZ(11,34,"NAME")),t.xp6(2),t.Q6J("field",a),t.xp6(1),t.Q6J("ngModel",n.editDevice.name),t.xp6(2),t.Q6J("ngIf",t.DdM(40,b).includes(n.editDevice.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(41,b).includes(n.editDevice.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(42,b).includes(n.editDevice.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(43,b).includes(n.editDevice.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(44,b).includes(n.editDevice.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(45,U).includes(n.editDevice.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(46,U).includes(n.editDevice.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(47,U).includes(n.editDevice.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(48,U).includes(n.editDevice.type)),t.xp6(1),t.Q6J("ngIf",t.DdM(49,hi).includes(n.editDevice.type)),t.xp6(1),t.Q6J("ngIf","ThirdPartyTCP"===n.editDevice.type),t.xp6(1),t.Q6J("ngIf","ThirdPartyTCP"===n.editDevice.type),t.xp6(1),t.Q6J("ngIf","ThirdPartyTCP"===n.editDevice.type),t.xp6(1),t.Q6J("ngIf",t.DdM(50,R).includes(n.editDevice.type)&&!n.editDevice.predefined&&(n.editDevice.model||!n.editDevice.variables||!n.editDevice.variables.length)),t.xp6(1),t.Q6J("ngIf",t.DdM(51,R).includes(n.editDevice.type)&&!n.editDevice.predefined&&!n.editDevice.model&&(!n.editDevice.variables||!n.editDevice.variables.length)),t.xp6(1),t.Q6J("ngIf",t.DdM(52,R).includes(n.editDevice.type)&&!n.editDevice.model&&(!n.editDevice.variables||!n.editDevice.variables.length)),t.xp6(1),t.Q6J("ngIf",!n.editDevice.model&&n.editDevice.predefined&&n.editDevice.fileName),t.xp6(1),t.Q6J("ngIf",!n.editDevice.model&&n.editDevice.predefined),t.xp6(1),t.Q6J("ngIf",!n.editDevice.model&&n.editDevice.variables&&n.editDevice.variables.length),t.xp6(1),t.Q6J("ngForOf",n.editDevice.variables),t.xp6(1),t.Q6J("ngIf",!n.editDevice.model&&!n.editDevice.predefined),t.xp6(3),t.uIk("id","drawer_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(40,36,"CANCEL")),t.xp6(2),t.Q6J("nzLoading",n.saving)("disabled",n.saving)("form",e),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(43,38,n.editDevice.object_id||"MeterWMbus"===n.editDevice.type?"SAVE_DEVICE":"ADD_DEVICE"))}}function bi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",46),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",98),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editRegister.multiplier=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,4,"MULTIPLIER"),":"),t.xp6(2),t.Q6J("model",e.editRegister.multiplier)("options",e.multipliers)("validators",t.DdM(6,f))}}function zi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",46),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",99),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editRegister.precision=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,4,"PRECISION"),":"),t.xp6(2),t.Q6J("model",e.editRegister.precision)("options",e.multipliers)("validators",t.DdM(6,f))}}function Si(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",46),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",100),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editRegister.endianness=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,4,"WORD_BYTE_ORDER"),":"),t.xp6(2),t.Q6J("model",e.editRegister.endianness)("options",e.byteOrders)("validators",t.DdM(6,f))}}const L=function(i){return{"label-required":i}};function wi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",95),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",101),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editRegister.readable=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(8,L,!e.isPredefinedRegister)),t.xp6(1),t.hij("",t.lcZ(3,6,"READABLE"),":"),t.xp6(2),t.Q6J("model",e.editRegister.readable)("options",e.yesNoBoolean)("validators",t.DdM(10,f))("disabled",e.isPredefinedRegister)}}function qi(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",95),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",102),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editRegister.cumulative=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(8,L,!e.isPredefinedRegister)),t.xp6(1),t.hij("",t.lcZ(3,6,"CUMULATIVE"),":"),t.xp6(2),t.Q6J("model",e.editRegister.cumulative)("options",e.yesNo)("validators",t.DdM(10,f))("disabled",e.isPredefinedRegister)}}function Ii(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"label",46),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-select",103),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw(2).editRegister.dbWriteInterval=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,4,"STORAGE_INTERVAL"),":"),t.xp6(2),t.Q6J("model",e.editRegister.dbWriteInterval)("options",e.dbWriteIntervals)("validators",t.DdM(6,f))}}const Di=function(){return["Energy Values","Instantaneous Values","Power Quality Values","Harmonics","Maximum Values","Unbalances"]};function Ui(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeRegisterDrawer()}),t._UZ(1,"i",41),t.qZA(),t.TgZ(2,"div",42),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",43),t.TgZ(6,"form",null,44),t.TgZ(8,"div",45),t.TgZ(9,"label",46),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"app-validate",47),t.TgZ(13,"nz-input-number",86,87),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().editRegister.address=n}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",45),t.TgZ(16,"label",46),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"app-select",88),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().editRegister.category=n})("callbackChange",function(){return t.CHM(e),t.oxw().categoryChanged()}),t.qZA(),t.qZA(),t.TgZ(20,"div",45),t.TgZ(21,"label",46),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"app-select",89),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().editRegister.variable=n}),t.qZA(),t.qZA(),t.TgZ(25,"div",45),t.TgZ(26,"label",46),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"app-select",90),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().editRegister.function=n})("callbackChange",function(){t.CHM(e);const n=t.MAs(7);return t.oxw().functionChanged(n)}),t.qZA(),t.qZA(),t.TgZ(30,"div",45),t.TgZ(31,"label",46),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"app-select",91),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().editRegister.dataType=n})("callbackChange",function(){return t.CHM(e),t.oxw().dataTypeChanged()}),t.qZA(),t.qZA(),t.YNc(35,bi,5,7,"div",50),t.YNc(36,zi,5,7,"div",50),t.TgZ(37,"div",45),t.TgZ(38,"label",46),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"app-validate",47),t.TgZ(42,"nz-input-number",92,93),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().editRegister.size=n}),t.qZA(),t.qZA(),t.qZA(),t.YNc(44,Si,5,7,"div",50),t.TgZ(45,"div",45),t.TgZ(46,"label"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"app-select",94),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().editRegister.unit=n}),t.qZA(),t.qZA(),t.TgZ(50,"div",45),t.TgZ(51,"label",95),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"app-select",96),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().editRegister.writable=n})("callbackChange",function(){return t.CHM(e),t.oxw().writableChanged()}),t.qZA(),t.qZA(),t.YNc(55,wi,5,11,"div",50),t.YNc(56,qi,5,11,"div",50),t.TgZ(57,"div",45),t.TgZ(58,"label",46),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"app-select",97),t.NdJ("modelChange",function(n){return t.CHM(e),t.oxw().editRegister.readInterval=n}),t.qZA(),t.qZA(),t.YNc(62,Ii,5,7,"div",50),t.TgZ(63,"div",45),t._UZ(64,"label"),t.TgZ(65,"button",54),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeRegisterDrawer()}),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"button",55),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().saveRegister()}),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(7),a=t.MAs(14),n=t.MAs(43),r=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,61,r.editVariableName?"EDIT_REGISTER":"ADD_NEW_REGISTER")," "),t.xp6(7),t.hij("",t.lcZ(11,63,"ADDRESS"),":"),t.xp6(2),t.Q6J("field",a),t.xp6(1),t.Q6J("ngModel",r.editRegister.address)("nzMin",0)("nzMax",65535)("required",!0),t.xp6(4),t.hij("",t.lcZ(18,65,"CATEGORY"),":"),t.xp6(2),t.Q6J("model",r.editRegister.category)("options",r.categories)("validators",t.DdM(85,f))("add",!0),t.xp6(3),t.hij("",t.lcZ(23,67,"REGISTER"),":"),t.xp6(2),t.Q6J("model",r.editRegister.variable)("options",r.registers)("validators",t.DdM(86,f))("add",!t.DdM(87,Di).includes(r.editRegister.category||"")),t.xp6(3),t.hij("",t.lcZ(28,69,"FUNCTION"),":"),t.xp6(2),t.Q6J("model",r.editRegister.function)("options",r.functions)("validators",t.DdM(88,f)),t.xp6(3),t.hij("",t.lcZ(33,71,"DATA_TYPE"),":"),t.xp6(2),t.Q6J("model",r.editRegister.dataType)("options",r.dataTypes)("validators",t.DdM(89,f))("disabled",1===r.editRegister.function||2===r.editRegister.function),t.xp6(1),t.Q6J("ngIf","float"!==r.editRegister.dataType&&1!==r.editRegister.function&&2!==r.editRegister.function&&"string"!==r.editRegister.dataType&&"boolean"!==r.editRegister.dataType),t.xp6(1),t.Q6J("ngIf","float"===r.editRegister.dataType),t.xp6(3),t.hij("",t.lcZ(40,73,"NR_OF_REGISTERS"),":"),t.xp6(2),t.Q6J("field",n),t.xp6(1),t.Q6J("ngModel",r.editRegister.size)("required",!0)("nzMin",1)("nzMax",65535)("disabled",1===r.editRegister.function||2===r.editRegister.function||"boolean"===r.editRegister.dataType||"float"===r.editRegister.dataType),t.xp6(2),t.Q6J("ngIf",1!==r.editRegister.function&&2!==r.editRegister.function),t.xp6(3),t.hij("",t.lcZ(48,75,"UNIT"),":"),t.xp6(2),t.Q6J("model",r.editRegister.unit)("options",r.units)("add",!0)("clearable",!0),t.xp6(2),t.Q6J("ngClass",t.VKq(90,L,!r.isPredefinedRegister)),t.xp6(1),t.hij("",t.lcZ(53,77,"WRITABLE"),":"),t.xp6(2),t.Q6J("model",r.editRegister.writable)("options",r.yesNoBoolean)("validators",t.DdM(92,f))("disabled",r.isPredefinedRegister),t.xp6(1),t.Q6J("ngIf",r.editRegister.writable),t.xp6(1),t.Q6J("ngIf","string"!==r.editRegister.dataType&&"boolean"!==r.editRegister.dataType),t.xp6(3),t.hij("",t.lcZ(60,79,"READ_INTERVAL"),":"),t.xp6(2),t.Q6J("model",r.editRegister.readInterval)("options",r.readIntervals)("validators",t.DdM(93,f)),t.xp6(1),t.Q6J("ngIf","string"!==r.editRegister.dataType),t.xp6(3),t.uIk("id","drawer_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(67,81,"CANCEL")),t.xp6(2),t.Q6J("nzLoading",r.saving)("disabled",r.saving)("form",e),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(70,83,r.editVariableName?"SAVE_REGISTER":"ADD_REGISTER"))}}function yi(i,o){1&i&&(t._UZ(0,"app-loader",104),t.TgZ(1,"div",105),t.TgZ(2,"p"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.TgZ(5,"div",106),t.TgZ(6,"button",107),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"CURRENT_SENSORS_ADD")),t.xp6(3),t.uIk("id","modal_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(8,5,"DONE")))}let Mi=(()=>{class i{constructor(e,a,n,r,d){this.translate=e,this.toastr=a,this.modalService=n,this.drawerService=r,this.wizardService=d,this.saving=!1,this.clickedButton="",this.isPredefinedRegister=!1,this.editMode=!1,this.deviceCategoriesSensors=[{id:1,name:"sub-meter"},{id:2,name:"inverter"},{id:4,name:"heatpump"},{id:5,name:"evcharger"}],this.deviceCategoriesIo=[{id:1,name:"sub-meter"},{id:6,name:"water-meter"},{id:7,name:"gas-meter"}],this.deviceCategories=[{id:0,name:"main-meter"},{id:1,name:"sub-meter"},{id:2,name:"inverter"},{id:3,name:"battery"},{id:4,name:"heatpump"},{id:5,name:"evcharger"},{id:6,name:"water-meter"},{id:7,name:"gas-meter"}],this.deviceModels=[{id:1,name:"M2M"},{id:2,name:"EQ meter"},{id:3,name:"M4M/M1M"},{id:4,name:"DMTME"},{id:5,name:"IM300"},{id:6,name:"EV meter"}],this.multipliers=[{id:1,text:"1"},{id:.1,text:"0.1"},{id:.01,text:"0.01"},{id:.001,text:"0.001"}],this.stopbits=[{id:1,text:"1"},{id:2,text:"2"}],this.readIntervals=[{id:10,name:"10"},{id:30,name:"30"},{id:900,name:"900"}],this.dbWriteIntervals=[{id:30,name:"30"},{id:900,name:"900"}],this.yesNo=Z.ij,this.yesNoBoolean=Z.Vs,this.dataTypes=Z.DJ,this.byteOrders=Z.tc,this.functions=Z.wk,this.units=Z.Dl,this.modes=Z.Sw,this.antennas=Z.KS}ngOnInit(){this.updateExistingDevices(),this.deviceTypesInput=this.configuration.deviceTypes.filter(e=>2!==e.id&&3!==e.id&&4!==e.id),this.deviceTypesOutput=this.configuration.deviceTypes.filter(e=>0!==e.id&&1!==e.id&&5!==e.id)}closeDrawer(){this.drawerService.hide()}addDeviceDrawer(e,a){this.toastr.clear(),e?(this.editDevice=Object.assign({},e),["MeterABB","ThirdPartyRTU","ThirdPartyTCP"].includes(a||"")&&(!this.editDevice.variables||!this.editDevice.variables.length)&&(this.editDevice.predefined=!1),this.editDevice.fileName&&(this.editDevice.predefined=!0)):(this.editDevice={},"ThirdPartyTCP"===a&&(this.editDevice.predefined=!1)),this.editDevice.type=a,this.drawerService.showDrawer(this.addDeviceTemplate).subscribe()}saveDevice(){if(this.editDevice.predefined){if(!this.file)return void this.toastr.warning(this.translate.instant("WIRELESS_MBUS_UPDATE_SELECT_FILE"));const e=new FileReader;e.onload=()=>{this.editDevice.descriptor=e.result,this.editDevice.fileName=this.file.name;try{this.editDevice.descriptor=JSON.parse(this.editDevice.descriptor)}catch(a){return this.toastr.warning(this.translate.instant("NOT_VALID_JSON")),void(this.saving=!1)}this.saveDeviceCollection()},e.onerror=()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR"))},e.readAsText(this.file)}else this.saveDeviceCollection()}saveDeviceCollection(){if(this.editDevice.object_id||"MeterWMbus"===this.editDevice.type)if("MeterWMbus"===this.editDevice.type)this.configuration.devices[this.editDevice.type]=this.configuration.devices[this.editDevice.type].map(e=>e.id===this.editDevice.id?this.editDevice:e);else if("IoModulePort"===this.editDevice.type){const e=this.configuration.devices.IoModule.find(a=>a.object_id===this.editDevice.object_id);e&&(e.ports=e.ports.map(a=>a.port===this.editDevice.port?this.editDevice:a))}else this.configuration.devices[this.editDevice.type]=this.configuration.devices[this.editDevice.type].map(e=>e.object_id===this.editDevice.object_id?this.editDevice:e);else this.editDevice.tmp_object_id=this.configuration.devices[this.editDevice.type].length+1,this.configuration.devices[this.editDevice.type].push(this.editDevice);this.closeDrawer()}checkModbusId(e){e.controls.modbusIdInput.markAsTouched(),e.controls.modbusIdInput.updateValueAndValidity()}getTakenModbusIds(){return this.configuration.devices[this.editDevice.type].filter(e=>{var a,n;return e.ip_address===this.editDevice.ip_address&&(e.object_id&&e.object_id!==(null===(a=this.editDevice)||void 0===a?void 0:a.object_id)||e.tmp_object_id&&e.tmp_object_id!==(null===(n=this.editDevice)||void 0===n?void 0:n.tmp_object_id))}).map(e=>e.modbus_id)}addRegisterDrawer(e){if(this.toastr.clear(),e)this.editRegister=Object.assign(Object.assign({},e),{isEdit:!0}),this.editVariableName=e.variable,this.editDevice.variables||(this.editDevice.variables=[]);else if(this.editRegister={function:3,dataType:"integer",multiplier:1,size:2,readInterval:30,dbWriteInterval:900,cumulative:0,writable:!1,readable:!0,endianness:"ABCD"},this.editVariableName="",this.editDevice.variables||(this.editDevice.variables=[]),this.editDevice.variables.length){const a=this.editDevice.variables[this.editDevice.variables.length-1];a&&(this.editRegister=Object.assign(Object.assign({},a),{address:a.address+a.size}))}this.checkCategories(),this.checkRegisters(),this.drawerService.showSecondDrawer(this.addRegisterTemplate)}saveDevices(e,a){this.saving=!0,this.clickedButton=a,this.wizardService.saveConfiguration({devices:this.configuration.devices}).subscribe(()=>{this.saving=!1,this.clickedButton="",this.configuration.setupComplete=!1,this.goToStep(e)},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.clickedButton="",this.saving=!1})}saveRegister(){this.editVariableName?this.editDevice.variables=this.editDevice.variables.map(e=>e.variable===this.editVariableName?this.editRegister:e):this.editDevice.variables.push(this.editRegister),this.drawerService.hideSecond()}getCurrentSensors(){this.wizardService.getSensorsConfiguration().subscribe(e=>{const a=[];e.forEach(n=>{const r=this.configuration.devices.CurrentSensor.find(d=>d.object_id===n.object_id);a.push(r||n)}),this.configuration.devices.CurrentSensor=a,this.updateExistingDevices()})}updateExistingDevices(){this.existingDevices=[],Object.keys(this.configuration.devices).forEach(e=>{["AuxiliaryContact","CurrentSensor","IoModule","ModAriArh"].includes(e)&&(this.existingDevices=[...this.existingDevices,...this.configuration.devices[e].map(a=>({device_type:a.device_type,modbus_id:a.modbus_id,name:a.name,object_id:a.object_id}))])})}checkCategories(){this.categories=[],Object.keys(Z.dQ).forEach(e=>{this.categories.push({id:e,text:e})}),this.editDevice.variables.forEach(e=>{!this.categories.some(n=>n.id===e.category)&&e.category&&this.categories.unshift({id:e.category,text:e.category})}),this.editMode&&this.tempRegister.category&&this.categories.unshift({id:this.tempRegister.category,text:this.tempRegister.category}),this.checkPredefined(),this.isPredefinedRegister&&(this.dataTypes=[...this.dataTypes.filter(e=>"string"!==e.id)],this.editRegister.dataType="integer")}checkRegisters(){if(this.registers=[],!this.editRegister.category)return;let e="";if(Z.dQ.hasOwnProperty(this.editRegister.category)){let a=!1;Z.dQ[this.editRegister.category].forEach(n=>{Object.keys(n).forEach(r=>{["l1","l2","l3","n","total"].includes(r)&&(a&&(a=!1,e=n[r]),this.editDevice.variables.some(g=>g.variable===n[r]&&g.variable!==this.editVariableName)?a=!0:this.registers.push({id:n[r],text:n[r]}))})})}["Energy Values","Instantaneous Values","Power Quality Values","Harmonics","Maximum Values","Unbalances"].includes(this.editRegister.category||"")&&(this.registers.find(n=>n.id===this.editRegister.variable)||(this.editRegister.variable=this.registers?this.registers[0].id:void 0)),this.editVariableName?this.registers.some(n=>n.id===this.editVariableName)||this.registers.unshift({id:this.editVariableName,text:this.editVariableName}):(this.editMode&&this.tempRegister.variable&&this.registers.push({id:this.tempRegister.variable,text:this.tempRegister.variable}),e&&(this.editRegister.variable=e))}categoryChanged(){this.dataTypes=Z.DJ,this.checkRegisters(),this.checkPredefined(),this.isPredefinedRegister&&(this.editRegister.cumulative=Number("Energy Values"===this.editRegister.category),this.editRegister.writable=!1,this.editRegister.readable=!0,this.dataTypes=[...this.dataTypes.filter(e=>"string"!==e.id)],this.editRegister.dataType="integer")}checkPredefined(){var e;this.isPredefinedRegister=["Energy Values","Instantaneous Values","Power Quality Values","Harmonics","Maximum Values","Unbalances"].includes((null===(e=this.editRegister)||void 0===e?void 0:e.category)||"")}functionChanged(e){(1===this.editRegister.function||2===this.editRegister.function)&&(this.editRegister.size=1,this.editRegister.multiplier=void 0,this.editRegister.precision=void 0,this.editRegister.endianness="ABCD",this.editRegister.dataType="boolean"),e.controls.addressInput.markAsTouched(),e.controls.addressInput.updateValueAndValidity()}dataTypeChanged(){"boolean"===this.editRegister.dataType?(this.editRegister.size=1,this.editRegister.multiplier=void 0,this.editRegister.precision=void 0):"string"===this.editRegister.dataType&&(this.editRegister.dbWriteInterval=void 0,this.editRegister.cumulative=void 0,this.editRegister.multiplier=void 0,this.editRegister.precision=void 0),"float"===this.editRegister.dataType?(this.editRegister.size=2,this.editRegister.multiplier=void 0,this.editRegister.precision=1):(this.editRegister.precision=void 0,this.editRegister.multiplier=1)}removeRegister(e){this.editDevice.variables.splice(e,1)}writableChanged(){this.editRegister.writable||(this.editRegister.readable=!0)}closeRegisterDrawer(){this.drawerService.hideSecond()}getAccessoryTypes(){return this.configuration.accessoryTypes.filter(e=>e.device_type===this.editDevice.connected_device_type)}portTypeChange(){null!==this.editDevice.connected_accessory_type&&(this.editDevice.connected_accessory_type=null),5!==this.editDevice.connected_device_type?(null!==this.editDevice.pulse_weight&&(this.editDevice.pulse_weight=null),null!==this.editDevice.pulse_unit_id&&(this.editDevice.pulse_unit_id=null),null!==this.editDevice.tag&&(this.editDevice.tag=null),null!==this.editDevice.device_category&&(this.editDevice.device_category=null)):null===this.editDevice.pulse_weight&&(this.editDevice.pulse_weight=1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.sK),t.Y36(w._),t.Y36(I.Z),t.Y36(O.z),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-setup"]],viewQuery:function(e,a){if(1&e&&(t.Gf(Oe,5),t.Gf(Je,5),t.Gf(Re,5)),2&e){let n;t.iGM(n=t.CRH())&&(a.addDeviceTemplate=n.first),t.iGM(n=t.CRH())&&(a.addDeviceAssignTemplate=n.first),t.iGM(n=t.CRH())&&(a.addRegisterTemplate=n.first)}},inputs:{goToStep:"goToStep",configuration:"configuration"},decls:12,vars:6,consts:[[1,"wizard-header","text-line"],[1,"icon_abb_32","icon-abb_wrench_32"],["nzType","card",3,"nzAnimated",4,"ngIf"],["class","wizard-card",4,"ngIf"],["addDeviceTemplate",""],["addRegisterTemplate",""],["addDeviceAssignTemplate",""],["nzType","card",3,"nzAnimated"],[3,"nzTitle"],["titleRs485",""],[1,"wizard-card","tab"],[1,"wizard-card-body"],[1,"title"],[1,"item-list"],["class","item",4,"ngFor","ngForOf"],["nz-button","","type","button",1,"red",3,"click"],[1,"icon_abb_16","icon-abb_plus_16"],[1,"wizard-card-footer","multiple-buttons"],["nz-button","","type","button","nzType","default",3,"nzLoading","disabled","click"],["nz-button","","type","submit","nzType","primary",3,"click"],["titleMbus",""],[4,"ngFor","ngForOf"],["addType","wizard","type","CurrentSensor",3,"existingDevices","callbackChange"],["nzStandalone","",3,"nzCount"],[1,"item"],[1,"text"],["class","icon_abb_16 icon-abb_warning-circle-2_16 red","nzTooltipPlacement","top","nz-tooltip","",3,"nzTooltipTitle",4,"ngIf"],[1,"icons"],["inputClass","no-validate",3,"small","showSearch","model","placeholder","clearable","options","modelChange"],["nz-button","","nzTooltipPlacement","left","nz-tooltip","",3,"nzTooltipTitle","click"],[1,"icon_abb_16","icon-abb_wrench_16"],["nzTooltipPlacement","top","nz-tooltip","",1,"icon_abb_16","icon-abb_warning-circle-2_16","red",3,"nzTooltipTitle"],["class","item subitem",4,"ngFor","ngForOf"],[1,"item","subitem"],["inputClass","no-validate",3,"small","showSearch","model","placeholder","clearable","disabled","options","modelChange"],[1,"wizard-card"],[1,"wizard-card-title"],[1,"red"],["nz-button","","type","button","nzType","primary",1,"black",3,"nzLoading","disabled","click"],["nz-button","","type","submit","nzType","primary",3,"nzLoading","disabled","click"],["tabIndex","-1","nz-button","","id","close_contract_button",1,"drawer-button-close",3,"click"],[1,"icon_abb_16","icon-abb_close_16"],[1,"drawer-title","text-line"],[1,"drawer-body"],["formAdd","ngForm"],[1,"form-group"],[1,"label-required"],[3,"field"],["type","text","maxlength","255","id","name_input","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["class","form-group",4,"ngIf"],["class","create-device red",4,"ngIf"],["style","font-size: 16px;margin-top: 10px;display: inline-block;font-weight: 500;",4,"ngIf"],["nz-button","","type","button","class","red",3,"click",4,"ngIf"],["type","button","nz-button","",3,"click"],["type","submit","nz-button","","nzType","primary",3,"nzLoading","disabled","form","appFormButtonClick"],["inputId","io_module_device_type_select",3,"model","options","clearable","modelChange","callbackChange"],["inputId","io_module_accessory_type_select",3,"model","options","clearable","disabled","modelChange"],["inputId","io_module_tag_select",3,"model","options","clearable","disabled","modelChange"],["id","port_pulse_weight_input_wrapper","nzId","port_pulse_weight_input","name","portPulseWeight",1,"no-success",3,"ngModel","nzMin","nzMax","disabled","ngModelChange"],["inputId","port_pulse_unit",3,"model","options","clearable","disabled","modelChange"],["inputId","module_select",3,"model","options","validators","modelChange"],["type","text","id","id_input","name","idInput",1,"form-control",2,"width","100%",3,"ngModel","ngModelChange"],["type","text","id","manufacturer_input","name","manufacturerInput",1,"form-control",2,"width","100%",3,"ngModel","ngModelChange"],["type","text","maxlength","32","id","key_input","name","key","appValidateHex","","appValidateEqualLength","","required","",1,"form-control",3,"ngModel","validLength","ngModelChange"],["key","ngModel"],["inputId","antenna_select",3,"model","options","modelChange"],["type","text","maxlength","255","id","ip_address_input","name","ipAddress","required","","appValidateIp","",1,"form-control",3,"ngModel","change","ngModelChange"],["ipAddress","ngModel"],["nzId","modbus_id_input","name","modbusIdInput",3,"ngModel","id","nzMin","required","appInvalidValues","appInvalidValuesMsg","ngModelChange"],["modbusIdInput","ngModel"],["id","port_input_wrapper","nzId","port_input","name","port",3,"ngModel","nzMin","nzMax","required","ngModelChange"],["port","ngModel"],["inputId","model_select",3,"model","options","validators","clearable","disabled","modelChange"],[1,"create-device","red"],["name","predefinedSelect",3,"ngModel","ngModelChange"],["nz-radio","","id","predefined_radio_no",3,"nzValue"],["nz-radio","","id","predefined_radio_yes",3,"nzValue"],["inputId","selected_file","accept",".json",3,"smallUploader","file","fileChange"],[2,"font-size","16px","margin-top","10px","display","inline-block","font-weight","500"],[1,"tag-row"],[1,"tag"],[1,"icon_abb_16","icon-abb_right-arrow_16"],[1,"tag-icon",3,"id","click"],[1,"icon_abb_16","icon-abb_edit_16"],["tabIndex","-1","nz-button","",1,"drawer-button-close",3,"click"],["id","address_input_wrapper","nzId","address_input","name","addressInput",3,"ngModel","nzMin","nzMax","required","ngModelChange"],["addressInput","ngModel"],["inputId","category_select",3,"model","options","validators","add","modelChange","callbackChange"],["inputId","register_select",3,"model","options","validators","add","modelChange"],["inputId","function_select",3,"model","options","validators","modelChange","callbackChange"],["inputId","data_type_select",3,"model","options","validators","disabled","modelChange","callbackChange"],["id","size_input_wrapper","nzId","size_input","name","sizeInput",3,"ngModel","required","nzMin","nzMax","disabled","ngModelChange"],["sizeInput","ngModel"],["inputId","unit_select",3,"model","options","add","clearable","modelChange"],[3,"ngClass"],["inputId","writable_select",3,"model","options","validators","disabled","modelChange","callbackChange"],["inputId","read_interval_select",3,"model","options","validators","modelChange"],["inputId","multiplier_select",3,"model","options","validators","modelChange"],["inputId","precision_select",3,"model","options","validators","modelChange"],["inputId","byte_order_select",3,"model","options","validators","modelChange"],["inputId","readable_select",3,"model","options","validators","disabled","modelChange"],["inputId","cumulative_select",3,"model","options","validators","disabled","modelChange"],["inputId","db_write_interval_select",3,"model","options","validators","modelChange"],["type","modal"],[1,"p-dialog-body"],[1,"p-dialog-footer"],["nz-button","","appHideModal",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ke,67,60,"nz-tabset",2),t.YNc(5,ti,25,31,"div",3),t.YNc(6,Ci,44,53,"ng-template",null,4,t.W1O),t.YNc(8,Ui,71,94,"ng-template",null,5,t.W1O),t.YNc(10,yi,9,7,"ng-template",null,6,t.W1O)),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(2),t.hij(" ",t.lcZ(3,4,"SETUP"),"\n"),t.xp6(2),t.Q6J("ngIf",!a.configuration.setupComplete),t.xp6(1),t.Q6J("ngIf",a.configuration.setupComplete))},directives:[T.O5,V.xH,V.xw,F.x7,T.sg,J.SY,j.H,l.ix,_.dQ,u.w,Ie.Y,c._Y,c.JL,c.F,Y.P,c.Fj,c.nD,c.Q7,c.JJ,c.On,De._,Ue.v,ye.a,Me.M,We.u,B.Dg,B.Of,Ne.Y,D.b,T.mk,E.R,N.u],pipes:[p.X$,Ee.h],styles:[""],data:{animation:[m]}}),i})(),Wi=(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard-end"]],inputs:{goToStep:"goToStep"},decls:18,vars:20,consts:[[1,"wizard-header","text-line"],[1,"wizard-card"],[1,"wizard-card-title"],[1,"wizard-card-body"],[1,"wizard-card-footer","multiple-buttons"],["nz-button","","type","button","nzType","primary",1,"black",3,"click"],["nz-button","","type","submit","nzType","primary","routerLink","/"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",3),t.TgZ(8,"p"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.TgZ(11,"div",4),t.TgZ(12,"button",5),t.NdJ("click",function(){return a.goToStep("scanning")}),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"button",6),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(2,10,"END_CONFIGURATION"),"\n"),t.xp6(3),t.Q6J("@enterAnimation",void 0),t.xp6(1),t.hij(" ",t.lcZ(6,12,"SAVING_DEFINITIONS")," "),t.xp6(2),t.Q6J("@enterAnimation",void 0),t.xp6(2),t.Oqu(t.lcZ(10,14,"SAVE_DATABASE_CONFIG")),t.xp6(3),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(14,16,"SCAN_AGAIN")),t.xp6(2),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(17,18,"GO_TO_DASHBOARD")))},directives:[l.ix,_.dQ,u.w,h.rH],pipes:[p.X$],styles:[""],data:{animation:[m]}}),i})();var Ni=s(385),Ei=s(2874);function Oi(i,o){if(1&i&&t._UZ(0,"app-wizard-topbar",6),2&i){const e=t.oxw();t.Q6J("goToStep",e.goToStep)("currentStep",e.currentStep)("configuration",e.configuration)}}function Ji(i,o){if(1&i&&t._UZ(0,"app-wizard-sidebar",7),2&i){const e=t.oxw();t.Q6J("currentStep",e.currentStep)}}function Ri(i,o){1&i&&t._UZ(0,"app-loader")}function Li(i,o){if(1&i&&(t.TgZ(0,"div",8),t._UZ(1,"img",9),t.YNc(2,Ri,1,0,"app-loader",10),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.currentStep)}}function Qi(i,o){if(1&i&&t._UZ(0,"app-wizard-password",18),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)}}function ki(i,o){if(1&i&&t._UZ(0,"app-wizard-update",19),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("data",e.softwareData)("urlId",e.urlId)}}function Fi(i,o){if(1&i&&t._UZ(0,"app-wizard-time",20),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("data",e.timeData)}}function Pi(i,o){if(1&i&&t._UZ(0,"app-wizard-region",21),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("languages",e.configuration.languages)("currencies",e.configuration.currencies)}}function Yi(i,o){if(1&i&&t._UZ(0,"app-wizard-connection",18),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)}}function Hi(i,o){if(1&i&&t._UZ(0,"app-wizard-wifi-network",20),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("data",e.wifiData)}}function ji(i,o){if(1&i&&t._UZ(0,"app-wizard-wifi-ip",20),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("data",e.wifiData)}}function Vi(i,o){if(1&i&&t._UZ(0,"app-wizard-ethernet",20),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("data",e.ipData)}}function Bi(i,o){if(1&i&&t._UZ(0,"app-wizard-connection-info",22),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("prevStep",e.prevStep)("wifiData",e.wifiData)("ipData",e.ipData)}}function Gi(i,o){if(1&i&&t._UZ(0,"app-wizard-start-wizard",18),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)}}function $i(i,o){if(1&i&&t._UZ(0,"app-wizard-upload-configuration",18),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)}}function Xi(i,o){if(1&i&&t._UZ(0,"app-wizard-tariffs",18),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("goToStep",e.goToStep)}}function Ki(i,o){if(1&i&&t._UZ(0,"app-wizard-tariffs-configuration",23),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("configuration",e.configuration)}}function tn(i,o){if(1&i&&t._UZ(0,"app-wizard-scanning",23),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("configuration",e.configuration)}}function en(i,o){if(1&i&&t._UZ(0,"app-wizard-setup",23),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)("configuration",e.configuration)}}function nn(i,o){if(1&i&&t._UZ(0,"app-wizard-end",18),2&i){const e=t.oxw(2);t.Q6J("goToStep",e.goToStep)}}function an(i,o){if(1&i&&(t.TgZ(0,"div",11),t.YNc(1,Qi,1,1,"app-wizard-password",12),t.YNc(2,ki,1,3,"app-wizard-update",13),t.YNc(3,Fi,1,2,"app-wizard-time",14),t.YNc(4,Pi,1,3,"app-wizard-region",15),t.YNc(5,Yi,1,1,"app-wizard-connection",12),t.YNc(6,Hi,1,2,"app-wizard-wifi-network",14),t.YNc(7,ji,1,2,"app-wizard-wifi-ip",14),t.YNc(8,Vi,1,2,"app-wizard-ethernet",14),t.YNc(9,Bi,1,4,"app-wizard-connection-info",16),t.YNc(10,Gi,1,1,"app-wizard-start-wizard",12),t.YNc(11,$i,1,1,"app-wizard-upload-configuration",12),t.YNc(12,Xi,1,2,"app-wizard-tariffs",12),t.YNc(13,Ki,1,2,"app-wizard-tariffs-configuration",17),t.YNc(14,tn,1,2,"app-wizard-scanning",17),t.YNc(15,en,1,2,"app-wizard-setup",17),t.YNc(16,nn,1,1,"app-wizard-end",12),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf","password"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","update"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","time"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","region"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","connection"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","wifi-network"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","wifi-ip"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","ethernet"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","connection-info"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","start-wizard"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","upload-configuration"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","tariffs"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","tariffs-configuration"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","scanning"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","setup"===e.currentStep.id),t.xp6(1),t.Q6J("ngIf","end"===e.currentStep.id)}}const G=function(i){return{loading:i}};let $=(()=>{class i{constructor(e,a,n,r,d,g,x,v,Q,dn,cn){this.settingsCommunicationIpService=e,this.settingsCommunicationWifiService=a,this.settingsService=n,this.settingsTimeService=r,this.wizardService=d,this.translate=g,this.toastr=x,this.route=v,this.location=Q,this.appLoadService=dn,this.titleService=cn,this.steps=[{id:"password",sidebar:!1},{id:"time",sidebar:!1},{id:"update",sidebar:!1},{id:"region",sidebar:!1},{id:"connection",sidebar:!1},{id:"ethernet",sidebar:!1},{id:"wifi-network",sidebar:!1},{id:"wifi-ip",sidebar:!1},{id:"connection-info",sidebar:!1},{id:"start-wizard",sidebar:!0,step:"start"},{id:"upload-configuration",sidebar:!0,step:"start"},{id:"tariffs",sidebar:!0,step:"tariffs"},{id:"tariffs-configuration",sidebar:!0,step:"tariffs"},{id:"scanning",sidebar:!0,step:"scanning"},{id:"setup",sidebar:!0,step:"setup"},{id:"end",sidebar:!0,step:"end"}],this.sidebar=!1,this.goToStep=(pn,X)=>{this.toastr.clear(),this.steps.forEach(K=>{K.id===pn&&(this.currentStep=K)}),this.prevStep=X||null}}ngOnInit(){this.titleService.setTitle(`SCU200${this.appLoadService.user.isWifi?"-W":""} - ${this.translate.instant("WIZARD")}`);let e=this.route.snapshot.paramMap.get("id");("wifi-network"===e||"wifi-ip"===e)&&!this.appLoadService.user.isWifi&&(e=null),e&&(this.urlId=e),(0,y.D)([this.wizardService.getConfiguration(),this.settingsCommunicationIpService.getData(),this.settingsCommunicationWifiService.getData(),this.settingsService.softwareVersion(),this.settingsTimeService.getData()]).subscribe(([a,n,r,d,g])=>{if(this.configuration=a,this.ipData=n,this.wifiData=r,this.softwareData=d,this.timeData={deviceTime:g.time,browserTime:Math.floor((new Date).getTime()/1e3),setTime:new Date,ntpEnable:g.ntpEnabled},g.ntpServers&&(this.timeData.ntpTimeServer=g.ntpServers[0],this.timeData.ntpTimeServer2=g.ntpServers[1]),this.updateDeviceTime(),this.configuration.contracts=[],e){const x=this.steps.findIndex(v=>v.id===e);this.currentStep=x>-1?this.steps[x]:this.steps[0]}else this.currentStep=this.steps[0]})}updateDeviceTime(){this.subscription=(0,A.H)(1e3,1e3).pipe((0,M.b)(()=>{this.timeData.browserTime++,this.timeData.deviceTime++})).subscribe()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(k.g),t.Y36(et.w),t.Y36(it.g),t.Y36(nt.F),t.Y36(W),t.Y36(p.sK),t.Y36(w._),t.Y36(h.gz),t.Y36(T.Ye),t.Y36(q.V),t.Y36(ot.Dx))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-wizard"]],decls:8,vars:10,consts:[[3,"goToStep","currentStep","configuration",4,"ngIf"],[1,"wizard-container",3,"ngClass"],[3,"currentStep",4,"ngIf"],[1,"wizard-content",3,"ngClass"],["class","wizard-loading",4,"ngIf"],["class","wizard-box",4,"ngIf"],[3,"goToStep","currentStep","configuration"],[3,"currentStep"],[1,"wizard-loading"],["alt","logo","src","/assets/logo_abb_big.png",1,"logo"],[4,"ngIf"],[1,"wizard-box"],[3,"goToStep",4,"ngIf"],[3,"goToStep","data","urlId",4,"ngIf"],[3,"goToStep","data",4,"ngIf"],[3,"goToStep","languages","currencies",4,"ngIf"],[3,"goToStep","prevStep","wifiData","ipData",4,"ngIf"],[3,"goToStep","configuration",4,"ngIf"],[3,"goToStep"],[3,"goToStep","data","urlId"],[3,"goToStep","data"],[3,"goToStep","languages","currencies"],[3,"goToStep","prevStep","wifiData","ipData"],[3,"goToStep","configuration"]],template:function(e,a){1&e&&(t.YNc(0,Oi,1,3,"app-wizard-topbar",0),t.TgZ(1,"div",1),t.YNc(2,Ji,1,1,"app-wizard-sidebar",2),t.TgZ(3,"div",3),t.YNc(4,Li,3,1,"div",4),t.YNc(5,an,17,16,"div",5),t.qZA(),t.qZA(),t._UZ(6,"app-modal"),t._UZ(7,"app-toastr")),2&e&&(t.Q6J("ngIf",a.currentStep),t.xp6(1),t.Q6J("ngClass",t.VKq(6,G,!a.currentStep)),t.xp6(1),t.Q6J("ngIf",a.currentStep&&a.currentStep.sidebar),t.xp6(1),t.Q6J("ngClass",t.VKq(8,G,!a.currentStep)),t.xp6(1),t.Q6J("ngIf",!a.currentStep),t.xp6(1),t.Q6J("ngIf",a.currentStep))},directives:[T.O5,Zt,T.mk,bt,E.R,wt,It,Ut,Wt,Jt,Qt,Pt,jt,re,se,pe,le,fe,qe,Mi,Wi,Ni.z,Ei.l],styles:[":host{display:flex;flex-direction:column;width:100vw;height:100vh;overflow:hidden}.wizard-container{display:flex;flex-direction:row;height:calc(100% - 61px)}.wizard-container.loading{height:100%}.wizard-container .logo{max-width:70%}.wizard-content{display:flex;flex-direction:column;flex:1 1 auto;width:100%;height:100%;background:url(/assets/wizard_background.jpg) no-repeat top;background-size:cover;align-items:center}.wizard-content.loading{background:url(/assets/wizard_background_loading.jpg) no-repeat top;background-size:cover}.wizard-box{padding:40px 0;width:55%;height:100%}.wizard-box>*{display:flex;flex-direction:column;height:100%}.wizard-box .wizard-header{font-size:30px;font-weight:500;display:flex;align-items:center}.wizard-box .wizard-header i{margin-right:10px}.wizard-box .wizard-card{margin-top:20px;background:#fff;box-shadow:0 0 12px #0f0f0f26;padding:30px;flex:1 1 auto;display:flex;flex-direction:column;overflow:hidden;border-radius:10px}.wizard-box .wizard-card .wizard-card-title{font-size:24px;font-weight:500}.wizard-box .wizard-card .wizard-card-body{flex:1 1 auto;margin:20px 0;overflow:auto}.wizard-box .wizard-card .wizard-card-footer{display:flex;justify-content:flex-end}.wizard-box .wizard-card .wizard-card-footer.multiple-buttons{justify-content:space-between}.wizard-box .wizard-card.tab{margin-top:0;border-radius:0}.wizard-box .ant-tabs{margin-top:20px}.wizard-box .ant-tabs .wizard-card .wizard-card-body{margin:0 0 20px}.wizard-box .ant-tabs .wizard-card .wizard-card-body .item-list{margin:0}.wizard-box .ant-tabs .wizard-card .wizard-card-body .title{font-size:16px;font-weight:500;margin-bottom:5px;margin-top:20px}.wizard-box .ant-tabs .wizard-card .wizard-card-body .title:first-of-type{margin-top:0}.wizard-box .ant-tabs .ant-tabs-tab-btn{display:flex;align-items:center}.ant-badge-count{box-shadow:none;background:#ff000f;margin-left:10px;color:#fff;font-size:10px;height:16px;line-height:16px}.ant-badge-count .ant-scroll-number-only>p.ant-scroll-number-only-unit{color:#fff}.title .ant-badge-count{margin-left:0;margin-top:-3px}.wizard-loading{padding:40px 0;width:55%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.wizard-loading .app-loader{margin-top:50px;height:100px}.wizard-loading .app-loader .loading{background:transparent}.item-list{margin-top:20px;padding:0 3px}.item-list .item{box-shadow:0 0 5px #0f0f0f26;padding:2px 10px;display:flex;flex-direction:row;border-radius:10px;align-items:center;margin-bottom:5px}.item-list .item.subitem{margin-left:20px}.item-list .item .text{display:flex;flex:1 1 auto;align-items:center}.item-list .item .text b,.item-list .item .text i{margin-left:5px}.item-list .item .text i{margin-top:-1px}.item-list .item .icons{display:flex;align-items:center}.item-list .item .icons .ant-btn+.ant-btn{margin-left:0}.item-list+button{margin-top:20px;float:right}.item-list .ant-select{font-size:12px;width:120px;margin-right:5px}.item-list .ant-select.ant-select-single:not(.ant-select-customize-input) .ant-select-selector{width:100%;height:24px;padding:0 0 0 6px}.item-list .ant-select.ant-select-single .ant-select-selector .ant-select-selection-item{line-height:22px}.item-list .ant-select .ant-select-arrow{right:3px}.item-list .ant-select .ant-select-selection-placeholder{line-height:22px;color:#8e8e8e}.item-list .ant-select .ant-select-clear{right:5px}.ports-list{margin-top:20px;padding:0 5px}.ports-list .item{padding:7px 5px;display:flex;align-items:center;border-bottom:1px solid #bababa}.ports-list .item .text{display:flex;flex:1 1 auto;align-items:center}.ports-list .item .text b{font-size:18px;margin-right:8px}.ports-list .item .text i{margin-left:-5px;margin-right:8px}.ports-list .item .text .red{color:#ff000f;margin-left:5px;cursor:pointer}.ports-list .item .icons{display:flex;width:60px}.ports-list .item .icons .ant-btn+.ant-btn{margin-left:0}.ports-list .item nz-switch{margin-right:5px}.ports-list .item.header{margin-top:10px;border-bottom:0;align-items:flex-start}.ports-list+button{margin-top:20px;float:right}p.red,p.red b,i.red{color:#ff000f}a.create-device{color:#ff000f;font-size:12px;font-weight:500}.scheduler-container{margin-left:5px}@media (max-width: 640px){.wizard-container{flex-direction:column}.wizard-content{height:calc(100% - 82px)}.wizard-box{width:90%}.wizard-box .wizard-header{font-size:26px}.wizard-box .wizard-card .wizard-card-title{font-size:18px}.wizard-box .wizard-card{padding:15px}.item-list .item{align-items:start;flex-direction:column}.item-list .item .text{display:inline-block}.item-list .item.subitem{margin-left:10px}.ports-list .item{align-items:start;flex-direction:column}.wizard-box .wizard-card .wizard-card-footer.multiple-buttons{display:block}.wizard-box .wizard-card .wizard-card-footer.multiple-buttons .ant-btn{margin-right:10px}.wizard-box .wizard-card .wizard-card-footer.multiple-buttons .ant-btn+.ant-btn{margin-left:0;margin-top:10px}}\n"],encapsulation:2}),i})();const on=[{path:"",component:$},{path:":id",component:$}];let rn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.Bz.forChild(on)],h.Bz]}),i})(),sn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[S.m,rn]]}),i})()},8520:(tt,z,s)=>{s.d(z,{M:()=>y});var S=s(5e3),h=s(520);let y=(()=>{class A{constructor(t){this.http=t}getTariff(t){return this.http.get("api/contracts/tariff",{params:{id:t}})}getContracts(){return this.http.get("api/contracts")}getContract(t){return this.http.get("api/contract",{params:{id:t}})}addContract(t){return this.http.post("api/contracts",{contract:t},{responseType:"text"})}saveContract(t){return this.http.put("api/contracts",{contract:t},{responseType:"text"})}removeContract(t){return this.http.post("api/contracts/remove",{contract:t},{responseType:"text"})}}return A.\u0275fac=function(t){return new(t||A)(S.LFG(h.eN))},A.\u0275prov=S.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()}}]);