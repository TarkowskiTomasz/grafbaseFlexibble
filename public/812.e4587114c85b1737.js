"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[812],{2334:(X,y,l)=>{l.d(y,{Y:()=>U});var r=l(5e3),Z=l(5052),t=l(9808),m=l(1062);function _(T,w){1&T&&(r.TgZ(0,"div"),r._UZ(1,"i",2),r.TgZ(2,"p"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&T&&(r.xp6(3),r.Oqu(r.lcZ(4,1,"DRAG_DROP")))}function P(T,w){if(1&T&&(r.TgZ(0,"div"),r._UZ(1,"i",3),r.TgZ(2,"p",4),r._uU(3),r.qZA(),r.qZA()),2&T){const S=r.oxw();r.xp6(3),r.Oqu(S.file.name)}}function E(T,w){if(1&T&&(r.TgZ(0,"div"),r._UZ(1,"input",5),r.ALo(2,"translate"),r.qZA()),2&T){const S=r.oxw();r.xp6(1),r.s9C("placeholder",r.lcZ(2,2,"SELECT_FILE_TO_ADD")),r.s9C("value",null==S.file?null:S.file.name)}}let U=(()=>{class T{constructor(){this.accept="",this.smallUploader=!1,this.fileChange=new r.vpe,this.callbackChange=new r.vpe,this.onFileChange=S=>(this.file=S,this.fileChange.emit(this.file),this.callbackChange&&this.callbackChange.next(""),!1)}}return T.\u0275fac=function(S){return new(S||T)},T.\u0275cmp=r.Xpm({type:T,selectors:[["app-file-upload"]],inputs:{accept:"accept",inputId:"inputId",smallUploader:"smallUploader",file:"file"},outputs:{fileChange:"fileChange",callbackChange:"callbackChange"},decls:4,vars:8,consts:[[3,"nzType","nzAccept","nzBeforeUpload","nzShowUploadList","id"],[4,"ngIf"],[1,"icon_abb_32","icon-abb_upload_32"],[1,"icon_abb_32","icon-abb_document_32"],["id","name_of_selected_file"],["readonly","","nz-input","",3,"placeholder","value"]],template:function(S,f){1&S&&(r.TgZ(0,"nz-upload",0),r.YNc(1,_,5,3,"div",1),r.YNc(2,P,4,1,"div",1),r.YNc(3,E,3,4,"div",1),r.qZA()),2&S&&(r.Q6J("nzType",f.smallUploader?"select":"drag")("nzAccept",f.accept)("nzBeforeUpload",f.onFileChange)("nzShowUploadList",!1)("id",f.inputId),r.xp6(1),r.Q6J("ngIf",!f.smallUploader&&!f.file),r.xp6(1),r.Q6J("ngIf",!f.smallUploader&&f.file),r.xp6(1),r.Q6J("ngIf",f.smallUploader))},directives:[Z.FY,t.O5],pipes:[m.X$],styles:[""]}),T})()},3812:(X,y,l)=>{l.r(y),l.d(y,{SystemSetupModule:()=>Ii});var r=l(9808),Z=l(4521),t=l(5e3),m=l(868),_=l(1062);function P(n,s){1&n&&(t.TgZ(0,"a",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TIME")," "))}function E(n,s){1&n&&(t.TgZ(0,"a",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SESSION")," "))}function U(n,s){1&n&&(t.TgZ(0,"a",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SYSTEM")," "))}function T(n,s){1&n&&(t.TgZ(0,"a",10),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"REGION")," "))}function w(n,s){1&n&&(t.TgZ(0,"a",11),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"UI_ASPECT_THEMES")," "))}let S=(()=>{class n{constructor(){this.id="general"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-general"]],hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:12,vars:1,consts:[["nzType","card","nzLinkRouter","",3,"nzAnimated"],["id","menu_system_setup_general_time","nz-tab-link","","routerLink","/system-setup/general/time",4,"nzTabLink"],["id","menu_system_setup_general_session","nz-tab-link","","routerLink","/system-setup/general/session",4,"nzTabLink"],["id","menu_system_setup_general_system","nz-tab-link","","routerLink","/system-setup/general/system",4,"nzTabLink"],["id","menu_system_setup_general_region","nz-tab-link","","routerLink","/system-setup/general/region",4,"nzTabLink"],["id","menu_system_setup_general_ui_aspect_themes","nz-tab-link","","routerLink","/system-setup/general/ui-aspect-themes",4,"nzTabLink"],[1,"router-outlet"],["id","menu_system_setup_general_time","nz-tab-link","","routerLink","/system-setup/general/time"],["id","menu_system_setup_general_session","nz-tab-link","","routerLink","/system-setup/general/session"],["id","menu_system_setup_general_system","nz-tab-link","","routerLink","/system-setup/general/system"],["id","menu_system_setup_general_region","nz-tab-link","","routerLink","/system-setup/general/region"],["id","menu_system_setup_general_ui_aspect_themes","nz-tab-link","","routerLink","/system-setup/general/ui-aspect-themes"]],template:function(e,i){1&e&&(t.TgZ(0,"nz-tabset",0),t.TgZ(1,"nz-tab"),t.YNc(2,P,3,3,"a",1),t.qZA(),t.TgZ(3,"nz-tab"),t.YNc(4,E,3,3,"a",2),t.qZA(),t.TgZ(5,"nz-tab"),t.YNc(6,U,3,3,"a",3),t.qZA(),t.TgZ(7,"nz-tab"),t.YNc(8,T,3,3,"a",4),t.qZA(),t.TgZ(9,"nz-tab"),t.YNc(10,w,3,3,"a",5),t.qZA(),t.qZA(),t._UZ(11,"router-outlet",6)),2&e&&t.Q6J("nzAnimated",!1)},directives:[m.xH,m.xw,m.Fx,m.Ao,Z.yS,Z.lC],pipes:[_.X$],styles:["[_nghost-%COMP%]{overflow:auto}"]}),n})();var f=l(5963),et=l(8505),nt=l(3906),h=l(8868),b=l(8397),it=l(6782),D=l(9228);const at=["form"];function st(n,s){1&n&&t._UZ(0,"app-loader")}function ot(n,s){if(1&n&&(t.TgZ(0,"div",2),t._UZ(1,"app-general-time-configuration",3),t._UZ(2,"app-description-box",4),t.qZA()),2&n){const e=t.oxw();t.Q6J("appCanDeactivate",e.canDeactivate.bind(e)),t.xp6(1),t.Q6J("data",e.data)}}let rt=(()=>{class n{constructor(e){this.settingsTimeService=e,this.id="general_time",this.loadingData=!0,this.synchronizing=!1,this.applyingNtp=!1,this.ntpServers=[]}ngOnInit(){this.settingsTimeService.getData().subscribe(e=>{this.data={deviceTime:e.time,browserTime:Math.floor((new Date).getTime()/1e3),setTime:new Date,ntpEnable:e.ntpEnabled},e.ntpServers&&(this.data.ntpTimeServer=e.ntpServers[0],this.data.ntpTimeServer2=e.ntpServers[1]),this.updateDeviceTime(),this.loadingData=!1})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateDeviceTime(){this.subscription=(0,f.H)(1e3,1e3).pipe((0,et.b)(()=>{this.data.browserTime++,this.data.deviceTime++})).subscribe()}canDeactivate(){return!this.form||!this.form.dirty}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(nt.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-general-time"]],viewQuery:function(e,i){if(1&e&&t.Gf(at,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content",3,"appCanDeactivate",4,"ngIf"],[1,"section-content",3,"appCanDeactivate"],[3,"data"],["header","TIME_TITLE","text","TIME_TEXT"]],template:function(e,i){1&e&&(t.YNc(0,st,1,0,"app-loader",0),t.YNc(1,ot,3,2,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,b.z,it.B,D.i],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.section-content[_ngcontent-%COMP%]{display:flex}"]}),n})();var C=l(2966),g=l(520);let ct=(()=>{class n{constructor(e){this.http=e}getData(){return this.http.get("api/settings/session")}setData(e){return this.http.post("api/settings/session",e,{responseType:"text"})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var z=l(5115),c=l(3075),$=l(7003),v=l(6042),A=l(2643),x=l(2683),I=l(7815);const lt=["form"];function pt(n,s){1&n&&t._UZ(0,"app-loader")}function _t(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"form",3,4),t.TgZ(3,"div",5),t.TgZ(4,"label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"app-select",6),t.NdJ("modelChange",function(a){return t.CHM(e),t.oxw().sessionExpiration=a}),t.qZA(),t.qZA(),t.TgZ(8,"button",7),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().submit()}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t._UZ(11,"app-description-box",8),t.qZA()}if(2&n){const e=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("appCanDeactivate",i.canDeactivate.bind(i)),t.xp6(4),t.hij("",t.lcZ(6,8,"SESSION_TIMEOUT"),":"),t.xp6(2),t.Q6J("model",i.sessionExpiration)("options",i.sessions),t.xp6(1),t.Q6J("nzLoading",i.saving)("disabled",i.saving)("form",e),t.xp6(1),t.Oqu(t.lcZ(10,10,"APPLY"))}}let dt=(()=>{class n{constructor(e,i,a,o){this.translate=e,this.toastr=i,this.settingsSessionService=a,this.sessionService=o,this.id="general_session",this.loadingData=!0,this.saving=!1}ngOnInit(){this.sessions=[{id:5,text:"5",additional_text:"RESOLUTION_MIN"},{id:10,text:"10",additional_text:"RESOLUTION_MIN"},{id:15,text:"15",additional_text:"RESOLUTION_MIN"},{id:30,text:"30",additional_text:"RESOLUTION_MIN"},{id:60,text:"60",additional_text:"RESOLUTION_MIN"},{id:0,text:"SESSION_NO_INTERRUPTION"}],this.getData()}getData(){this.settingsSessionService.getData().subscribe(e=>{this.sessionExpiration=e.session_expiration,this.loadingData=!1})}submit(){this.toastr.clear(),this.saving=!0,this.settingsSessionService.setData({sessionExpiration:this.sessionExpiration}).subscribe(()=>{this.toastr.success(this.translate.instant("SAVE_SESSION_SUCCESS")),this.saving=!1,this.form.form.markAsPristine(),this.sessionService.restartSession()},e=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),console.log(e),this.saving=!1})}canDeactivate(){return!this.form||!this.form.dirty}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.sK),t.Y36(C._),t.Y36(ct),t.Y36(z.m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-general-session"]],viewQuery:function(e,i){if(1&e&&t.Gf(lt,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"appCanDeactivate"],["form","ngForm"],[1,"form-group-item"],["inputId","session_select",3,"model","options","modelChange"],["nz-button","","nzType","primary","id","apply_button",3,"nzLoading","disabled","form","appFormButtonClick"],["header","SESSION_TEXT","text","SESSION_DESCRIPTION"]],template:function(e,i){1&e&&(t.YNc(0,pt,1,0,"app-loader",0),t.YNc(1,_t,12,12,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,c._Y,c.JL,c.F,b.z,$.H,v.ix,A.dQ,x.w,I.b,D.i],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.section-content[_ngcontent-%COMP%]{display:flex}"]}),n})();var ut=l(452),mt=l(619);function gt(n,s){1&n&&(t.TgZ(0,"div",1),t._UZ(1,"app-loader"),t.qZA())}function ft(n,s){if(1&n&&(t.TgZ(0,"div",1),t._UZ(1,"app-general-firmware-update-update",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("data",e.data)}}let ht=(()=>{class n{constructor(e){this.settingsService=e,this.id="system_setup_firmware_update_control_unit",this.loadingData=!0}ngOnInit(){this.settingsService.softwareVersion().subscribe(e=>{this.data=e,this.loadingData=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ut.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-general-firmware-update"]],hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[["class","section-content",4,"ngIf"],[1,"section-content"],[3,"data"]],template:function(e,i){1&e&&(t.YNc(0,gt,2,0,"div",0),t.YNc(1,ft,2,1,"div",0)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,mt.s],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.section-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})();var u=l(7618),F=l(2529),J=l(6129),N=l(262),R=l(515),Tt=l(4327),O=l(4063),Zt=l(97),G=l(4342),Y=l(493);const Ct=["restoreFailTemplate"];function vt(n,s){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"p"),t.TgZ(5,"div",10),t._UZ(6,"nz-progress",11),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,2,"CARD_CAPACITY"),":"),t.xp6(4),t.Q6J("nzPercent",e.cardPercent)}}function At(n,s){1&n&&(t.TgZ(0,"div"),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"NO_CARD_DETECTED")))}function xt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",13),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().downloadLog()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.TgZ(10,"div",15),t.TgZ(11,"button",16),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,5,"SYSTEM_RESTORE_FAIL_TITLE")," "),t.xp6(4),t.Oqu(t.lcZ(6,7,"SYSTEM_RESTORE_FAIL")),t.xp6(3),t.Oqu(t.lcZ(9,9,"DOWNLOAD_LOG")),t.xp6(3),t.uIk("id","modal_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(13,11,"CLOSE")))}let St=(()=>{class n{constructor(e,i,a,o,p){this.toastr=e,this.modalService=i,this.translate=a,this.sessionService=o,this.settingsGeneralSystemService=p,this.id="general_system",this.cardDetected=!1,this.aliveRestart=!0,this.aliveStatus=!0}ngOnInit(){this.getCardCapacity()}restartConfirm(){this.modalService.showConfirm(this.translate.instant("SYSTEM_RESET_WARNING"),()=>{this.sessionService.removeSessionExpiration(),this.modalService.showLoader(this.translate.instant("SYSTEM_RESET_PREP")),this.restart()})}getCardCapacity(){this.settingsGeneralSystemService.getCardCapacity().subscribe(e=>{const{cardDetected:i,cardPercent:a}=e;this.cardDetected=i,this.cardPercent=a})}unmountCard(){this.modalService.showConfirm(this.translate.instant("CARD_UNMOUNT_CONFIRMATION"),()=>{this.modalService.setLoading(!0),this.settingsGeneralSystemService.unmountCard().subscribe(()=>{this.modalService.hide(),this.toastr.success(this.translate.instant("CARD_UNMOUNT_SUCCESS")),this.cardDetected=!1},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.modalService.hide()})})}shutdownConfirm(){this.modalService.showConfirm(this.translate.instant("SYSTEM_SHUTDOWN_WARNING"),()=>{this.modalService.setLoading(!0),this.settingsGeneralSystemService.shutdown().subscribe(()=>{this.modalService.showInfo(this.translate.instant("SYSTEM_SHUT_OK"),()=>{this.modalService.hide()})})})}restoreConfirm(){this.toastr.clear(),this.modalService.showConfirm(this.translate.instant("SYSTEM_RESTORE_WARNING"),()=>{this.sessionService.removeSessionExpiration(),this.modalService.showLoader(this.translate.instant("SYSTEM_RESTORE_PREP")),this.settingsGeneralSystemService.restore().subscribe(()=>{this.restoreStatus()})})}restoreStatus(){this.aliveStatus=!0,(0,f.H)(5e3,5e3).pipe((0,F.o)(()=>this.aliveStatus),(0,J.z)(()=>this.settingsGeneralSystemService.restoreStatus().pipe((0,N.K)(()=>R.E)))).subscribe(e=>{"pending"!==e.status&&"finished"===e.status&&(this.aliveStatus=!1,e.error?(this.errorStdout=e.stdout,this.modalService.showModal(this.restoreFailTemplate)):this.modalService.showInfo(this.translate.instant("FIRMWARE_UPDATE_OK"),()=>{localStorage.clear(),window.location.href=document.location.origin}))})}restart(){this.settingsGeneralSystemService.restart().subscribe(()=>{(0,f.H)(25e3,5e3).pipe((0,F.o)(()=>this.aliveRestart),(0,J.z)(()=>this.settingsGeneralSystemService.serverStatus().pipe((0,N.K)(()=>R.E)))).subscribe(()=>{this.aliveRestart=!1,this.modalService.showInfo(this.translate.instant("FIRMWARE_UPDATE_OK"),()=>{this.modalService.hide(),window.location.reload()})})})}downloadLog(){const e=new Blob([this.errorStdout]);(0,Tt.saveAs)(e,"restorefactorysw.log")}ngOnDestroy(){this.aliveStatus=!1,this.aliveRestart=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C._),t.Y36(O.Z),t.Y36(_.sK),t.Y36(z.m),t.Y36(Zt.p))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-general-system"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ct,5),2&e){let a;t.iGM(a=t.CRH())&&(i.restoreFailTemplate=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:46,vars:36,consts:[[1,"section-content"],["id","pageTitle"],[1,"multi-section-content"],["nz-button","","nzType","primary","id","restart_button",3,"click"],[1,"multi-section-header"],["nz-button","","nzType","primary","id","restore_button",3,"click"],["nz-button","","nzType","primary","id","shutdown_button",3,"click"],[4,"ngIf"],["nz-button","","nzType","primary","id","unmount_card_button",3,"disabled","click"],["restoreFailTemplate",""],[1,"progressbar"],["nzStatus","normal",3,"nzPercent"],[1,"p-dialog-header"],[1,"p-dialog-body"],["nz-button","","nzType","primary","id","download_log_button",3,"click"],[1,"p-dialog-footer"],["nz-button","","appHideModal",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div"),t.TgZ(9,"button",3),t.NdJ("click",function(){return i.restartConfirm()}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"h3",4),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",2),t.TgZ(16,"p"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div"),t.TgZ(20,"button",5),t.NdJ("click",function(){return i.restoreConfirm()}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"h3",4),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"div",2),t.TgZ(27,"p"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div"),t.TgZ(31,"button",6),t.NdJ("click",function(){return i.shutdownConfirm()}),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"h3",4),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"div",2),t.YNc(38,vt,7,4,"div",7),t.YNc(39,At,4,3,"div",7),t.TgZ(40,"div"),t.TgZ(41,"button",8),t.NdJ("click",function(){return i.unmountCard()}),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(44,xt,14,13,"ng-template",null,9,t.W1O)),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,14,"SYSTEM_RESET_TITLE")," "),t.xp6(4),t.Oqu(t.lcZ(7,16,"SYSTEM_RESET_TEXT")),t.xp6(4),t.Oqu(t.lcZ(11,18,"RESTART")),t.xp6(3),t.hij(" ",t.lcZ(14,20,"SYSTEM_RESTORE_TITLE")," "),t.xp6(4),t.Oqu(t.lcZ(18,22,"SYSTEM_RESTORE_TEXT")),t.xp6(4),t.Oqu(t.lcZ(22,24,"RESTORE")),t.xp6(3),t.hij(" ",t.lcZ(25,26,"SYSTEM_SHUT_TITLE")," "),t.xp6(4),t.Oqu(t.lcZ(29,28,"SYSTEM_SHUT_TEXT")),t.xp6(4),t.Oqu(t.lcZ(33,30,"SHUTDOWN")),t.xp6(3),t.hij(" ",t.lcZ(36,32,"CARD_UNMOUNT_TITLE")," "),t.xp6(3),t.Q6J("ngIf",i.cardDetected),t.xp6(1),t.Q6J("ngIf",!i.cardDetected),t.xp6(2),t.Q6J("disabled",!i.cardDetected),t.xp6(1),t.Oqu(t.lcZ(43,34,"UNMOUNT")))},directives:[v.ix,A.dQ,x.w,r.O5,G.M,Y.u],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.section-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.multi-section-content[_ngcontent-%COMP%]{margin-bottom:30px}.multi-section-content[_ngcontent-%COMP%]   .progressbar[_ngcontent-%COMP%]{width:500px}"]}),n})();var W=l(6912),bt=l(4085);const Et=["form"];function Mt(n,s){1&n&&t._UZ(0,"app-loader")}function Ut(n,s){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"form",3,4),t._UZ(3,"app-system-setup-communication-ip-configuration",5),t.qZA(),t._UZ(4,"app-description-box",6),t.qZA()),2&n){const e=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("appCanDeactivate",i.canDeactivate.bind(i)),t.xp6(2),t.Q6J("form",e)("data",i.data)}}let wt=(()=>{class n{constructor(e){this.settingsCommunicationIpService=e,this.id="system_setup_communication_ip",this.loadingData=!0}ngOnInit(){this.getData()}getData(){this.settingsCommunicationIpService.getData().subscribe(e=>{this.data=Object.assign({},e),this.loadingData=!1})}canDeactivate(){return!this.form||!this.form.dirty}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(W.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-system-setup-communication-ip"]],viewQuery:function(e,i){if(1&e&&t.Gf(Et,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"appCanDeactivate"],["form","ngForm"],[3,"form","data"],["header","IP_TEXT","text","IP_DESCRIPTION"]],template:function(e,i){1&e&&(t.YNc(0,Mt,1,0,"app-loader",0),t.YNc(1,Ut,5,3,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,c._Y,c.JL,c.F,b.z,bt.k,D.i],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}[_nghost-%COMP%]   .section-content[_ngcontent-%COMP%]{display:flex}"]}),n})(),It=(()=>{class n{constructor(e){this.http=e}getData(){return this.http.get("/api/settings/modbus")}setTcp(e){return this.http.post("/api/settings/modbus",e,{responseType:"text"})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Q=l(6462),q=l(2374),H=l(656),Ot=l(2456);const qt=["form"];function yt(n,s){1&n&&t._UZ(0,"app-loader")}function Dt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-validate",10),t.TgZ(5,"nz-input-number",11,12),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).data.port=a}),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(6),i=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,9,"TCP_PORT"),":"),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("required",!0)("ngModel",i.data.port)("appInvalidValues",i.isPortInvalid)("appInvalidCheckFun",!0)("nzMin",502)("nzMax",65535)("appInvalidValuesMsg",t.lcZ(7,11,"MODBUS_WRONG_PORT"))}}function Ft(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"form",3,4),t.TgZ(3,"div",5),t.TgZ(4,"nz-switch",6),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.tcp_enable=a}),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.YNc(9,Dt,8,13,"div",7),t.TgZ(10,"button",8),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().applyTcp()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t._UZ(13,"app-description-box",9),t.qZA()}if(2&n){const e=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("appCanDeactivate",i.canDeactivate.bind(i)),t.xp6(3),t.Q6J("ngModel",i.data.tcp_enable),t.xp6(2),t.AsE("",t.lcZ(7,9,"MODBUS_TCP")," ",t.lcZ(8,11,i.data.tcp_enable?"ENABLED":"DISABLED"),""),t.xp6(3),t.Q6J("ngIf",i.data.tcp_enable),t.xp6(1),t.Q6J("nzLoading",i.saving)("disabled",i.saving)("form",e),t.xp6(1),t.Oqu(t.lcZ(12,13,"APPLY"))}}let Nt=(()=>{class n{constructor(e,i,a){this.translate=e,this.toastr=i,this.settingsCommunicationModbusService=a,this.id="system_setup_communication_modbus",this.loadingData=!0,this.saving=!1}ngOnInit(){this.getData()}getData(){this.settingsCommunicationModbusService.getData().subscribe(e=>{this.data=e,this.loadingData=!1})}isPortInvalid(e){return!(502===e||e>1023&&e<65536&&8e3!==e)}applyTcp(){this.saving=!0,this.toastr.clear();const e=(({tcp_enable:i,port:a})=>({tcp_enable:i,port:a}))(this.data);this.settingsCommunicationModbusService.setTcp(e).subscribe(()=>{this.toastr.success(this.translate.instant("TCP_SET_SUCCESS")),this.form.form.markAsPristine(),this.saving=!1},i=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),console.log(i),this.saving=!1})}canDeactivate(){return!this.form||!this.form.dirty}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.sK),t.Y36(C._),t.Y36(It))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-system-setup-communication-modbus"]],viewQuery:function(e,i){if(1&e&&t.Gf(qt,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"appCanDeactivate"],["form","ngForm"],[1,"form-group-item"],["id","tcp_switch","name","tcp_enable",3,"ngModel","ngModelChange"],["class","form-group-item",4,"ngIf"],["nz-button","","nzType","primary","id","apply_button",3,"nzLoading","disabled","form","appFormButtonClick"],["header","TCP_TEXT","text","TCP_DESCRIPTION"],[3,"field"],["nzId","port_input","name","portInput",3,"required","ngModel","appInvalidValues","appInvalidCheckFun","nzMin","nzMax","appInvalidValuesMsg","ngModelChange"],["port","ngModel"]],template:function(e,i){1&e&&(t.YNc(0,yt,1,0,"app-loader",0),t.YNc(1,Ft,14,15,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,c._Y,c.JL,c.F,b.z,Q.i,c.JJ,c.On,q.P,H._,c.Q7,Ot.u,v.ix,A.dQ,x.w,I.b,D.i],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}[_nghost-%COMP%]   .section-content[_ngcontent-%COMP%]{display:flex}"]}),n})();var B=l(9777);function Rt(n,s){1&n&&(t.TgZ(0,"a",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"IP")," "))}function Lt(n,s){1&n&&(t.TgZ(0,"a",10),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"EMAIL")," "))}function Pt(n,s){1&n&&(t.TgZ(0,"a",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WIFI")," "))}function zt(n,s){1&n&&(t.TgZ(0,"nz-tab"),t.YNc(1,Pt,3,3,"a",11),t.qZA())}function Jt(n,s){1&n&&(t.TgZ(0,"a",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DNS")," "))}function Qt(n,s){1&n&&(t.TgZ(0,"a",14),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"REST_API")," "))}function Yt(n,s){1&n&&(t.TgZ(0,"a",15),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FTP")," "))}function kt(n,s){1&n&&(t.TgZ(0,"a",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MODBUS")," "))}let Gt=(()=>{class n{constructor(e){this.appLoadService=e,this.id="communication"}ngOnInit(){this.isWifi=this.appLoadService.user.isWifi}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(B.V))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-communication"]],hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:15,vars:2,consts:[["nzType","card","nzLinkRouter","",3,"nzAnimated"],["id","menu_system_setup_communication_ip","nz-tab-link","","routerLink","/system-setup/communication/ip",4,"nzTabLink"],["id","menu_system_setup_communication_wifi","nz-tab-link","","routerLink","/system-setup/communication/email",4,"nzTabLink"],[4,"ngIf"],["id","menu_system_setup_communication_dns","nz-tab-link","","routerLink","/system-setup/communication/dns",4,"nzTabLink"],["id","menu_system_setup_communication_rest_api","nz-tab-link","","routerLink","/system-setup/communication/rest-api",4,"nzTabLink"],["id","menu_system_setup_communication_ftp","nz-tab-link","","routerLink","/system-setup/communication/ftp",4,"nzTabLink"],["id","menu_system_setup_communication_modbus","nz-tab-link","","routerLink","/system-setup/communication/modbus",4,"nzTabLink"],[1,"router-outlet"],["id","menu_system_setup_communication_ip","nz-tab-link","","routerLink","/system-setup/communication/ip"],["id","menu_system_setup_communication_wifi","nz-tab-link","","routerLink","/system-setup/communication/email"],["id","menu_system_setup_communication_wifi","nz-tab-link","","routerLink","/system-setup/communication/wifi",4,"nzTabLink"],["id","menu_system_setup_communication_wifi","nz-tab-link","","routerLink","/system-setup/communication/wifi"],["id","menu_system_setup_communication_dns","nz-tab-link","","routerLink","/system-setup/communication/dns"],["id","menu_system_setup_communication_rest_api","nz-tab-link","","routerLink","/system-setup/communication/rest-api"],["id","menu_system_setup_communication_ftp","nz-tab-link","","routerLink","/system-setup/communication/ftp"],["id","menu_system_setup_communication_modbus","nz-tab-link","","routerLink","/system-setup/communication/modbus"]],template:function(e,i){1&e&&(t.TgZ(0,"nz-tabset",0),t.TgZ(1,"nz-tab"),t.YNc(2,Rt,3,3,"a",1),t.qZA(),t.TgZ(3,"nz-tab"),t.YNc(4,Lt,3,3,"a",2),t.qZA(),t.YNc(5,zt,2,0,"nz-tab",3),t.TgZ(6,"nz-tab"),t.YNc(7,Jt,3,3,"a",4),t.qZA(),t.TgZ(8,"nz-tab"),t.YNc(9,Qt,3,3,"a",5),t.qZA(),t.TgZ(10,"nz-tab"),t.YNc(11,Yt,3,3,"a",6),t.qZA(),t.TgZ(12,"nz-tab"),t.YNc(13,kt,3,3,"a",7),t.qZA(),t.qZA(),t._UZ(14,"router-outlet",8)),2&e&&(t.Q6J("nzAnimated",!1),t.xp6(5),t.Q6J("ngIf",i.isWifi))},directives:[m.xH,m.xw,m.Fx,m.Ao,Z.yS,r.O5,Z.lC],pipes:[_.X$],styles:["[_nghost-%COMP%]{overflow:auto}"]}),n})(),Wt=(()=>{class n{constructor(e){this.http=e}getData(){return this.http.get("/api/settings/rest-api")}setRestApi(e){return this.http.post("/api/settings/rest-api",e,{responseType:"text"})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ht=["form"];function Bt(n,s){1&n&&t._UZ(0,"app-loader")}function Vt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"input",10),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).data.rest_api_token=a}),t.qZA(),t.TgZ(5,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).generateToken()}),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"AUTH_REST_API_TOKEN")),t.xp6(2),t.Q6J("ngModel",e.data.rest_api_token),t.xp6(2),t.Oqu(t.lcZ(7,5,"BUTTON_GENERATE_TOKEN"))}}function jt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"form",3,4),t.TgZ(3,"div",5),t.TgZ(4,"nz-switch",6),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.rest_api_enable=a})("click",function(){return t.CHM(e),t.oxw().enableChanged()}),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.YNc(9,Vt,8,7,"div",7),t.TgZ(10,"button",8),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().submit()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t._UZ(13,"app-description-box",9),t.qZA()}if(2&n){const e=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("appCanDeactivate",i.canDeactivate.bind(i)),t.xp6(3),t.Q6J("ngModel",i.data.rest_api_enable),t.xp6(2),t.AsE("",t.lcZ(7,9,"REST_API")," ",t.lcZ(8,11,i.data.rest_api_enable?"ENABLED":"DISABLED"),""),t.xp6(3),t.Q6J("ngIf",i.data.rest_api_enable),t.xp6(1),t.Q6J("nzLoading",i.saving)("disabled",i.saving)("form",e),t.xp6(1),t.Oqu(t.lcZ(12,13,"APPLY"))}}let Xt=(()=>{class n{constructor(e,i,a){this.translate=e,this.toastr=i,this.settingsCommunicationRestApiService=a,this.id="system_setup_communication_rest_api",this.loadingData=!0,this.saving=!1}ngOnInit(){this.getData()}getData(){this.settingsCommunicationRestApiService.getData().subscribe(e=>{this.data=e,this.loadingData=!1})}generateToken(){let e="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var a=0;a<30;a++)e+=i.charAt(Math.floor(Math.random()*i.length));this.data.rest_api_token=e,this.form.form.markAsDirty()}submit(){this.data.enable||this.setRestApi()}setRestApi(){this.toastr.clear(),this.saving=!0,this.settingsCommunicationRestApiService.setRestApi({rest_api_enable:Boolean(this.data.rest_api_enable),rest_api_token:this.data.rest_api_token}).subscribe(()=>{this.toastr.success(this.translate.instant("REST_API_SET_SUCCESS")),this.saving=!1,this.form.form.markAsPristine()},e=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),console.log(e),this.saving=!1})}enableChanged(){this.data.rest_api_token||this.generateToken()}canDeactivate(){return!this.form||!this.form.dirty}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.sK),t.Y36(C._),t.Y36(Wt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-system-setup-communication-rest-api"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ht,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"appCanDeactivate"],["form","ngForm"],[1,"form-group-item"],["id","rest_api_switch","name","rest_api_enable",3,"ngModel","ngModelChange","click"],["class","form-group-item",4,"ngIf"],["nz-button","","nzType","primary","type","submit","id","apply_button",1,"btn","btn-primary",3,"nzLoading","disabled","form","appFormButtonClick"],["header","REST_API_TEXT","text","REST_API_DESCRIPTION"],["id","rest_api_token_Input","name","rest_api_token","readonly","",3,"ngModel","ngModelChange"],["nz-button","","nzType","default","id","generate_token_button",3,"click"]],template:function(e,i){1&e&&(t.YNc(0,Bt,1,0,"app-loader",0),t.YNc(1,jt,14,15,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,c._Y,c.JL,c.F,b.z,Q.i,c.JJ,c.On,c.Fj,v.ix,A.dQ,x.w,I.b,D.i],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .section-content[_ngcontent-%COMP%]{display:flex}"]}),n})();var $t=l(4961),Kt=l(408),te=l(9767),d=l(2364),ee=l(6695),ne=l(9332);let ie=(()=>{class n{validate(e){return e.value&&(e.value.length<8||!/\d/.test(e.value)||!/[A-Z]/.test(e.value))?{appValidatePassword:!0}:null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["","appValidatePassword",""]],features:[t._Bn([{provide:c.Cf,useExisting:n,multi:!0}])]}),n})();var ae=l(552);const se=["drawer"];function oe(n,s){1&n&&t._UZ(0,"app-loader")}function re(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td",13),t._uU(4),t.qZA(),t.TgZ(5,"td",14),t.TgZ(6,"button",15),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).addUserDrawer(o)}),t.ALo(7,"translate"),t._UZ(8,"i",16),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=s.$implicit,i=s.index;t.oxw();const a=t.MAs(2);t.xp6(1),t.Q6J("nzLeft",a.allowNzLeft),t.xp6(1),t.Oqu(e.id),t.xp6(2),t.Oqu(e.username),t.xp6(2),t.MGl("id","edit_user_button_",i,""),t.s9C("nzTooltipTitle",t.lcZ(7,5,"EDIT"))}}const ce=function(){return{key:"id",value:"ascend"}},le=function(n,s){return{x:n,y:s}};function pe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"app-table",4,5),t.TgZ(3,"nz-table",6,7),t.TgZ(5,"thead",8),t.NdJ("nzSortOrderChange",function(a){return t.CHM(e),t.MAs(2).sort(a)}),t.TgZ(6,"tr"),t.TgZ(7,"th",9),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",10),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"tbody"),t.YNc(17,re,9,7,"tr",11),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(2),i=t.MAs(4),a=t.oxw();t.xp6(1),t.Q6J("initSort",t.DdM(18,ce))("data",a.rows),t.xp6(2),t.Q6J("nzData",e.tableData)("nzFrontPagination",!1)("nzScroll",t.WLB(19,le,e.tableWidth,e.tableHeight))("nzData",e.tableData),t.xp6(4),t.Q6J("nzLeft",e.allowNzLeft),t.xp6(1),t.Oqu(t.lcZ(9,12,"ID")),t.xp6(3),t.Oqu(t.lcZ(12,14,"USERNAME")),t.xp6(3),t.Oqu(t.lcZ(15,16,"ACTION")),t.xp6(3),t.Q6J("ngForOf",i.data)("ngForTrackBy",a.trackByFun)}}function _e(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"label",23),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-validate",24),t.TgZ(5,"input",34,35),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).editUser.currentPass=a}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(6),i=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"CURRENT_PASSWORD")),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",i.editUser.currentPass)}}function de(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",17),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",18),t.TgZ(4,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDrawerClose()}),t._UZ(5,"i",20),t.qZA(),t.TgZ(6,"form",null,21),t.TgZ(8,"div",22),t.TgZ(9,"label",23),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"app-validate",24),t.TgZ(13,"input",25,26),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().editUser.username=a}),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,_e,7,5,"div",27),t.TgZ(16,"div",22),t.TgZ(17,"label",23),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"app-validate",24),t.TgZ(21,"input",28,29),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().editUser.newPassword=a}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",22),t.TgZ(24,"label",23),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"app-validate",24),t.TgZ(28,"input",30,31),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().editUser.confirmPassword=a}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",22),t._UZ(31,"label"),t.TgZ(32,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDrawerClose(!0)}),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"button",33),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().saveUser()}),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(7),i=t.MAs(14),a=t.MAs(22),o=t.MAs(29),p=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,21,"EDIT_USER")," "),t.xp6(9),t.Oqu(t.lcZ(11,23,"USERNAME")),t.xp6(2),t.Q6J("field",i),t.xp6(1),t.Q6J("ngModel",p.editUser.username)("initValue",p.initValue)("appValidateUnique",p.rows),t.xp6(2),t.Q6J("ngIf",0===p.editUser.id),t.xp6(3),t.Oqu(t.lcZ(19,25,"NEW_PASSWORD")),t.xp6(2),t.Q6J("field",a),t.xp6(1),t.Q6J("ngModel",p.editUser.newPassword),t.xp6(4),t.Oqu(t.lcZ(26,27,"CONFIRM_PASSWORD")),t.xp6(2),t.Q6J("field",o),t.xp6(1),t.Q6J("ngModel",p.editUser.confirmPassword)("appValidateEqual",a),t.xp6(4),t.uIk("id","drawer_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(34,29,"CANCEL")),t.xp6(2),t.Q6J("nzLoading",p.saving)("disabled",p.saving)("form",e),t.uIk("id","modal_ok_button"),t.xp6(1),t.Oqu(t.lcZ(37,31,"SAVE_USER"))}}let ue=(()=>{class n{constructor(e,i,a,o){this.toastr=e,this.userService=i,this.translate=a,this.drawerService=o,this.id="users",this.saving=!1,this.loadingData=!0}ngOnInit(){this.getData()}getData(){this.loadingData=!0,this.userService.getData().subscribe(e=>{this.rows=e,this.loadingData=!1},e=>{this.toastr.error(this.translate.instant("REQUEST_ERROR"))})}addUserDrawer(e){this.initValue=null==e?void 0:e.username,this.toastr.clear(),this.editUser=Object.assign({},e),this.drawerService.showDrawer(this.drawer).subscribe()}onDrawerClose(e){this.drawerService.hide()}trackByFun(e,i){return i.id}saveUser(){const i={username:this.editUser.username,pass:this.editUser.newPassword};this.saving=!0,i.id=this.editUser.id,i.currentPass=this.editUser.currentPass,this.userService.updateUser(i).subscribe(a=>{a.result?this.userService.reLogin({user:i.username,pass:i.pass}).subscribe(p=>{this.toastr.success(this.translate.instant("USERS_ADD_SUCCESS",{name:"<strong>"+i.username+"</strong>"})),this.getData(),this.saving=!1,this.drawerService.hide()},p=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.saving=!1,this.drawerService.hide()}):(this.toastr.error(this.translate.instant("WRONGPASS")),this.saving=!1)},a=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.saving=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C._),t.Y36($t.Z),t.Y36(_.sK),t.Y36(Kt.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-users"]],viewQuery:function(e,i){if(1&e&&t.Gf(se,5),2&e){let a;t.iGM(a=t.CRH())&&(i.drawer=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:4,vars:2,consts:[[4,"ngIf"],["class","section-content",4,"ngIf"],["drawer",""],[1,"section-content"],[3,"initSort","data"],["table",""],["nzTableLayout","fixed",3,"nzData","nzFrontPagination","nzScroll"],["nzTable",""],[3,"nzSortOrderChange"],["nzWidth","120px",3,"nzLeft"],["nzWidth","110px"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"nzLeft"],["nzEllipsis",""],[1,"icons"],["nz-button","","nzTooltipPlacement","left","nz-tooltip","",3,"id","nzTooltipTitle","click"],[1,"icon_abb_16","icon-abb_edit_16"],[1,"drawer-title","text-line"],[1,"drawer-body"],["tabIndex","-1","nz-button","",1,"drawer-button-close",3,"click"],[1,"icon_abb_16","icon-abb_close_16"],["formAdd","ngForm"],[1,"form-group"],[1,"label-required"],[3,"field"],["type","text","maxlength","255","id","username_input","name","username","required","",3,"ngModel","initValue","appValidateUnique","ngModelChange"],["username","ngModel"],["class","form-group",4,"ngIf"],["type","password","maxlength","255","id","user_new_password","name","newPassword","required","","appValidatePassword","",3,"ngModel","ngModelChange"],["newPassword","ngModel"],["type","text","maxlength","255","type","password","id","user_confirm_password","name","user_confirm_password","required","","appValidatePassword","",3,"ngModel","appValidateEqual","ngModelChange"],["confirmPassword","ngModel"],["nz-button","","type","button",3,"click"],["nz-button","","type","submit","nzType","primary",3,"nzLoading","disabled","form","appFormButtonClick"],["type","password","maxlength","255","id","user_current_password","name","user_current_password","required","",3,"ngModel","ngModelChange"],["currentPassword","ngModel"]],template:function(e,i){1&e&&(t.YNc(0,oe,1,0,"app-loader",0),t.YNc(1,pe,18,22,"div",1),t.YNc(2,de,38,33,"ng-template",null,2,t.W1O)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,te.a,d.N8,d.Om,d.$Z,d.Uo,d._C,d.qn,d.p0,r.sg,d.ky,v.ix,A.dQ,x.w,ee.SY,c._Y,c.JL,c.F,q.P,c.Fj,c.nD,c.Q7,c.JJ,c.On,ne.o,ie,ae.G,I.b],pipes:[_.X$],styles:["[_nghost-%COMP%]{overflow:auto}"]}),n})();var K=l(3868);let me=(()=>{class n{constructor(e,i){this.document=e,this.renderer=i,this.id="general_ui_aspect_themes"}ngOnInit(){this.themeValue="dark-mode"===localStorage.getItem("theme")?0:1}toggleTheme(){localStorage.setItem("theme",this.themeValue?"light-mode":"dark-mode"),this.renderer.removeClass(this.document.body,"dark-mode"),this.renderer.removeClass(this.document.body,"light-mode"),this.renderer.addClass(this.document.body,this.themeValue?"light-mode":"dark-mode")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.K0),t.Y36(t.Qsj))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-general-ui-theme"]],hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:15,vars:12,consts:[[1,"section-content"],["form","ngForm"],[1,"form-group-item"],["name","themeSelect",3,"ngModel","ngModelChange"],["nz-radio","","id","black_theme",3,"nzValue"],["nz-radio","","id","white_theme",3,"nzValue"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",null,1),t.TgZ(3,"h3"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",2),t._UZ(7,"label"),t.TgZ(8,"nz-radio-group",3),t.NdJ("ngModelChange",function(o){return i.themeValue=o})("ngModelChange",function(){return i.toggleTheme()}),t.TgZ(9,"label",4),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"label",5),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,6,"THEME")),t.xp6(4),t.Q6J("ngModel",i.themeValue),t.xp6(1),t.Q6J("nzValue",0),t.xp6(1),t.Oqu(t.lcZ(11,8,"DARK")),t.xp6(2),t.Q6J("nzValue",1),t.xp6(1),t.Oqu(t.lcZ(14,10,"LIGHT")))},directives:[c._Y,c.JL,c.F,K.Dg,c.JJ,c.On,K.Of],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.section-content[_ngcontent-%COMP%]{display:flex}"]}),n})();var V=l(4004);let ge=(()=>{class n{constructor(e){this.http=e}getFirmwareInfo(){return this.http.get("api/settings/ssd-update/info")}upload(e){const i=new g.aW("POST","api/settings/ssd-update/upload",e,{reportProgress:!0,responseType:"text"});return this.http.request(i).pipe((0,V.U)(a=>a.type===g.dt.UploadProgress?Math.round(100*a.loaded/a.total):a.type===g.dt.Response))}startUpdate(e){return this.http.post("api/settings/ssd-update/start",{filename:e},{responseType:"text"})}restart(){return this.http.post("api/settings/reset",{},{responseType:"text"})}updateStatus(){return this.http.get("api/settings/ssd-update/status")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var k=l(2334);const fe=["ssdUpdateSummaryTemplate"],he=["ssdFirmwareStatusTemplate"];function Te(n,s){1&n&&(t.TgZ(0,"div",3),t._UZ(1,"app-loader"),t.qZA())}function Ze(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"a",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().showStatusModal()}),t.TgZ(5,"b"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.ALo(10,"translate"),t.TgZ(11,"a",5),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"p"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"app-file-upload",6),t.NdJ("fileChange",function(a){return t.CHM(e),t.oxw().file=a})("callbackChange",function(){return t.CHM(e),t.oxw().hideToast()}),t.qZA(),t.TgZ(21,"div",7),t.TgZ(22,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit()}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,8,"SSD_FIRMWARE_VERSION")," "),t.xp6(4),t.Oqu(t.lcZ(7,10,"SSD_FIRMWARE_SHOW_VERSIONS")),t.xp6(3),t.hij(" ",t.lcZ(10,12,"SSD_FIRMWARE_UPDATE_1")," "),t.xp6(3),t.Oqu(t.lcZ(13,14,"FIRMWARE_UPDATE1_HERE")),t.xp6(3),t.Oqu(t.lcZ(16,16,"FIRMWARE_UPDATE2")),t.xp6(3),t.Oqu(t.lcZ(19,18,"FIRMWARE_UPDATE3")),t.xp6(2),t.Q6J("file",e.file),t.xp6(3),t.hij(" ",t.lcZ(24,20,"BUTTON_UPDATENOW")," ")}}function Ce(n,s){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.auxNr),t.xp6(2),t.Oqu(t.lcZ(5,2,e.status))}}function ve(n,s){if(1&n&&(t.TgZ(0,"div",9),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"nz-table",10,11),t.TgZ(6,"thead"),t.TgZ(7,"tr"),t.TgZ(8,"th"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,Ce,6,4,"tr",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",13),t.TgZ(17,"button",14),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.qZA()),2&n){const e=t.MAs(5),i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,7,"SSD_UPDATED_STATUS")),t.xp6(2),t.Q6J("nzData",i.updatedAux),t.xp6(5),t.Oqu(t.lcZ(10,9,"SSD")),t.xp6(3),t.Oqu(t.lcZ(13,11,"STATUS")),t.xp6(3),t.Q6J("ngForOf",e.data),t.xp6(2),t.uIk("id","modal_cancel_button"),t.xp6(1),t.hij(" ",t.lcZ(19,13,"DONE")," ")}}function Ae(n,s){1&n&&t._UZ(0,"app-loader")}function xe(n,s){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.qZA()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.modbus_id),t.xp6(2),t.Oqu(e.fwVersion),t.xp6(2),t.Oqu(e.sid)}}function Se(n,s){if(1&n&&(t.TgZ(0,"nz-table",10,11),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"tbody"),t.YNc(17,xe,9,4,"tr",12),t.qZA(),t.qZA()),2&n){const e=t.MAs(1),i=t.oxw(2);t.Q6J("nzData",i.firmwareInfo),t.xp6(5),t.Oqu(t.lcZ(6,6,"NAME")),t.xp6(3),t.Oqu(t.lcZ(9,8,"MODBUS_ID")),t.xp6(3),t.Oqu(t.lcZ(12,10,"FIRMWARE_VERSION")),t.xp6(3),t.Oqu(t.lcZ(15,12,"SERIAL_NUMBER")),t.xp6(3),t.Q6J("ngForOf",e.data)}}function be(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NO_DEVICES_ADDED")," "))}function Ee(n,s){if(1&n&&(t.TgZ(0,"div",9),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ae,1,0,"app-loader",15),t.YNc(5,Se,18,14,"nz-table",16),t.YNc(6,be,3,3,"p",15),t.qZA(),t.TgZ(7,"div",13),t.TgZ(8,"button",14),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"SSD_CURRENT_FW__STATUS")),t.xp6(2),t.Q6J("ngIf",e.loadingData),t.xp6(1),t.Q6J("ngIf",e.firmwareInfo.length),t.xp6(1),t.Q6J("ngIf",!e.firmwareInfo.length&&!e.loadingData),t.xp6(2),t.uIk("id","modal_cancel_button"),t.xp6(1),t.hij(" ",t.lcZ(10,8,"DONE")," ")}}let Me=(()=>{class n{constructor(e,i,a,o,p){this.toastr=e,this.modalService=i,this.translate=a,this.ssdFirmwareUpdateService=o,this.sessionService=p,this.id="system_setup_firmware_update_ssd",this.aliveStatus=!0,this.loadingData=!1,this.updatedAux=[],this.firmwareInfo=[]}showStatusModal(){this.modalService.showModal(this.ssdFirmwareStatusTemplate,()=>{})}getFirmwareInfo(){this.loadingData=!0,this.ssdFirmwareUpdateService.getFirmwareInfo().subscribe(e=>{e&&(this.loadingData=!1,this.firmwareInfo=e)})}submit(){this.hideToast(),this.file?this.modalService.showConfirm(this.translate.instant("SSD_UPDATE_WARNTEXT"),()=>{this.confirmUpload()}):this.toastr.warning(this.translate.instant("FIRMWARE_UPDATE_SELECT_FILE"))}confirmUpload(){this.sessionService.removeSessionExpiration(),this.modalService.showLoaderProgress(this.translate.instant("FIRMWARE_UPDATE_LOADINFO"));const e=new FormData;e.set("file",this.file,this.file.name),this.ssdFirmwareUpdateService.upload(e).subscribe(i=>{!0===i?this.startUpdate():this.modalService.updateProgress(i)},()=>{this.toastr.error(this.translate.instant("FIRMWARE_UPDATE_ERROR"),!0),this.sessionService.startSession(!0),this.modalService.hide()})}startUpdate(){this.modalService.showLoader(this.translate.instant("FIRMWARE_UPDATE_INFOWIN")),this.ssdFirmwareUpdateService.startUpdate(this.file.name).subscribe(()=>{this.updateStatus()})}getUpdatedAuxData(e){var i;this.updatedAux=[];const a=[];null===(i=null==e?void 0:e.upgrade_status)||void 0===i||i.forEach(o=>a.push(o)),a.forEach(o=>{Object.keys(o).forEach(p=>{this.updatedAux.push({auxNr:p,status:o[p].status})})})}updateStatus(){this.aliveStatus=!0,(0,f.H)(5e3,5e3).pipe((0,F.o)(()=>this.aliveStatus),(0,J.z)(()=>this.ssdFirmwareUpdateService.updateStatus().pipe((0,N.K)(()=>R.E)))).subscribe(({updatedAuxList:e,updateProcessCode:i})=>{if("pending"!==i.status&&"finished"===i.status)if(this.getUpdatedAuxData(e),this.aliveStatus=!1,e.status<0){let a=this.getUpdateError(e.status);this.toastr.error(this.translate.instant(a),!0),this.sessionService.startSession(!0),this.modalService.hide()}else this.modalService.showInfo(this.translate.instant("SSD_UPDATE_FINISHED"),()=>{this.modalService.showModal(this.ssdUpdateSummaryTemplate,()=>{this.sessionService.startSession(!0)})})})}getUpdateError(e){switch(e){case-2:return"CONFIG_FAULT";case-3:return"FILE_NOT_SELECTED";case-5:return"INCORRECT_FILE";case-6:return"SSD_NO_FOUND";default:return"REQUEST_ERROR"}}hideToast(){this.toastr.clear()}ngOnDestroy(){this.aliveStatus=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C._),t.Y36(O.Z),t.Y36(_.sK),t.Y36(ge),t.Y36(z.m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-firmware-update-ssd"]],viewQuery:function(e,i){if(1&e&&(t.Gf(fe,5),t.Gf(he,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.ssdUpdateSummaryTemplate=a.first),t.iGM(a=t.CRH())&&(i.ssdFirmwareStatusTemplate=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:6,vars:2,consts:[["class","section-content",4,"ngIf"],["ssdUpdateSummaryTemplate",""],["ssdFirmwareStatusTemplate",""],[1,"section-content"],["target","_blank",3,"click"],["href","","target","_blank"],["inputId","selected_file","accept",".bin",3,"file","fileChange","callbackChange"],[1,"text-center"],["nz-button","","nzType","primary","id","update_button",3,"click"],[1,"p-dialog-body"],[3,"nzData"],["basicTable",""],[4,"ngFor","ngForOf"],[1,"p-dialog-footer"],["nz-button","","appHideModal",""],[4,"ngIf"],[3,"nzData",4,"ngIf"]],template:function(e,i){1&e&&(t.YNc(0,Te,2,0,"div",0),t.YNc(1,Ze,25,22,"div",0),t.YNc(2,ve,20,15,"ng-template",null,1,t.W1O),t.YNc(4,Ee,11,10,"ng-template",null,2,t.W1O)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,k.Y,v.ix,A.dQ,x.w,d.N8,d.Om,d.$Z,d.Uo,d._C,d.p0,r.sg,Y.u],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.section-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}#update_button[_ngcontent-%COMP%]{margin-top:20px}"]}),n})(),Ue=(()=>{class n{constructor(e){this.http=e}getData(){return this.http.get("api/settings/ftp")}setData(e){return this.http.post("api/settings/ftp",e,{responseType:"text"})}getTest(e){return this.http.post("api/settings/ftp/test",e,{responseType:"text"})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const we=["form"];function Ie(n,s){1&n&&t._UZ(0,"app-loader")}function Oe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"form",3,4),t.TgZ(3,"div",5),t.TgZ(4,"label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"input",6),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.address=a}),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"input",7),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.target_directory=a}),t.qZA(),t.qZA(),t.TgZ(13,"div",5),t.TgZ(14,"label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"app-validate",8),t.TgZ(18,"nz-input-number",9,10),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.port=a}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",5),t.TgZ(21,"label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"input",11),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.username=a}),t.qZA(),t.qZA(),t.TgZ(25,"div",5),t.TgZ(26,"label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"input",12),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.password=a}),t.qZA(),t.qZA(),t.TgZ(30,"div",13),t.TgZ(31,"button",14),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().submit()}),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"button",15),t.NdJ("appFormButtonClick",function(){t.CHM(e);const a=t.MAs(2);return t.oxw().test(a)}),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(2),i=t.MAs(19),a=t.oxw();t.xp6(1),t.Q6J("appCanDeactivate",a.canDeactivate.bind(a)),t.xp6(4),t.Oqu(t.lcZ(6,23,"FTP_SERVER")),t.xp6(2),t.Q6J("ngModel",a.data.address),t.xp6(3),t.Oqu(t.lcZ(11,25,"FTP_DIRECTORY")),t.xp6(2),t.Q6J("ngModel",a.data.target_directory),t.xp6(3),t.Oqu(t.lcZ(16,27,"TCP_PORT")),t.xp6(2),t.Q6J("field",i),t.xp6(1),t.Q6J("ngModel",a.data.port)("nzMin",1)("nzMax",65535)("nzStep",1),t.xp6(4),t.Oqu(t.lcZ(23,29,"USERNAME")),t.xp6(2),t.Q6J("ngModel",a.data.username),t.xp6(3),t.Oqu(t.lcZ(28,31,"PASSWORD")),t.xp6(2),t.Q6J("ngModel",a.data.password),t.xp6(2),t.Q6J("nzLoading",a.saving)("disabled",a.saving)("form",e),t.xp6(1),t.Oqu(t.lcZ(33,33,"APPLY")),t.xp6(2),t.Q6J("nzLoading",a.saving)("disabled",a.saving)("form",e),t.xp6(1),t.Oqu(t.lcZ(36,35,"TEST"))}}let qe=(()=>{class n{constructor(e,i,a){this.translate=e,this.toastr=i,this.settingsFtpService=a,this.id="system_setup_communication_ftp",this.loadingData=!0,this.saving=!1,this.testing=!1}ngOnInit(){this.getData()}getData(){this.settingsFtpService.getData().subscribe(e=>{e.password&&(this.passwordPlaceholder=!0,e.password=""),this.data=e,this.loadingData=!1})}submit(){this.toastr.clear(),this.saving=!0,this.settingsFtpService.setData(this.data).subscribe(()=>{this.toastr.success(this.translate.instant("FTP_SUCCESS")),this.saving=!1,this.form.form.markAsPristine()},e=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),console.log(e),this.saving=!1})}test(e){let i;this.toastr.clear(),this.testing=!0,e.dirty&&(i=this.data),this.settingsFtpService.getTest(i).subscribe(()=>{this.toastr.success(this.translate.instant("BUTTON_TEST_OK")),this.testing=!1},a=>{console.log(a),a.error.includes("getaddrinfo")?this.toastr.error(this.translate.instant("FTP_WRONG_SERVER")):a.error.includes("ECONNREFUSED")?this.toastr.error(this.translate.instant("FTP_WRONG_PORT")):this.toastr.error(a.error),this.testing=!1})}canDeactivate(){return!this.form||!this.form.dirty}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.sK),t.Y36(C._),t.Y36(Ue))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-system-setup-communication-ftp"]],viewQuery:function(e,i){if(1&e&&t.Gf(we,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"appCanDeactivate"],["form","ngForm"],[1,"form-group-item"],["id","ftp_server","maxlength","255","name","ftp_server",3,"ngModel","ngModelChange"],["id","ftp_directory","maxlength","255","name","ftp_directory",3,"ngModel","ngModelChange"],[3,"field"],["name","ftp_tcp_port","id","ftp_tcp_port","nzId","ftp_tcp_port",3,"ngModel","nzMin","nzMax","nzStep","ngModelChange"],["tcpPort","ngModel"],["id","ftp_username","maxlength","255","name","ftp_username",3,"ngModel","ngModelChange"],["type","password","maxlength","255","id","ftp_password","name","ftp_password",3,"ngModel","ngModelChange"],[1,"ftp_buttons"],["nz-button","","nzType","primary","type","submit","id","apply_button",1,"btn","btn-primary",3,"nzLoading","disabled","form","appFormButtonClick"],["nz-button","","nzType","default","type","button","id","test_button",1,"btn","btn-primary",3,"nzLoading","disabled","form","appFormButtonClick"]],template:function(e,i){1&e&&(t.YNc(0,Ie,1,0,"app-loader",0),t.YNc(1,Oe,37,37,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,c._Y,c.JL,c.F,b.z,c.Fj,c.nD,c.JJ,c.On,q.P,H._,v.ix,A.dQ,x.w,I.b],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}[_nghost-%COMP%]   .section-content[_ngcontent-%COMP%]{display:flex}"]}),n})();var ye=l(2189),De=l(3104),Fe=l(9814);const Ne=["form"],Re=["formConnect"],Le=["formIp"],Pe=["formAntenna"];function ze(n,s){1&n&&t._UZ(0,"app-loader")}function Je(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"nz-switch",18),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).data.wps_enabled=a}),t.qZA(),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.data.wps_enabled),t.xp6(2),t.AsE("",t.lcZ(4,3,"WPS")," ",t.lcZ(5,5,e.data.wps_enabled?"ENABLED":"DISABLED"),"")}}function Qe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"label",19),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-validate",20),t.TgZ(5,"input",21,22),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).data.access_point_ssid=a}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(6),i=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,3,"SSID"),":"),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",i.data.access_point_ssid)}}function Ye(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-validate",23),t.TgZ(5,"input",24,25),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw(2).data.access_point_password=a}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(6),i=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,3,"PASSWORD"),":"),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",i.data.access_point_password)}}function ke(n,s){1&n&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"WIFI_NETWORK_SETTINGS")))}function Ge(n,s){1&n&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"WIFI_API_SETTINGS")))}const We=function(){return{required:!0}};function He(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div"),t.TgZ(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"form",null,3),t.TgZ(7,"div",4),t.TgZ(8,"nz-switch",5),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.access_point_enabled=a}),t.qZA(),t.TgZ(9,"span"),t._uU(10),t.ALo(11,"translate"),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.YNc(13,Je,6,7,"div",6),t.YNc(14,Qe,7,5,"div",6),t.YNc(15,Ye,7,5,"div",6),t.TgZ(16,"button",7),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().applyAccessPoint()}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.TgZ(19,"h3"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"form",null,3),t.TgZ(24,"div",4),t.TgZ(25,"nz-switch",8),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.wifi_enabled=a}),t.qZA(),t.TgZ(26,"span"),t._uU(27),t.ALo(28,"translate"),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.TgZ(30,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().applyWifi()}),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.YNc(33,ke,3,3,"h3",0),t.TgZ(34,"form",10,11),t._UZ(36,"app-system-setup-communication-wifi-network",12),t.qZA(),t.YNc(37,Ge,3,3,"h3",0),t.TgZ(38,"form",10,13),t.TgZ(40,"app-system-setup-communication-wifi-configuration",14),t.NdJ("wifiConnectedChange",function(a){return t.CHM(e),t.oxw().wifiConnected=a})("wifisChange",function(a){return t.CHM(e),t.oxw().wifis=a}),t.qZA(),t.qZA(),t.TgZ(41,"h3"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"form",null,15),t.TgZ(46,"div",4),t.TgZ(47,"label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"app-select",16),t.NdJ("modelChange",function(a){return t.CHM(e),t.oxw().data.antenna=a}),t.qZA(),t.qZA(),t.TgZ(51,"button",17),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().applyAntenna()}),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(6),i=t.MAs(35),a=t.MAs(39),o=t.MAs(45),p=t.oxw();t.Q6J("appCanDeactivate",p.canDeactivate.bind(p)),t.xp6(3),t.Oqu(t.lcZ(4,43,"ACCESS_POINT_SETTINGS")),t.xp6(5),t.Q6J("ngModel",p.data.access_point_enabled),t.xp6(2),t.AsE("",t.lcZ(11,45,"ACCESS_POINT")," ",t.lcZ(12,47,p.data.access_point_enabled?"ENABLED":"DISABLED"),""),t.xp6(3),t.Q6J("ngIf",p.data.access_point_enabled),t.xp6(1),t.Q6J("ngIf",p.data.access_point_enabled),t.xp6(1),t.Q6J("ngIf",p.data.access_point_enabled),t.xp6(1),t.Q6J("nzLoading",p.savingAccessPoint)("disabled",p.savingAccessPoint)("form",e),t.xp6(1),t.Oqu(t.lcZ(18,49,"APPLY")),t.xp6(3),t.Oqu(t.lcZ(21,51,"WIFI_SETTINGS")),t.xp6(5),t.Q6J("ngModel",p.data.wifi_enabled),t.xp6(2),t.AsE("",t.lcZ(28,53,"WIFI")," ",t.lcZ(29,55,p.data.wifi_enabled?"ENABLED":"DISABLED"),""),t.xp6(3),t.Q6J("nzLoading",p.savingWifi)("disabled",p.savingWifi),t.xp6(1),t.Oqu(t.lcZ(32,57,"APPLY")),t.xp6(2),t.Q6J("ngIf",p.wifiEnabled),t.xp6(1),t.Q6J("hidden",!p.wifiEnabled),t.xp6(2),t.Q6J("data",p.data)("formConnect",i)("wifiEnabled",p.wifiEnabled)("wifiConnected",p.wifiConnected)("wifis",p.wifis)("formIp",a),t.xp6(1),t.Q6J("ngIf",p.wifiEnabled),t.xp6(1),t.Q6J("hidden",!p.wifiEnabled),t.xp6(2),t.Q6J("data",p.data)("formIp",a)("wifiConnected",p.wifiConnected)("wifis",p.wifis)("formConnect",i),t.xp6(2),t.Oqu(t.lcZ(43,59,"ANTENNA_SELECTION")),t.xp6(6),t.hij("",t.lcZ(49,61,"ANTENNA"),":"),t.xp6(2),t.Q6J("model",p.data.antenna)("options",p.antennas)("validators",t.DdM(65,We)),t.xp6(1),t.Q6J("nzLoading",p.savingAntenna)("disabled",p.savingAntenna)("form",o),t.xp6(1),t.Oqu(t.lcZ(53,63,"APPLY"))}}let Be=(()=>{class n{constructor(e,i,a,o){this.translate=e,this.toastr=i,this.settingsCommunicationWifiService=a,this.appLoadService=o,this.id="system_setup_communication_wifi",this.loadingData=!0,this.savingAccessPoint=!1,this.savingWifi=!1,this.savingAntenna=!1,this.antennas=[{id:"internal",text:"INTERNAL"},{id:"external",text:"EXTERNAL"}]}ngOnInit(){this.appLoadService.user.isWifi||(window.location.href=document.location.origin),this.getData()}getData(){this.settingsCommunicationWifiService.getData().subscribe(e=>{this.data=e,this.wifiEnabled=e.wifi_enabled,this.wifiConnected=e.wifis?e.wifis.find(i=>i.connected):{},this.wifis=e.wifis?e.wifis.filter(i=>!i.connected):[],this.loadingData=!1})}applyWifi(){this.savingWifi=!0,this.toastr.clear();const e=(({wifi_enabled:i})=>({wifi_enabled:i}))(this.data);this.settingsCommunicationWifiService.setWifi(e).subscribe(i=>{this.toastr.success(this.translate.instant("WIFI_SET_SUCCESS")),this.wifiEnabled=this.data.wifi_enabled,this.wifiConnected=i.wifis?i.wifis.find(a=>a.connected):{},this.wifis=i.wifis?i.wifis.filter(a=>!a.connected):[],this.data.type=i.type,this.data.address=i.address,this.data.gateway=i.gateway,this.data.netmask=i.netmask,this.savingWifi=!1},i=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),console.log(i),this.savingWifi=!1})}applyAccessPoint(){this.savingAccessPoint=!0,this.toastr.clear();const e=(({access_point_enabled:i,wps_enabled:a,access_point_ssid:o,access_point_password:p})=>({access_point_enabled:i,wps_enabled:a,access_point_ssid:o,access_point_password:p}))(this.data);this.settingsCommunicationWifiService.setAccessPoint(e).subscribe(()=>{this.toastr.success(this.translate.instant("ACCESS_POINT_SET_SUCCESS")),this.form.form.markAsPristine(),this.form.form.markAsUntouched(),this.savingAccessPoint=!1},i=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),console.log(i),this.savingAccessPoint=!1})}applyAntenna(){this.savingAntenna=!0,this.toastr.clear();const e=(({antenna:i})=>({antenna:i}))(this.data);this.settingsCommunicationWifiService.setAntenna(e).subscribe(()=>{this.toastr.success(this.translate.instant("ANTENNA_SET_SUCCESS")),this.savingAntenna=!1,this.formAntenna.form.markAsPristine(),this.formAntenna.form.markAsUntouched()},i=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),console.log(i),this.savingAntenna=!1})}canDeactivate(){return!this.form||!this.form.dirty}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.sK),t.Y36(C._),t.Y36(ye.w),t.Y36(B.V))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-system-setup-communication-wifi"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Ne,5),t.Gf(Re,5),t.Gf(Le,5),t.Gf(Pe,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first),t.iGM(a=t.CRH())&&(i.formConnect=a.first),t.iGM(a=t.CRH())&&(i.formIp=a.first),t.iGM(a=t.CRH())&&(i.formAntenna=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content","id","page_content",3,"appCanDeactivate",4,"ngIf"],["id","page_content",1,"section-content",3,"appCanDeactivate"],["form","ngForm"],[1,"form-group-item"],["id","access_point_enabled","name","accessPointEnabled",3,"ngModel","ngModelChange"],["class","form-group-item",4,"ngIf"],["nz-button","","nzType","primary","id","apply_access_point_button",3,"nzLoading","disabled","form","appFormButtonClick"],["id","wifi_enabled","name","wifiEnabled",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary","id","apply_wifi_button",3,"nzLoading","disabled","click"],[3,"hidden"],["formConnect","ngForm"],[3,"data","formConnect","wifiEnabled","wifiConnected","wifis","formIp"],["formIp","ngForm"],[3,"data","formIp","wifiConnected","wifis","formConnect","wifiConnectedChange","wifisChange"],["formAntenna","ngForm"],["inputId","antenna_select",3,"model","options","validators","modelChange"],["nz-button","","nzType","primary","id","apply_antenna_button",3,"nzLoading","disabled","form","appFormButtonClick"],["id","wps_enabled","name","wpsEnabled",3,"ngModel","ngModelChange"],[1,"label-required"],["id","ssid_input",3,"field"],["type","text","name","ssid","required","","maxlength","32",1,"form-control",3,"ngModel","ngModelChange"],["ssidInput","ngModel"],["id","password_input",3,"field"],["type","password","name","password","minlength","8","maxlength","63",1,"form-control",3,"ngModel","ngModelChange"],["passwordInput","ngModel"]],template:function(e,i){1&e&&(t.YNc(0,ze,1,0,"app-loader",0),t.YNc(1,He,54,66,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,b.z,c._Y,c.JL,c.F,Q.i,c.JJ,c.On,q.P,c.Fj,c.Q7,c.nD,c.wO,v.ix,A.dQ,x.w,I.b,De.a,Fe.W,$.H],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.section-content[_ngcontent-%COMP%]{display:flex}.section-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding-bottom:15px;margin-bottom:10px;border-bottom:1px solid #dbdbdb}.section-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]:last-child{padding-bottom:0;margin-bottom:0;border-bottom:0}"]}),n})();var Ve=l(3900);let je=(()=>{class n{constructor(e){this.http=e}upload(e){const i=new g.aW("POST","api/settings/mod-update/upload",e,{reportProgress:!0,responseType:"text"});return this.http.request(i).pipe((0,V.U)(a=>a.type===g.dt.UploadProgress?Math.round(100*a.loaded/a.total):a.type===g.dt.Response))}startUpdate(e){return this.http.post("api/settings/mod-update/start",{filename:e},{responseType:"text"})}restart(){return this.http.post("api/settings/reset",{},{responseType:"text"})}updateStatus(){return this.http.get("api/settings/mod-update/status")}getModDevices(){return this.http.get("api/settings/mod-update/mod")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xe=["modUpdateProgressTemplate"],$e=["modUpdateFinished"];function Ke(n,s){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"app-loader"),t.qZA())}function tn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"a",3),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"app-file-upload",4),t.NdJ("fileChange",function(a){return t.CHM(e),t.oxw().file=a})("callbackChange",function(){return t.CHM(e),t.oxw().hideToast()}),t.qZA(),t.TgZ(14,"div",5),t.TgZ(15,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit()}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,6,"MOD_FIRMWARE_UPDATE_1")," "),t.xp6(3),t.Oqu(t.lcZ(6,8,"FIRMWARE_UPDATE1_HERE")),t.xp6(3),t.Oqu(t.lcZ(9,10,"FIRMWARE_UPDATE2")),t.xp6(3),t.Oqu(t.lcZ(12,12,"FIRMWARE_UPDATE3")),t.xp6(2),t.Q6J("file",e.file),t.xp6(3),t.Oqu(t.lcZ(17,14,"BUTTON_UPDATENOW"))}}function en(n,s){1&n&&(t.TgZ(0,"p",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MOD_FIRMWARE_UPDATE_INFOWIN")))}function nn(n,s){1&n&&(t.TgZ(0,"p",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MOD_FIRMWARE_UPDATE_FINISHED")))}function an(n,s){1&n&&t._UZ(0,"app-loader")}function sn(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.deviceInfo.fw_ver_mod)}}function on(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu("connection error"))}function rn(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.deviceInfo.status_mod))}}function cn(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"NO_STATUS")))}function ln(n,s){1&n&&(t.TgZ(0,"div",23),t._UZ(1,"i",24),t.qZA())}function pn(n,s){if(1&n&&t._UZ(0,"nz-progress",25),2&n){const e=t.oxw().$implicit;t.Q6J("nzPercent",e.deviceInfo.upload_progress)}}function _n(n,s){1&n&&t._UZ(0,"i",29)}function dn(n,s){1&n&&t._UZ(0,"i",30)}function un(n,s){1&n&&t._UZ(0,"i",24)}function mn(n,s){1&n&&t._UZ(0,"i",29)}function gn(n,s){1&n&&t._UZ(0,"i",30)}function fn(n,s){1&n&&t._UZ(0,"i",24)}function hn(n,s){if(1&n&&(t.TgZ(0,"div",17),t.TgZ(1,"div"),t.YNc(2,_n,1,0,"i",26),t.YNc(3,dn,1,0,"i",27),t.YNc(4,un,1,0,"i",28),t.qZA(),t.TgZ(5,"div"),t.YNc(6,mn,1,0,"i",26),t.YNc(7,gn,1,0,"i",27),t.YNc(8,fn,1,0,"i",28),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf","S_UPGRADE_PASSED"===e.deviceInfo.status_comm||"S_UP_TO_DATE"===e.deviceInfo.status_comm),t.xp6(1),t.Q6J("ngIf","E_UPGRADE_FAILED"===e.deviceInfo.status_comm),t.xp6(1),t.Q6J("ngIf","S_PENDING"===e.deviceInfo.status_comm||"S_APPLYING"===e.deviceInfo.status_comm&&"S_UP_TO_DATE"!==e.deviceInfo.status_comm),t.xp6(2),t.Q6J("ngIf","S_UPGRADE_PASSED"===e.deviceInfo.status_mod),t.xp6(1),t.Q6J("ngIf","E_UPGRADE_FAILED"===e.deviceInfo.status_mod||"S_UP_TO_DATE"===e.deviceInfo.status_comm&&"E_CONNECTION"===e.deviceInfo.status_mod||"E_UPGRADE_FAILED"===e.deviceInfo.status_comm&&"E_CONNECTION"===e.deviceInfo.status_mod||"S_UPGRADE_PASSED"===e.deviceInfo.status_comm&&"E_CONNECTION"===e.deviceInfo.status_mod),t.xp6(1),t.Q6J("ngIf","S_PENDING"===e.deviceInfo.status_mod||"S_APPLYING"===e.deviceInfo.status_mod||"S_APPLYING"===e.deviceInfo.status_mod&&"S_PENDING"===e.deviceInfo.status_comm&&"E_CONNECTION"===e.deviceInfo.status_mod||"E_CONNECTION"===e.deviceInfo.status_mod&&"S_PENDING"===e.deviceInfo.status_com||"S_PENDING"===e.deviceInfo.status_mod||"S_PENDING"===e.deviceInfo.status_comm&&"E_CONNECTION"===e.deviceInfo.status_mod)}}function Tn(n,s){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"div",17),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"td"),t.TgZ(14,"div",17),t.TgZ(15,"p"),t._uU(16),t.qZA(),t.YNc(17,sn,2,1,"p",8),t.YNc(18,on,2,1,"p",8),t.qZA(),t.qZA(),t.TgZ(19,"td"),t.TgZ(20,"div",17),t.TgZ(21,"p"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,rn,3,3,"p",18),t.YNc(25,cn,3,3,"ng-template",null,19,t.W1O),t.qZA(),t.qZA(),t.TgZ(27,"td"),t.YNc(28,ln,2,0,"div",20),t.YNc(29,pn,1,1,"nz-progress",21),t.YNc(30,hn,9,6,"div",22),t.qZA(),t.qZA()),2&n){const e=s.$implicit,i=t.MAs(26),a=t.oxw(3);t.xp6(2),t.Oqu(e.modbus_id),t.xp6(2),t.Oqu(a.getModName(e.modbus_id)),t.xp6(4),t.Oqu(t.lcZ(9,13,"COMM")),t.xp6(3),t.Oqu(t.lcZ(12,15,"MOD")),t.xp6(5),t.Oqu(e.deviceInfo.fw_ver_comm),t.xp6(1),t.Q6J("ngIf",e.deviceInfo.fw_ver_mod),t.xp6(1),t.Q6J("ngIf",!e.deviceInfo.fw_ver_mod),t.xp6(4),t.Oqu(t.lcZ(23,17,e.deviceInfo.status_comm)),t.xp6(2),t.Q6J("ngIf",e.deviceInfo.status_mod)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf","S_PENDING"===e.deviceInfo.status_comm&&"S_PENDING"===e.deviceInfo.status_mod||"S_APPLYING"===e.deviceInfo.status_mod&&"S_UPGRADE_PASSED"!==e.deviceInfo.status_comm&&"S_UP_TO_DATE"!==e.deviceInfo.status_comm||"S_APPLYING"===e.deviceInfo.status_comm&&"S_UP_TO_DATE"!==e.deviceInfo.status_comm||"S_UPLOADING"===e.deviceInfo.status_comm&&!e.deviceInfo.upload_progress&&"S_UP_TO_DATE"!==e.deviceInfo.status_comm||"S_PENDING"===e.deviceInfo.status_comm&&"E_CONNECTION"===e.deviceInfo.status_mod),t.xp6(1),t.Q6J("ngIf",e.deviceInfo.upload_progress),t.xp6(1),t.Q6J("ngIf","S_UPGRADE_PASSED"===e.deviceInfo.status_comm||"E_UPGRADE_FAILED"===e.deviceInfo.status_comm||"S_UP_TO_DATE"===e.deviceInfo.status_comm||"S_UP_TO_DATE"===e.deviceInfo.status_comm&&"E_CONNECTION"===e.deviceInfo.status_mod)}}function Zn(n,s){if(1&n&&(t.TgZ(0,"div",13),t.TgZ(1,"p"),t.TgZ(2,"b"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.TgZ(5,"nz-table",14,15),t.TgZ(7,"thead"),t.TgZ(8,"tr"),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"tbody"),t.YNc(28,Tn,31,19,"tr",16),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.MAs(6),i=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,9,"MOD_UPDATED_STATUS")),t.xp6(2),t.Q6J("nzData",i.updateProgress),t.xp6(5),t.Oqu(t.lcZ(11,11,"MODBUS_ID")),t.xp6(3),t.Oqu(t.lcZ(14,13,"NAME")),t.xp6(3),t.Oqu(t.lcZ(17,15,"MODULE")),t.xp6(3),t.Oqu(t.lcZ(20,17,"FIRMWARE_VERSION")),t.xp6(3),t.Oqu(t.lcZ(23,19,"STATUS")),t.xp6(3),t.Oqu(t.lcZ(26,21,"PROGRESS")),t.xp6(3),t.Q6J("ngForOf",e.data)}}function Cn(n,s){1&n&&(t.TgZ(0,"button",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.uIk("id","modal_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(2,2,"DONE")))}function vn(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,en,3,3,"p",7),t.YNc(2,nn,3,3,"p",7),t.YNc(3,an,1,0,"app-loader",8),t.qZA(),t.YNc(4,Zn,29,23,"div",9),t.TgZ(5,"div",10),t.YNc(6,Cn,3,4,"button",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.updateFinished),t.xp6(1),t.Q6J("ngIf",e.updateFinished&&!e.errorCode),t.xp6(1),t.Q6J("ngIf",!(null!=e.updateProgress&&e.updateProgress.length||e.errorCode)),t.xp6(1),t.Q6J("ngIf",null==e.updateProgress?null:e.updateProgress.length),t.xp6(2),t.Q6J("ngIf",e.updateFinished)}}let An=(()=>{class n{constructor(e,i,a,o,p){this.toastr=e,this.modalService=i,this.translate=a,this.modFirmwareUpdateService=o,this.sessionService=p,this.id="mod_firmware_update",this.aliveStatus=!0,this.loadingData=!1,this.updatedMod=[],this.currentId=0,this.modlistIds=[],this.updateProgress=[],this.updateFinished=!1}ngOnInit(){this.modFirmwareUpdateService.getModDevices().subscribe(e=>{this.modDevices=e.mods})}submit(){this.hideToast(),this.file?this.modalService.showConfirm(this.translate.instant("MOD_UPDATE_WARNTEXT"),()=>{this.confirmUpload()}):this.toastr.warning(this.translate.instant("FIRMWARE_UPDATE_SELECT_FILE"))}confirmUpload(){this.sessionService.removeSessionExpiration(),this.modalService.showLoaderProgress(this.translate.instant("FIRMWARE_UPDATE_LOADINFO"));const e=new FormData;e.set("file",this.file,this.file.name),this.uploadSubscription$=this.modFirmwareUpdateService.upload(e).subscribe(i=>{!0===i?this.startUpdate():this.modalService.showModal(this.modUpdateProgressTemplate,()=>{this.toastr.clear(),this.updateProgress=[],this.updateFinished=!1,this.updatedMod=[],this.updatePercent=0,this.modlistIds=[],this.sessionService.startSession(!0)},!0)},()=>{this.toastr.error(this.translate.instant("FIRMWARE_UPDATE_ERROR"),!0),this.sessionService.startSession(!0),this.modalService.hide()})}startUpdate(){this.modalService.showModal(this.modUpdateProgressTemplate,()=>{this.updateProgress=[],this.updateFinished=!1,this.updatedMod=[],this.updatePercent=0,this.modlistIds=[]},!0),this.modFirmwareUpdateService.startUpdate(this.file.name).subscribe(e=>{this.updateStatus()})}getUpdatedModData(e){this.updatedMod=[],null==e||e.forEach((i,a)=>this.updatedMod.push({modNr:this.modlistIds[a],fwVerComm:i.fw_ver_comm,fwVerMod:i.fw_ver_mod,status:i.status_comm}))}updateStatus(){this.aliveStatus=!0,this.statusSubscription$=(0,f.H)(5e3,5e3).pipe((0,F.o)(()=>this.aliveStatus),(0,Ve.w)(()=>this.modFirmwareUpdateService.updateStatus().pipe((0,N.K)(()=>R.E)))).subscribe(e=>{var i,a,o,p;const M=[];if(this.updateProgress=[],this.updateProgress=e.stdoutVal,(null==e?void 0:e.stdoutVal)&&(this.updateProgress=Object.values(null==e?void 0:e.stdoutVal).map((L,j)=>({modbus_id:+Object.entries(e.stdoutVal)[j][0],deviceInfo:L})),(null===(a=null===(i=e.stdoutVal)||void 0===i?void 0:i[this.modlistIds[this.currentId]])||void 0===a?void 0:a.upload_progress)&&(this.updatePercent=e.stdoutVal[this.modlistIds[this.currentId]].upload_progress),"S_UPGRADE_PASSED"===(null===(o=null==e?void 0:e.stdoutVal[this.modlistIds[this.currentId]])||void 0===o?void 0:o.status_comm)&&"S_UPLOADING"===(null===(p=e.stdoutVal[this.modlistIds[this.currentId+1]])||void 0===p?void 0:p.status_comm)&&this.currentId++),"finished"===e.updateProcessCode.status){if(this.updateFinished=!0,e.updateProcessCode.errorCode&&(this.errorCode=this.getUpdateError(e.updateProcessCode.errorCode),this.toastr.error(this.translate.instant(this.errorCode),!0),this.modalService.hide()),!this.errorCode)for(const[L,j]of Object.entries(null==e?void 0:e.stdoutVal))M.push(j);this.getUpdatedModData(M),this.aliveStatus=!1}})}getModName(e){return this.modDevices.find(i=>i.modbus_id===e).device_name}getUpdateError(e){switch(e){case 3:return"MOD_NO_FOUND";case 4:return"INCORRECT_FILE";case-2:return"CONFIG_FAULT";case-3:return"FILE_NOT_SELECTED";case-6:return"MOD_NO_FOUND";default:return"REQUEST_ERROR"}}hideToast(){this.toastr.clear()}onDoneClick(){this.statusSubscription$.unsubscribe(),this.uploadSubscription$.unsubscribe(),this.toastr.clear(),this.updateProgress=[],this.updateFinished=!1,this.updatedMod=[],this.updatePercent=0,this.modlistIds=[],this.modalService.hide()}ngOnDestroy(){this.aliveStatus=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C._),t.Y36(O.Z),t.Y36(_.sK),t.Y36(je),t.Y36(z.m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mod-firmware-update"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Xe,5),t.Gf($e,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.modUpdateProgressTemplate=a.first),t.iGM(a=t.CRH())&&(i.modUpdateFinished=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:4,vars:2,consts:[["class","section-content",4,"ngIf"],["modUpdateProgressTemplate",""],[1,"section-content"],["href","","target","_blank"],["inputId","selected_file","accept",".bin",3,"file","fileChange","callbackChange"],[1,"text-center"],["nz-button","","nzType","primary","id","update_button",3,"click"],["style","margin: 50px 50px",4,"ngIf"],[4,"ngIf"],["class","p-dialog-body",4,"ngIf"],[1,"p-dialog-footer"],["nz-button","","appHideModal","",4,"ngIf"],[2,"margin","50px 50px"],[1,"p-dialog-body"],[3,"nzData"],["basicTable",""],[4,"ngFor","ngForOf"],[1,"divide"],[4,"ngIf","ngIfElse"],["noStatus",""],["style","display: flex; justify-content: center;align-items: center;",4,"ngIf"],["nzStatus","normal",3,"nzPercent",4,"ngIf"],["class","divide",4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center"],[1,"icon_abb_16","icon-abb_hour-glass_16"],["nzStatus","normal",3,"nzPercent"],["style","color: rgb(12, 169, 25)","class","icon_abb_16 icon-abb_check-mark-light_32",4,"ngIf"],["style","color: rgb(240, 48, 64)","class","icon_abb_16 icon-abb_error-circle-2_32",4,"ngIf"],["class","icon_abb_16 icon-abb_hour-glass_16",4,"ngIf"],[1,"icon_abb_16","icon-abb_check-mark-light_32",2,"color","rgb(12, 169, 25)"],[1,"icon_abb_16","icon-abb_error-circle-2_32",2,"color","rgb(240, 48, 64)"],["nz-button","","appHideModal",""]],template:function(e,i){1&e&&(t.YNc(0,Ke,2,0,"div",0),t.YNc(1,tn,18,16,"div",0),t.YNc(2,vn,7,5,"ng-template",null,1,t.W1O)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,k.Y,v.ix,A.dQ,x.w,d.N8,d.Om,d.$Z,d.Uo,d._C,d.p0,r.sg,G.M,Y.u],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.section-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}#update_button[_ngcontent-%COMP%]{margin-top:20px}#mod_update_template[_ngcontent-%COMP%]{height:200px;margin:20px;display:flex;flex-direction:column;justify-content:center}.mod-number[_ngcontent-%COMP%]{display:flex;gap:5px}.divide[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:left}.divide[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;align-self:start}.icon-status[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),n})();var xn=l(1688);const Sn=["form"];function bn(n,s){1&n&&t._UZ(0,"app-loader")}function En(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"form",3,4),t.TgZ(3,"div",5),t.TgZ(4,"label",6),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"app-validate",7),t.TgZ(8,"input",8,9),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.dns1=a}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"app-validate",7),t.TgZ(15,"input",10,11),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.dns2=a}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"button",12),t.NdJ("appFormButtonClick",function(){return t.CHM(e),t.oxw().submit()}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(2),i=t.MAs(9),a=t.MAs(16),o=t.oxw();t.xp6(1),t.Q6J("appCanDeactivate",o.canDeactivate.bind(o)),t.xp6(4),t.Oqu(t.lcZ(6,12,"DNS_SERVER1")),t.xp6(2),t.Q6J("field",i),t.xp6(1),t.Q6J("ngModel",o.data.dns1),t.xp6(4),t.Oqu(t.lcZ(13,14,"DNS_SERVER2")),t.xp6(2),t.Q6J("field",a),t.xp6(1),t.Q6J("ngModel",o.data.dns2),t.xp6(2),t.Q6J("disabled",!o.data.dns1)("nzLoading",o.saving)("disabled",o.saving)("form",e),t.xp6(1),t.Oqu(t.lcZ(19,16,"APPLY"))}}let Mn=(()=>{class n{constructor(e,i,a,o){this.translate=e,this.toastr=i,this.settingsCommunicationIpService=a,this.modalService=o,this.id="system_setup_communication_dns",this.data={dns1:"",dns2:""},this.saving=!1,this.loadingData=!0}ngOnInit(){this.getData()}getData(){this.settingsCommunicationIpService.getDns().subscribe(e=>{this.data=e,this.loadingData=!1})}submit(){let e;this.toastr.clear(),e=(({dns1:i,dns2:a})=>({dns1:i,dns2:a}))(this.data),this.modalService.showConfirm(this.translate.instant("DNS_CHANGE_WARNING"),()=>{this.saving=!0,this.modalService.hide(),this.settingsCommunicationIpService.setDns(e).subscribe(i=>{i.includes("is not valid")?(this.toastr.error(i),this.saving=!1):this.modalService.showInfo(this.translate.instant("DNS_CHANGE_SUCCESS"),()=>{this.modalService.hide(),this.saving=!1,this.form.form.markAsPristine()})},i=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.saving=!1})})}canDeactivate(){return!this.form||!this.form.dirty}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.sK),t.Y36(C._),t.Y36(W.g),t.Y36(O.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-system-setup-communication-dns"]],viewQuery:function(e,i){if(1&e&&t.Gf(Sn,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"appCanDeactivate"],["form","ngForm"],[1,"form-group-item"],[1,"label-required"],[3,"field"],["id","dns_server1","maxlength","255","appValidateIp","","name","dns_server1","required","",3,"ngModel","ngModelChange"],["dns_server1","ngModel"],["id","dns_server2","maxlength","255","appValidateIp","","name","dns_server2",3,"ngModel","ngModelChange"],["dns_server2","ngModel"],["nz-button","","nzType","primary","id","apply_button",3,"disabled","nzLoading","form","appFormButtonClick"]],template:function(e,i){1&e&&(t.YNc(0,bn,1,0,"app-loader",0),t.YNc(1,En,20,18,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,c._Y,c.JL,c.F,b.z,q.P,c.Fj,c.nD,xn.M,c.Q7,c.JJ,c.On,v.ix,A.dQ,x.w,I.b],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}[_nghost-%COMP%]   .section-content[_ngcontent-%COMP%]{display:flex}"]}),n})();function Un(n,s){1&n&&(t.TgZ(0,"a",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CONTROL_UNIT")," "))}function wn(n,s){1&n&&(t.TgZ(0,"a",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SSD")," "))}function In(n,s){1&n&&(t.TgZ(0,"a",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MOD")," "))}function On(n,s){1&n&&(t.TgZ(0,"a",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WIRELESS_MBUS")," "))}let qn=(()=>{class n{constructor(){this.id="system_setup_firmware_update"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-firmware-update"]],hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:10,vars:1,consts:[["nzType","card","nzLinkRouter","",3,"nzAnimated"],["id","menu_system_setup_firmware_update_control_unit","nz-tab-link","","routerLink","/system-setup/firmware-update/control-unit",4,"nzTabLink"],["id","menu_system_setup_firmware_update_ssd","nz-tab-link","","routerLink","/system-setup/firmware-update/ssd",4,"nzTabLink"],["id","menu_system_setup_firmware_update_mod","nz-tab-link","","routerLink","/system-setup/firmware-update/mod",4,"nzTabLink"],["id","menu_system_setup_firmware_update_wireless_mbus","nz-tab-link","","routerLink","/system-setup/firmware-update/wireless-mbus",4,"nzTabLink"],[1,"router-outlet"],["id","menu_system_setup_firmware_update_control_unit","nz-tab-link","","routerLink","/system-setup/firmware-update/control-unit"],["id","menu_system_setup_firmware_update_ssd","nz-tab-link","","routerLink","/system-setup/firmware-update/ssd"],["id","menu_system_setup_firmware_update_mod","nz-tab-link","","routerLink","/system-setup/firmware-update/mod"],["id","menu_system_setup_firmware_update_wireless_mbus","nz-tab-link","","routerLink","/system-setup/firmware-update/wireless-mbus"]],template:function(e,i){1&e&&(t.TgZ(0,"nz-tabset",0),t.TgZ(1,"nz-tab"),t.YNc(2,Un,3,3,"a",1),t.qZA(),t.TgZ(3,"nz-tab"),t.YNc(4,wn,3,3,"a",2),t.qZA(),t.TgZ(5,"nz-tab"),t.YNc(6,In,3,3,"a",3),t.qZA(),t.TgZ(7,"nz-tab"),t.YNc(8,On,3,3,"a",4),t.qZA(),t.qZA(),t._UZ(9,"router-outlet",5)),2&e&&t.Q6J("nzAnimated",!1)},directives:[m.xH,m.xw,m.Fx,m.Ao,Z.yS,Z.lC],pipes:[_.X$],styles:["[_nghost-%COMP%]{overflow:auto}"]}),n})();var yn=l(6681),Dn=l(4447);const Fn=["form"];function Nn(n,s){1&n&&t._UZ(0,"app-loader")}function Rn(n,s){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"form",3,4),t._UZ(3,"app-general-region-configuration",5),t.qZA(),t.qZA()),2&n){const e=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("appCanDeactivate",i.canDeactivate.bind(i)),t.xp6(2),t.Q6J("form",e)("data",i.data)("currencies",i.currencies)("languages",i.languages)}}let Ln=(()=>{class n{constructor(e,i){this.settingsRegionService=e,this.appLoadService=i,this.id="general_region",this.loadingData=!0,this.ntpServers=[]}ngOnInit(){this.data={language:this.appLoadService.user.language,currency:this.appLoadService.currency.value.id},this.settingsRegionService.getData().subscribe(e=>{this.loadingData=!1,this.currencies=e.currencies,this.languages=e.languages})}canDeactivate(){return!this.form||!this.form.dirty}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(yn.U),t.Y36(B.V))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-general-region"]],viewQuery:function(e,i){if(1&e&&t.Gf(Fn,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"appCanDeactivate"],["form","ngForm"],[3,"form","data","currencies","languages"]],template:function(e,i){1&e&&(t.YNc(0,Nn,1,0,"app-loader",0),t.YNc(1,Rn,4,5,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,c._Y,c.JL,c.F,b.z,Dn.l],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.section-content[_ngcontent-%COMP%]{display:flex}"]}),n})();function Pn(n,s){1&n&&(t.TgZ(0,"a",4),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"UPLOAD")," "))}function zn(n,s){1&n&&(t.TgZ(0,"a",5),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"GENERATE")," "))}let Jn=(()=>{class n{constructor(){this.id="ssl_certificate"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-users"]],hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:6,vars:1,consts:[["nzType","card","nzLinkRouter","",3,"nzAnimated"],["id","menu_system_setup_ssl_certificate_upload","nz-tab-link","","routerLink","/system-setup/ssl-certificate/upload",4,"nzTabLink"],["id","menu_system_setup_ssl_certificate_generete","nz-tab-link","","routerLink","/system-setup/ssl-certificate/generate",4,"nzTabLink"],[1,"router-outlet"],["id","menu_system_setup_ssl_certificate_upload","nz-tab-link","","routerLink","/system-setup/ssl-certificate/upload"],["id","menu_system_setup_ssl_certificate_generete","nz-tab-link","","routerLink","/system-setup/ssl-certificate/generate"]],template:function(e,i){1&e&&(t.TgZ(0,"nz-tabset",0),t.TgZ(1,"nz-tab"),t.YNc(2,Pn,3,3,"a",1),t.qZA(),t.TgZ(3,"nz-tab"),t.YNc(4,zn,3,3,"a",2),t.qZA(),t.qZA(),t._UZ(5,"router-outlet",3)),2&e&&t.Q6J("nzAnimated",!1)},directives:[m.xH,m.xw,m.Fx,m.Ao,Z.yS,Z.lC],pipes:[_.X$],styles:["[_nghost-%COMP%]{overflow:auto}"]}),n})(),tt=(()=>{class n{constructor(e){this.http=e}upload(e){return this.http.post("api/settings/certificate/upload",e,{responseType:"text"})}serverStatus(){return this.http.get("api/settings/server-status",{responseType:"text"})}generate(e){return this.http.post("api/settings/certificate/generate",e,{responseType:"text"})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qn=(()=>{class n{validate(e){return!e.value||/^(?!:\/\/)([a-zA-Z0-9-_]+\.)*[a-zA-Z0-9][a-zA-Z0-9-_]+\.[a-zA-Z]{2,11}?$/gim.test(e.value)||/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/.test(e.value)?null:{appValidateIpDomain:!0}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["","appValidateIpDomain",""]],features:[t._Bn([{provide:c.Cf,useExisting:n,multi:!0}])]}),n})();const Yn=["form"];function kn(n,s){1&n&&t._UZ(0,"app-loader")}function Gn(n,s){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.address)}}const Wn=function(n){return[n]};function Hn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div"),t.TgZ(2,"form"),t.TgZ(3,"div",3),t.TgZ(4,"label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"div",3),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.qZA(),t.qZA(),t.TgZ(15,"div",3),t.TgZ(16,"label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"span"),t._uU(20),t.qZA(),t.qZA(),t.TgZ(21,"div",3),t.TgZ(22,"label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"nz-switch",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().setSubnet()})("ngModelChange",function(a){return t.CHM(e),t.oxw().data.wholeSubnet=a}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"form",5,6),t.TgZ(28,"div",3),t.TgZ(29,"label",7),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"app-validate",8),t.TgZ(33,"input",9,10),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.domain_ip=a}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",3),t.TgZ(36,"button",11),t.NdJ("click",function(){t.CHM(e);const a=t.MAs(27);return t.oxw().submit(a)}),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.qZA(),t.TgZ(39,"nz-table",12,13),t.ALo(41,"translate"),t.TgZ(42,"thead"),t.TgZ(43,"tr"),t.TgZ(44,"th",14),t._uU(45,"#"),t.qZA(),t.TgZ(46,"th"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"tbody"),t.YNc(50,Gn,5,2,"tr",15),t.qZA(),t.qZA(),t.TgZ(51,"div",3),t.TgZ(52,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateCertificate()}),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.qZA(),t.TgZ(55,"div",3),t.TgZ(56,"a",17),t.TgZ(57,"button",18),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(60,"app-description-box",19),t.qZA()}if(2&n){const e=t.MAs(34),i=t.MAs(40),a=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,24,"IP_ADDRESS")),t.xp6(3),t.Oqu(a.data.address),t.xp6(3),t.Oqu(t.lcZ(12,26,"IP_SUBNET")),t.xp6(3),t.Oqu(a.data.netmask),t.xp6(3),t.Oqu(t.lcZ(18,28,"IP_GATEWAY")),t.xp6(3),t.Oqu(a.data.gateway),t.xp6(3),t.Oqu(t.lcZ(24,30,"SSL_WHOLE_SUBNET")),t.xp6(2),t.Q6J("ngModel",a.data.wholeSubnet),t.xp6(1),t.Q6J("appCanDeactivate",a.canDeactivate.bind(a)),t.xp6(3),t.Q6J("ngClass",t.VKq(44,Wn,a.data.wholeSubnet?"":"label-required")),t.xp6(1),t.hij("",t.lcZ(31,32,"SSL_DOMAIN_IP"),":"),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",a.data.domain_ip)("required",!a.data.wholeSubnet),t.xp6(3),t.Q6J("disabled",!a.data.domain_ip),t.uIk("id","button_apply"),t.xp6(1),t.Oqu(t.lcZ(38,34,"ADD")),t.xp6(2),t.Q6J("nzData",a.rows)("nzNoResult",t.lcZ(41,36,"NO_IP_ADDRESSES")),t.xp6(5),t.Q6J("nzWidth","50px"),t.xp6(3),t.Oqu(t.lcZ(48,38,"SSL_SELECTED")),t.xp6(3),t.Q6J("ngForOf",i.data),t.xp6(3),t.Oqu(t.lcZ(54,40,"GENERATE")),t.xp6(5),t.Oqu(t.lcZ(59,42,"DOWNLOAD_CERTIFICATE"))}}let Bn=(()=>{class n{constructor(e,i,a,o,p){this.settingsCommunicationIpService=e,this.settingsSslUploadservice=i,this.toastr=a,this.translate=o,this.modalService=p,this.id="ssl_certificate_generate",this.loadingData=!0,this.rows=[],this.ipList=["10.11.12.1","11.22.13.2"]}canDeactivate(){}ngOnInit(){this.getData()}getData(){this.settingsCommunicationIpService.getData().subscribe(e=>{this.data=e,this.data.wholeSubnet=!1,this.loadingData=!1})}addAddress(e,i="ip"){this.rows.find(a=>a.address===e)?this.toastr.warning(e+" "+this.translate.instant("CERTIFICATE_GENERATE_ADD_EXI")):this.rows=[...this.rows,{id:this.rows.length+1,address:e,type:i}]}generateCertificate(){const e={ips:this.rows.filter(i=>"ip"===i.type).map(({address:i})=>i),domains:this.rows.filter(i=>"domain"===i.type).map(({address:i})=>i)};e.ips.length||e.domains.length?this.modalService.showConfirm(this.translate.instant("CERTIFICATE_GENERATE_WARNTEXT"),()=>{this.modalService.showLoader(this.translate.instant("CERTIFICATE_GENERATE_INFO")),this.settingsSslUploadservice.generate(e).subscribe(()=>{this.modalService.showLoader(this.translate.instant("CERTIFICATE_GENERATE_REBOOT")),setTimeout(()=>{this.modalService.showInfo(this.translate.instant("CERTIFICATE_UPLOAD_REBOOT_ERR"),()=>{this.modalService.hide(),this.form.form.markAsPristine(),this.rows=[],window.location.reload()})},6e4)},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.modalService.hide()})}):this.toastr.warning(this.translate.instant("CERTIFICATE_GENERATE_EMPTY"))}submit(e){this.toastr.clear(),/^(?!:\/\/)([a-zA-Z0-9-_]+\.)*[a-zA-Z0-9][a-zA-Z0-9-_]+\.[a-zA-Z]{2,11}?$/gim.test(this.data.domain_ip)?(this.addAddress(this.data.domain_ip,"domain"),this.data.domain_ip=null,e.reset()):/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(this.data.domain_ip)&&(this.addAddress(this.data.domain_ip),this.data.domain_ip=null,e.reset())}setSubnet(){if(this.toastr.clear(),this.data.wholeSubnet)this.rows=[];else{let e="",i=0;const a=this.data.netmask.split("."),o=this.data.gateway.split(".");if(255===parseInt(a[2],10))if(255===parseInt(a[3],10))this.addAddress(this.data.gateway);else for(let p=0;p<=255-parseInt(a[3],10);p++)e=o[0]+"."+o[1]+"."+o[2]+"."+p,this.addAddress(e);else if(254===parseInt(a[2],10))for(let p=0;p<=1;p++){i=parseInt(o[2],10)+p,o[2]=i.toString();for(let M=0;M<=255;M++)e=o[0]+"."+o[1]+"."+o[2]+"."+M,this.addAddress(e)}else if(252===parseInt(a[2],10))for(let p=0;p<=3;p++){i=parseInt(o[2],10)+p;const M=i.toString();for(let L=0;L<=255;L++)e=o[0]+"."+o[1]+"."+M+"."+L,this.addAddress(e)}else this.toastr.warning(this.translate.instant("CERTIFICATE_GENERATE_SUBNET_ERR"))}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(W.g),t.Y36(tt),t.Y36(C._),t.Y36(_.sK),t.Y36(O.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-users"]],viewQuery:function(e,i){if(1&e&&t.Gf(Yn,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[1,"form-group-item"],["nzSize","small","id","send_event_switch","name","eventSwitch",3,"ngModel","click","ngModelChange"],[3,"appCanDeactivate"],["form","ngForm"],[3,"ngClass"],[3,"field"],["type","text","maxlength","255","id","ip_address_input","name","ipAddress","appValidateIpDomain","",1,"form-control",3,"ngModel","required","ngModelChange"],["ipAddress","ngModel"],["nz-button","","type","button",3,"disabled","click"],[3,"nzData","nzNoResult"],["basicTable",""],[3,"nzWidth"],[4,"ngFor","ngForOf"],["nzType","primary","nz-button","","type","button","id","'button_generate'",3,"click"],["href","/api/certificate"],["nzType","default","nz-button","","type","button","id","'button_donwload_certificate'"],["header","CERTIFICATE_GENERATE_HEADER","text","CERTIFICATE_GENERATE_TEXT"]],template:function(e,i){1&e&&(t.YNc(0,kn,1,0,"app-loader",0),t.YNc(1,Hn,61,46,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,c._Y,c.JL,c.F,Q.i,c.JJ,c.On,b.z,r.mk,q.P,c.Fj,c.nD,Qn,c.Q7,v.ix,A.dQ,x.w,d.N8,d.Om,d.$Z,d.Uo,d._C,d.p0,r.sg,D.i],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .section-content[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .form-group-item[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .form-group-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px;font-weight:800}[_nghost-%COMP%]   .form-group-item[_ngcontent-%COMP%]   app-validate[_ngcontent-%COMP%], [_nghost-%COMP%]   .form-group-item[_ngcontent-%COMP%]   nz-switch[_ngcontent-%COMP%]{margin-left:10px;width:50%}"]}),n})();const Vn=["form"];function jn(n,s){1&n&&(t.TgZ(0,"div",1),t._UZ(1,"app-loader"),t.qZA())}function Xn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-file-upload",2),t.NdJ("fileChange",function(a){return t.CHM(e),t.oxw().file=a})("callbackChange",function(){return t.CHM(e),t.oxw().hideToast()}),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploadCertificate()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.TgZ(10,"div",4),t.TgZ(11,"a",6),t.TgZ(12,"button",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"SSL_UPLOAD_TEXT")),t.xp6(2),t.Q6J("file",e.file),t.xp6(4),t.Oqu(t.lcZ(9,6,"UPLOAD")),t.xp6(5),t.Oqu(t.lcZ(14,8,"DOWNLOAD_CERTIFICATE"))}}let $n=(()=>{class n{constructor(e,i,a,o){this.toastr=e,this.translate=i,this.modalService=a,this.settingsSslUploadService=o,this.id="ssl_certificate_generate",this.loadingData=!0,this.rows=[],this.alive=!0}canDeactivate(){}ngOnInit(){this.loadingData=!1}hideToast(){this.toastr.clear()}uploadCertificate(){this.hideToast(),this.file?/(\.pem)$/i.exec(this.file.name)?0===this.file.size?this.toastr.warning(this.translate.instant("CERTIFICATE_UPLOAD_FILE_EMPTY")):this.modalService.showConfirm(this.translate.instant("CERTIFICATE_UPLOAD_WARNTEXT"),()=>{const e=new FileReader;e.onload=()=>{this.confirmUpload({pemRead:e.result})},e.onerror=()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.modalService.hide()},e.readAsText(this.file),this.modalService.hide()}):this.toastr.warning(this.translate.instant("CERTIFICATE_UPLOAD_ERROR_FILE")):this.toastr.warning(this.translate.instant("CERTIFICATE_UPLOAD_FILE_EMPTY"))}confirmUpload(e){this.modalService.showLoader(this.translate.instant("CERTIFICATE_UPLOAD_REBOOT")),this.settingsSslUploadService.upload(e).subscribe(()=>{this.serverStatus(),setTimeout(()=>{this.alive&&(this.alive=!1,this.modalService.showInfo(this.translate.instant("CERTIFICATE_UPLOAD_REBOOT_ERR"),()=>{this.modalService.hide(),window.location.reload()}))},6e4)},()=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),this.modalService.hide()})}serverStatus(){(0,f.H)(5e3,5e3).pipe((0,F.o)(()=>this.alive),(0,J.z)(()=>this.settingsSslUploadService.serverStatus().pipe((0,N.K)(()=>R.E)))).subscribe(()=>{this.alive=!1,this.modalService.showInfo(this.translate.instant("CERTIFICATE_UPLOAD_SUCCESS"),()=>{this.modalService.hide(),window.location.reload()})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C._),t.Y36(_.sK),t.Y36(O.Z),t.Y36(tt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-users"]],viewQuery:function(e,i){if(1&e&&t.Gf(Vn,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[["class","section-content",4,"ngIf"],[1,"section-content"],["inputId","selected_file","accept",".pem",3,"file","fileChange","callbackChange"],[1,"buttons"],[1,"form-group-item"],["nzType","primary","nz-button","","type","button","id","'button_generate'",3,"click"],["href","/api/certificate"],["nzType","default","nz-button","","type","button","id","'button_dowload_certificate'"]],template:function(e,i){1&e&&(t.YNc(0,jn,2,0,"div",0),t.YNc(1,Xn,15,10,"div",0)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,k.Y,v.ix,A.dQ,x.w],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.section-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.section-content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.section-content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.form-group-item[_ngcontent-%COMP%]{display:flex}.form-group-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px;font-weight:800}.form-group-item[_ngcontent-%COMP%]   app-validate[_ngcontent-%COMP%], .form-group-item[_ngcontent-%COMP%]   nz-switch[_ngcontent-%COMP%]{margin-left:10px;width:50%}"]}),n})(),Kn=(()=>{class n{constructor(e){this.http=e}getFirmwareInfo(){return this.http.get("api/settings/wireless-mbus-update/info")}upload(e){const i=new g.aW("POST","api/settings/wireless-mbus-update/upload",e,{reportProgress:!0,responseType:"text"});return this.http.request(i).pipe((0,V.U)(a=>a.type===g.dt.UploadProgress?Math.round(100*a.loaded/a.total):a.type===g.dt.Response))}startUpdate(e){return this.http.post("api/settings/wireless-mbus-update/start",{filename:e},{responseType:"text"})}restart(){return this.http.post("api/settings/reset",{},{responseType:"text"})}updateStatus(){return this.http.get("api/settings/wireless-mbus-update/status")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ti=["wirelessMbusFirmwareProgressTemplate"],ei=["wirelessMbusFirmwareStatusTemplate"];function ni(n,s){1&n&&(t.TgZ(0,"div",3),t._UZ(1,"app-loader"),t.qZA())}function ii(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"a",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().getFirmwareInfo()}),t.TgZ(5,"b"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.ALo(10,"translate"),t.TgZ(11,"a",5),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"p"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"app-file-upload",6),t.NdJ("fileChange",function(a){return t.CHM(e),t.oxw().file=a})("callbackChange",function(){return t.CHM(e),t.oxw().hideToast()}),t.qZA(),t.TgZ(21,"div",7),t.TgZ(22,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit()}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,8,"FIRMWARE_VERSION")," "),t.xp6(4),t.Oqu(t.lcZ(7,10,"WMBUS_FIRMWARE_SHOW_VERSIONS")),t.xp6(3),t.hij("",t.lcZ(10,12,"WMBUS_FIRMWARE_UPDATE1")," "),t.xp6(3),t.Oqu(t.lcZ(13,14,"FIRMWARE_UPDATE1_HERE")),t.xp6(3),t.Oqu(t.lcZ(16,16,"FIRMWARE_UPDATE2")),t.xp6(3),t.Oqu(t.lcZ(19,18,"FIRMWARE_UPDATE3")),t.xp6(2),t.Q6J("file",e.file),t.xp6(3),t.Oqu(t.lcZ(24,20,"BUTTON_UPDATENOW"))}}function ai(n,s){1&n&&(t.TgZ(0,"p",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"WMBUS_FIRMWARE_UPDATE_INFOWIN")))}function si(n,s){1&n&&(t.TgZ(0,"p",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"WMBUS_FIRMWARE_UPDATE_FINISHED")))}function oi(n,s){if(1&n&&t._UZ(0,"nz-progress",25),2&n){const e=t.oxw().$implicit,i=t.oxw(3);t.Q6J("nzPercent",i.roundProgress(e.progress))}}function ri(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.status))}}function ci(n,s){1&n&&t._UZ(0,"i",26)}function li(n,s){1&n&&(t.TgZ(0,"div",21),t._UZ(1,"i",27),t.qZA())}function pi(n,s){1&n&&t._UZ(0,"i",28)}function _i(n,s){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,oi,1,1,"nz-progress",19),t.YNc(7,ri,3,3,"span",20),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"div",21),t.YNc(10,ci,1,0,"i",22),t.qZA(),t.YNc(11,li,2,0,"div",23),t.TgZ(12,"div",21),t.YNc(13,pi,1,0,"i",24),t.qZA(),t.qZA(),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(3);t.xp6(2),t.Oqu(e.modbus_id),t.xp6(2),t.hij(" ",e.current_fw," "),t.xp6(2),t.Q6J("ngIf",!i.updateFinished&&e.progress),t.xp6(1),t.Q6J("ngIf",i.updateFinished||!e.progress),t.xp6(3),t.Q6J("ngIf","S_UPGRADE_SUCCEED"===e.status||"S_UP_TO_DATE"===e.status),t.xp6(1),t.Q6J("ngIf","S_UPLOADING"===e.status),t.xp6(2),t.Q6J("ngIf","E_COMM_ERROR"===e.status)}}function di(n,s){if(1&n&&(t.TgZ(0,"div",14),t.TgZ(1,"p"),t.TgZ(2,"b"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.TgZ(5,"nz-table",15,16),t.TgZ(7,"thead"),t.TgZ(8,"tr"),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"tbody"),t.YNc(22,_i,14,7,"tr",17),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.MAs(6),i=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,7,"WMBUS_UPDATED_STATUS")),t.xp6(2),t.Q6J("nzData",i.updateProgress),t.xp6(5),t.Oqu(t.lcZ(11,9,"MODBUS_ID")),t.xp6(3),t.Oqu(t.lcZ(14,11,"CURRENT_FIRMWARE_VERSION")),t.xp6(3),t.Oqu(t.lcZ(17,13,"PROGRESS")),t.xp6(3),t.Oqu(t.lcZ(20,15,"STATUS")),t.xp6(3),t.Q6J("ngForOf",e.data)}}function ui(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onDoneClick()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.uIk("id","modal_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(2,2,"DONE")))}function mi(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ai,3,3,"p",9),t.YNc(2,si,3,3,"p",9),t.qZA(),t.YNc(3,di,23,17,"div",10),t.TgZ(4,"div",11),t.YNc(5,ui,3,4,"button",12),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.updateFinished),t.xp6(1),t.Q6J("ngIf",e.updateFinished),t.xp6(1),t.Q6J("ngIf",null==e.updateProgress?null:e.updateProgress.length),t.xp6(2),t.Q6J("ngIf",e.updateFinished)}}function gi(n,s){1&n&&t._UZ(0,"app-loader")}function fi(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"NO_DEVICES_ADDED")))}function hi(n,s){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.qZA()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.modbus_id),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.fwVersion)}}function Ti(n,s){if(1&n&&(t.TgZ(0,"nz-table",15,16),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"tbody"),t.YNc(14,hi,7,3,"tr",17),t.qZA(),t.qZA()),2&n){const e=t.MAs(1),i=t.oxw(2);t.Q6J("nzData",i.firmwareInfo),t.xp6(5),t.Oqu(t.lcZ(6,5,"MODBUS_ID")),t.xp6(3),t.Oqu(t.lcZ(9,7,"NAME")),t.xp6(3),t.Oqu(t.lcZ(12,9,"FIRMWARE_VERSION")),t.xp6(3),t.Q6J("ngForOf",e.data)}}function Zi(n,s){if(1&n&&(t.TgZ(0,"div",14),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,gi,1,0,"app-loader",20),t.YNc(5,fi,3,3,"p",20),t.YNc(6,Ti,15,11,"nz-table",30),t.qZA(),t.TgZ(7,"div",11),t.TgZ(8,"button",31),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"WMBUS_CURRENT_FW__STATUS")),t.xp6(2),t.Q6J("ngIf",e.loadingData),t.xp6(1),t.Q6J("ngIf",!e.firmwareInfo.length&&!e.loadingData),t.xp6(1),t.Q6J("ngIf",e.firmwareInfo.length),t.xp6(2),t.uIk("id","modal_cancel_button"),t.xp6(1),t.Oqu(t.lcZ(10,8,"DONE"))}}let Ci=(()=>{class n{constructor(e,i,a,o,p){this.toastr=e,this.modalService=i,this.translate=a,this.wmbusFirmwareUpdateService=o,this.sessionService=p,this.id="system_setup_firmware_update_wireless_mbus",this.aliveStatus=!0,this.loadingData=!1,this.updateList=[],this.updateProgress=[],this.updateFinished=!1,this.firmwareInfo=[]}getFirmwareInfo(){this.loadingData=!0,this.modalService.showModal(this.wirelessMbusFirmwareStatusTemplate,()=>{}),this.wmbusFirmwareUpdateService.getFirmwareInfo().subscribe(e=>{e&&(this.loadingData=!1,this.firmwareInfo=e)})}showStatusModal(){this.modalService.showModal(this.wirelessMbusFirmwareStatusTemplate,()=>{})}submit(){this.hideToast(),this.file?this.modalService.showConfirm(this.translate.instant("WMBUS_UPDATE_WARNTEXT"),()=>{this.confirmUpload()}):this.toastr.warning(this.translate.instant("FIRMWARE_UPDATE_SELECT_FILE"))}confirmUpload(){this.sessionService.removeSessionExpiration(),this.modalService.showLoaderProgress(this.translate.instant("FIRMWARE_UPDATE_LOADINFO"));const e=new FormData;e.set("file",this.file,this.file.name),this.uploadSubscription$=this.wmbusFirmwareUpdateService.upload(e).subscribe(i=>{!0===i?this.startUpdate():this.modalService.updateProgress(i)},()=>{this.toastr.error(this.translate.instant("FIRMWARE_UPDATE_ERROR"),!0),this.sessionService.startSession(!0),this.modalService.hide()})}startUpdate(){this.modalService.showLoader(this.translate.instant("FIRMWARE_UPDATE_INFOWIN")),this.wmbusFirmwareUpdateService.startUpdate(this.file.name).subscribe(()=>{this.updateStatus()})}updateStatus(){this.aliveStatus=!0,this.statusSubscription$=(0,f.H)(5e3,5e3).pipe((0,F.o)(()=>this.aliveStatus),(0,J.z)(()=>this.wmbusFirmwareUpdateService.updateStatus().pipe((0,N.K)(()=>R.E)))).subscribe(e=>{let i=[];"finished"===e.status&&(this.updateFinished=!0,this.statusSubscription$.unsubscribe(),this.uploadSubscription$.unsubscribe(),"E_UPGRADE_FILE"===e.progress.status&&(this.modalService.hide(),this.toastr.error(this.translate.instant("INCORRECT_FILE"))),"E_NO_DEVICE"===e.progress.status&&(this.modalService.hide(),this.toastr.error(this.translate.instant("WMBUS_NO_FOUND")))),Object.keys(e.progress.devices).forEach(function(a,o){(e.progress.devices[a].progress||"E_COMM_ERROR"===e.progress.devices[a].status)&&i.push(e.progress.devices[a])}),this.updateList=i.sort((a,o)=>a.modbus_id-o.modbus_id),this.updateList.length&&(this.updateProgress=this.updateList,this.modalService.hide(),this.modalService.showModal(this.wirelessMbusFirmwareProgressTemplate,()=>{this.sessionService.startSession(!0)},!0))})}roundProgress(e){return Math.round(e)}onDoneClick(){this.statusSubscription$.unsubscribe(),this.uploadSubscription$.unsubscribe(),this.toastr.clear(),this.updateProgress=[],this.updateList=[],this.updateFinished=!1,this.modalService.hide()}hideToast(){this.toastr.clear()}ngOnDestroy(){this.aliveStatus=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C._),t.Y36(O.Z),t.Y36(_.sK),t.Y36(Kn),t.Y36(z.m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-firmware-update-wmbus"]],viewQuery:function(e,i){if(1&e&&(t.Gf(ti,5),t.Gf(ei,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.wirelessMbusFirmwareProgressTemplate=a.first),t.iGM(a=t.CRH())&&(i.wirelessMbusFirmwareStatusTemplate=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:6,vars:2,consts:[["class","section-content",4,"ngIf"],["wirelessMbusFirmwareProgressTemplate",""],["wirelessMbusFirmwareStatusTemplate",""],[1,"section-content"],["target","_blank",3,"click"],["href","","target","_blank"],["inputId","selected_file","accept",".sec",3,"file","fileChange","callbackChange"],[1,"text-center"],["nz-button","","nzType","primary","id","update_button",3,"click"],["style","margin: 50px 50px",4,"ngIf"],["class","p-dialog-body",4,"ngIf"],[1,"p-dialog-footer"],["nz-button","","appHideModal","",3,"click",4,"ngIf"],[2,"margin","50px 50px"],[1,"p-dialog-body"],[3,"nzData"],["basicTable",""],[4,"ngFor","ngForOf"],[1,""],["nzStatus","normal",3,"nzPercent",4,"ngIf"],[4,"ngIf"],[1,"center"],["style","color: rgb(12, 169, 25)","class","icon_abb_16 icon-abb_check-mark-light_32",4,"ngIf"],["class","center",4,"ngIf"],["style","color: rgb(240, 48, 64)","class","icon_abb_16 icon-abb_error-circle-2_32",4,"ngIf"],["nzStatus","normal",3,"nzPercent"],[1,"icon_abb_16","icon-abb_check-mark-light_32",2,"color","rgb(12, 169, 25)"],[1,"icon_abb_16","icon-abb_hour-glass_16"],[1,"icon_abb_16","icon-abb_error-circle-2_32",2,"color","rgb(240, 48, 64)"],["nz-button","","appHideModal","",3,"click"],[3,"nzData",4,"ngIf"],["nz-button","","appHideModal",""]],template:function(e,i){1&e&&(t.YNc(0,ni,2,0,"div",0),t.YNc(1,ii,25,22,"div",0),t.YNc(2,mi,6,4,"ng-template",null,1,t.W1O),t.YNc(4,Zi,11,10,"ng-template",null,2,t.W1O)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,k.Y,v.ix,A.dQ,x.w,d.N8,d.Om,d.$Z,d.Uo,d._C,d.p0,r.sg,G.M,Y.u],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto}.section-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}#update_button[_ngcontent-%COMP%]{margin-top:20px}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),n})(),vi=(()=>{class n{constructor(e){this.http=e}getData(){return this.http.get("api/settings/email")}setData(e){return this.http.post("api/settings/email",e,{responseType:"text"})}getTest(e){return this.http.post("api/settings/email/test",e,{responseType:"text"})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ai=["form"];function xi(n,s){1&n&&t._UZ(0,"app-loader")}const Si=function(n){return{loading:n}};function bi(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"form",3,4),t.TgZ(3,"p"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"input",6),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.address=a}),t.qZA(),t.qZA(),t.TgZ(11,"div",5),t.TgZ(12,"label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"input",7),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.username=a}),t.qZA(),t.qZA(),t.TgZ(16,"div",5),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"input",8),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.password=a}),t.qZA(),t.qZA(),t.TgZ(21,"div",5),t.TgZ(22,"label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"input",9),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.smtp_server=a}),t.qZA(),t.qZA(),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"app-validate",10),t.TgZ(31,"nz-input-number",11,12),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.port=a}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",5),t.TgZ(34,"nz-switch",13),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.ssl=a}),t.qZA(),t.TgZ(35,"span"),t._uU(36),t.ALo(37,"translate"),t.ALo(38,"translate"),t.qZA(),t.qZA(),t.TgZ(39,"div",5),t.TgZ(40,"nz-switch",14),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().data.address=a}),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.ALo(43,"translate"),t.ALo(44,"translate"),t.qZA(),t.qZA(),t.TgZ(45,"button",15),t.NdJ("click",function(){t.CHM(e);const a=t.MAs(2);return t.oxw().test(a)}),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit()}),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(32),i=t.oxw();t.xp6(1),t.Q6J("appCanDeactivate",i.canDeactivate.bind(i)),t.xp6(3),t.Oqu(t.lcZ(5,29,"EMAIL_INFO_TEXT")),t.xp6(4),t.Oqu(t.lcZ(9,31,"TARGET_EMAIL")),t.xp6(2),t.Q6J("ngModel",i.data.address),t.xp6(3),t.Oqu(t.lcZ(14,33,"USERNAME")),t.xp6(2),t.Q6J("ngModel",i.data.username),t.xp6(3),t.Oqu(t.lcZ(19,35,"PASSWORD")),t.xp6(2),t.Q6J("ngModel",i.data.password),t.xp6(3),t.Oqu(t.lcZ(24,37,"SMTP_SERVER")),t.xp6(2),t.Q6J("ngModel",i.data.smtp_server),t.xp6(3),t.Oqu(t.lcZ(29,39,"SMTP_PORT")),t.xp6(2),t.Q6J("field",e),t.xp6(1),t.Q6J("ngModel",i.data.port)("id","smtp_port_input_wrapper")("nzMin",33)("nzMax",1e7)("required",!0),t.xp6(3),t.Q6J("ngModel",i.data.ssl),t.xp6(2),t.AsE("",t.lcZ(37,41,"SSL_CONNECTION")," ",t.lcZ(38,43,i.data.ssl?"ENABLED":"DISABLED"),""),t.xp6(4),t.Q6J("ngModel",i.data.address),t.xp6(2),t.AsE("",t.lcZ(43,45,"EMAIL_AUTHENTICATION")," ",t.lcZ(44,47,i.data.auth?"ENABLED":"DISABLED"),""),t.xp6(3),t.Q6J("disabled",i.saving||i.testing)("ngClass",t.VKq(53,Si,i.testing)),t.xp6(1),t.hij(" ",t.lcZ(47,49,"TEST")," "),t.xp6(2),t.Q6J("nzLoading",i.saving)("disabled",i.saving),t.xp6(1),t.hij(" ",t.lcZ(50,51,"APPLY")," ")}}const Mi=[{path:"",redirectTo:"general/time"},{path:"general",redirectTo:"general/time"},{path:"communication",redirectTo:"communication/ip"},{path:"firmware-update",redirectTo:"firmware-update/control-unit"},{path:"ssl-certificate",redirectTo:"ssl-certificate/upload"},{path:"general",component:S,children:[{path:"time",component:rt,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"GENERAL",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"TIME"}},{path:"session",component:dt,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"GENERAL",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"SESSION"}},{path:"system",component:St,data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"GENERAL",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"SYSTEM"},canActivate:[u.a]},{path:"region",component:Ln,data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"GENERAL",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"REGION"},canActivate:[u.a]},{path:"ui-aspect-themes",component:me,data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"GENERAL",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"UI_ASPECT_THEMES"},canActivate:[u.a]}]},{path:"communication",component:Gt,children:[{path:"ip",component:wt,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"COMMUNICATION",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"IP"}},{path:"email",component:(()=>{class n{constructor(e,i,a){this.translate=e,this.toastr=i,this.settingsEmailService=a,this.id="system_setup_communication_email",this.loadingData=!0,this.saving=!1,this.testing=!1}ngOnInit(){this.getData()}getData(){this.settingsEmailService.getData().subscribe(e=>{e.password&&(this.passwordPlaceholder=!0,e.password=""),this.data=e,this.loadingData=!1})}submit(){this.toastr.clear(),this.saving=!0,this.settingsEmailService.setData(this.data).subscribe(()=>{this.toastr.success(this.translate.instant("EMAIL_SUCCESS")),this.saving=!1,this.form.form.markAsPristine()},e=>{this.toastr.error(this.translate.instant("REQUEST_ERROR")),console.log(e),this.saving=!1})}test(e){let i;this.toastr.clear(),this.testing=!0,e.dirty&&(i=this.data),this.settingsEmailService.getTest(i).subscribe(()=>{this.toastr.success(this.translate.instant("BUTTON_TEST_OK")),this.testing=!1},a=>{console.log(a),this.toastr.error(a.error),this.testing=!1})}canDeactivate(){if(!this.form)return!0;let e=!1;return Object.keys(this.form.controls).forEach(i=>{"password"===i?this.data.password&&(e=!0):this.form.controls[i].dirty&&(e=!0)}),!this.form.dirty||this.form.dirty&&!e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.sK),t.Y36(C._),t.Y36(vi))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-system-setup-communication-email"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ai,5),2&e){let a;t.iGM(a=t.CRH())&&(i.form=a.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.uIk("id",i.id)},decls:2,vars:2,consts:[[4,"ngIf"],["class","section-content",4,"ngIf"],[1,"section-content"],[3,"appCanDeactivate"],["form","ngForm"],[1,"form-group-item"],["id","email__email","name","email_email",3,"ngModel","ngModelChange"],["id","email_username","name","email_username",3,"ngModel","ngModelChange"],["id","email_password","name","email_password",3,"ngModel","ngModelChange"],["id","email_smtp_server","name","email_smtp_server",3,"ngModel","ngModelChange"],[3,"field"],["nzId","smtp_port_input","name","smtpPortInput","yy","",3,"ngModel","id","nzMin","nzMax","required","ngModelChange"],["smtpPort","ngModel"],["id","email_ssl_connection_switch","name","email_ssl_connection_switch",3,"ngModel","ngModelChange"],["id","email_authentication_switch","name","email_authentication_switch",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary",1,"btn","btn-primary",3,"disabled","ngClass","click"],["nz-button","","nzType","primary","type","submit","id","apply_button",1,"btn","btn-primary",3,"nzLoading","disabled","click"]],template:function(e,i){1&e&&(t.YNc(0,xi,1,0,"app-loader",0),t.YNc(1,bi,51,55,"div",1)),2&e&&(t.Q6J("ngIf",i.loadingData),t.xp6(1),t.Q6J("ngIf",!i.loadingData))},directives:[r.O5,h.R,c._Y,c.JL,c.F,b.z,c.Fj,c.JJ,c.On,q.P,H._,c.Q7,Q.i,v.ix,A.dQ,x.w,r.mk],pipes:[_.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .section-content[_ngcontent-%COMP%]{display:flex}"]}),n})(),canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"COMMUNICATION",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"EMAIL"}},{path:"modbus",component:Nt,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"COMMUNICATION",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"MODBUS"}},{path:"rest-api",component:Xt,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"COMMUNICATION",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"REST_API"}},{path:"wifi",component:Be,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"COMMUNICATION",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"WIFI"}},{path:"dns",component:Mn,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"COMMUNICATION",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"DNS"}},{path:"ftp",component:qe,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"COMMUNICATION",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"FTP"}}]},{path:"users",component:ue,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"USERS",icon:"icon_abb_24 icon-abb_advanced-settings_24"}},{path:"ssl-certificate",component:Jn,canActivate:[u.a],children:[{path:"upload",component:$n,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"SSL_CERTIFICATE",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"UPLOAD"}},{path:"generate",component:Bn,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"SSL_CERTIFICATE",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"GENERATE"}}]},{path:"firmware-update",component:qn,children:[{path:"control-unit",component:ht,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"FIRMWARE_UPDATE",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"CONTROL_UNIT"}},{path:"ssd",component:Me,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"FIRMWARE_UPDATE",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"SSD"}},{path:"mod",component:An,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"FIRMWARE_UPDATE",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"MOD"}},{path:"wireless-mbus",component:Ci,canActivate:[u.a],data:{activeMenu:"SYSTEM_SETUP",activeSubMenu:"FIRMWARE_UPDATE",icon:"icon_abb_24 icon-abb_advanced-settings_24",activeTab:"WIRELESS_MBUS"}}]}];let Ui=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[u.a],imports:[[Z.Bz.forChild(Mi)],Z.Bz]}),n})();var wi=l(5084);let Ii=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,wi.m,Ui]]}),n})()},7618:(X,y,l)=>{l.d(y,{a:()=>m});var r=l(5e3),Z=l(4521),t=l(9777);let m=(()=>{class _{constructor(E,U){this.router=E,this.appLoadService=U}canActivate(E,U){return!!this.appLoadService.user.logged||(this.router.navigate(["/login"],{queryParams:{returnUrl:U.url}}),!1)}}return _.\u0275fac=function(E){return new(E||_)(r.LFG(Z.F0),r.LFG(t.V))},_.\u0275prov=r.Yz7({token:_,factory:_.\u0275fac}),_})()}}]);